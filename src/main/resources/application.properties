spring.application.name=inventory
server.port=8081

# Configuración JWT (con soporte para variables de entorno)
jwt.secret=${JWT_SECRET:404E635266556A586E3272357538782F413F4428472B4B6250645367566B5970}
jwt.expiration=${JWT_EXPIRATION:86400000}

# Configuración base de datos (con soporte para variables de entorno)
spring.datasource.url=${SPRING_DATASOURCE_URL:jdbc:postgresql://localhost:5432/inventory}
spring.datasource.username=${SPRING_DATASOURCE_USERNAME:inventory_user}
spring.datasource.password=${SPRING_DATASOURCE_PASSWORD:inventory_password}
# Muestra los errores detallados en la consola
logging.level.org.springframework.web=DEBUG
logging.level.org.hibernate=ERROR
# JPA
spring.jpa.hibernate.ddl-auto=update
spring.jpa.show-sql=true
spring.jpa.properties.hibernate.format_sql=true
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.PostgreSQLDialect
spring.datasource.hikari.maximum-pool-size=10

# HikariCP settings
spring.datasource.hikari.initialization-fail-timeout=30000
spring.datasource.hikari.connection-timeout=30000
spring.datasource.hikari.idle-timeout=600000

# Logging
logging.level.org.springframework.security=DEBUG
logging.level.com.economatom.inventory=DEBUG

# Cache warmup (deshabilitar con false en tests)
cache.warmup.enabled=${CACHE_WARMUP_ENABLED:true}

# Kafka configuration (con soporte para variables de entorno)
spring.kafka.bootstrap-servers=${SPRING_KAFKA_BOOTSTRAP_SERVERS:localhost:9092}
spring.kafka.producer.retries=3
spring.kafka.producer.acks=1
spring.kafka.producer.key-serializer=org.apache.kafka.common.serialization.StringSerializer
spring.kafka.producer.value-serializer=org.springframework.kafka.support.serializer.JsonSerializer
spring.kafka.consumer.auto-offset-reset=earliest
spring.kafka.consumer.enable-auto-commit=false
# NO configurar deserializers en properties (se configura programáticamente en KafkaConfig)

# Redis configuration (con soporte para variables de entorno)
spring.data.redis.host=${SPRING_DATA_REDIS_HOST:localhost}
spring.data.redis.port=${SPRING_DATA_REDIS_PORT:6379}
spring.data.redis.timeout=60000
spring.data.redis.jedis.pool.max-active=8
spring.data.redis.jedis.pool.max-idle=8
spring.data.redis.jedis.pool.min-idle=0
spring.cache.type=redis
spring.cache.redis.time-to-live=1800000
spring.cache.redis.cache-null-values=false

# Server
server.error.include-message=always
server.error.include-binding-errors=always

# Actuator (health checks para Docker)
management.endpoints.web.exposure.include=health,info
management.endpoint.health.show-details=when-authorized

# Habilitar endpoint JSON de OpenAPI
springdoc.api-docs.path=/v3/api-docs

springdoc.swagger-ui.path=/swagger-ui.html

spring.devtools.restart.enabled=true
spring.devtools.livereload.enabled=true
spring.thymeleaf.cache=false
spring.datasource.hikari.maximum-pool-size=50
spring.threads.virtual.enabled=true
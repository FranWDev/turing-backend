<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="Sistema de gesti√≥n de inventario para economatos - Control de stock, recetas, √≥rdenes y recepci√≥n de productos" />
    <meta name="theme-color" content="#667eea" />
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üì¶</text></svg>">
    <link rel="manifest" href="/manifest.json">
    <title>Ejemplo de inventario Economato</title>
    <link rel="stylesheet" href="styles/var.css" />
    <link rel="stylesheet" href="styles/base.css" />
    <link rel="stylesheet" href="styles/header.css" />
    <link rel="stylesheet" href="styles/sidebar.css" />
    <link rel="stylesheet" href="styles/main.css" />
    <link rel="stylesheet" href="styles/forms.css" />
    <link rel="stylesheet" href="styles/table.css" />
    <link rel="stylesheet" href="styles/buttons.css" />
    <link rel="stylesheet" href="styles/footer.css" />
    <link rel="stylesheet" href="styles/responsive.css" />
    <link rel="stylesheet" href="styles/animations.css" />
    <link rel="stylesheet" href="styles/modals.css" />
    <link rel="stylesheet" href="styles/notifications.css" />
    <link rel="stylesheet" href="styles/table-messages.css" />
    <link rel="stylesheet" href="styles/routes.css" />
    <link rel="stylesheet" href="styles/recipes.css" />
    <link rel="stylesheet" href="styles/reception.css" />
    <link rel="stylesheet" href="styles/order-creation.css" />
    <link rel="stylesheet" href="styles/orders.css" />
    <link rel="stylesheet" href="styles/loading.css" />
    <link rel="stylesheet" href="styles/history.css" />
  </head>
  <body>
    <noscript>
      <div style="padding: 20px; text-align: center; background: #fff3cd; color: #856404; border: 1px solid #ffeeba;">
        <strong>JavaScript est√° deshabilitado.</strong> Esta aplicaci√≥n requiere JavaScript para funcionar correctamente.
      </div>
    </noscript>
    <header>
      <button class="menu-toggle" id="menuToggle">‚ò∞</button>
      <h1>Inventario</h1>
    </header>

    <aside class="aside" id="asideMenu">
      <div class="username">
        <div class="username-icon"></div>
        <span class="username-text">Francisco</span>
      </div>

      <nav class="menu">
        <div class="menu-indicator" id="menuIndicator"></div>

        <a href="#" class="item active" data-index="0">
          <svg class="icon" viewBox="0 0 24 24">
            <path
              d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"
            ></path>
          </svg>
          <span class="label">Inventario</span>
        </a>

        <a href="#" class="item" data-index="1">
          <svg class="icon" viewBox="0 0 24 24">
            <path
              d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"
            ></path>
          </svg>
          <span class="label">Recepcion</span>
        </a>

        <a href="#" class="item" data-index="2">
          <svg class="icon" viewBox="0 0 24 24">
            <path
              d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"
            ></path>
          </svg>
          <span class="label">Historial</span>
        </a>

        <a href="#" class="item" data-index="3">
          <svg class="icon" viewBox="0 0 24 24">
            <path
              d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"
            ></path>
          </svg>
          <span class="label">Recetas</span>
        </a>

        <a href="/login" class="item logout" data-index="4">
          <svg class="icon" viewBox="0 0 24 24">
            <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"></path>
            <polyline points="16 17 21 12 16 7"></polyline>
            <line x1="21" y1="12" x2="9" y2="12"></line>
          </svg>
          <span class="label">Cerrar sesion</span>
        </a>
      </nav>
    </aside>

    <main>
      <section class="inventory-section route-section active" id="inventory-section">
        <div class="inventory-header">
          <h2>Tabla de Inventario</h2>
          <div class="inventory-controls">
            <div class="search-input-container">
              <label for="inventory-search" class="visually-hidden">Buscar producto</label>
              <input
                id="inventory-search"
                class="inventory-search"
                type="text"
                placeholder="Buscar por nombre o c√≥digo"
                aria-label="Buscar por nombre o c√≥digo de producto"
              />
              <button class="camera-btn" id="barcodeScannerBtn" title="Escanear c√≥digo de barras">
                <svg viewBox="0 0 24 24" width="20" height="20" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                  <path d="M21 19V5c0-1.1-.9-2-2-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2zM8.5 13.5l2.5 3.01L14.5 12l4.5 6H5l3.5-4.5z"/>
                </svg>
              </button>
            </div>
            <label for="mobile-sort" class="visually-hidden">Ordenar productos</label>
            <select id="mobile-sort" class="mobile-sort-select" style="display: none;" aria-label="Ordenar productos">
              <option value="">Ordenar por...</option>
              <option value="name|asc">Nombre (A-Z)</option>
              <option value="name|desc">Nombre (Z-A)</option>
              <option value="currentStock|asc">Cantidad (menor a mayor)</option>
              <option value="currentStock|desc">Cantidad (mayor a menor)</option>
              <option value="unitPrice|asc">Precio (menor a mayor)</option>
              <option value="unitPrice|desc">Precio (mayor a menor)</option>
              <option value="total|asc">Total (menor a mayor)</option>
              <option value="total|desc">Total (mayor a menor)</option>
            </select>
          </div>
        </div>

        <div class="table-container">
          <table class="inventory-table">
            <thead>
              <tr>
                <th data-sortable="name">Nombre</th>
                <th data-sortable="type">Tipo</th>
                <th data-sortable="currentStock">Cantidad</th>
                <th data-sortable="unitPrice">Precio</th>
                <th data-sortable="total">Total</th>
                <th>Acciones</th>
              </tr>
            </thead>
            <tbody>
            </tbody>
          </table>
        </div>
      </section>

      <section id="reception-section" class="route-section reception-section">
        <div class="reception-header">
          <h2>Gesti√≥n de Recepci√≥n</h2>
          <div class="reception-controls">
            <label for="reception-search" class="visually-hidden">Buscar recepci√≥n</label>
            <input
              id="reception-search"
              class="reception-search"
              type="text"
              placeholder="Buscar por orden o usuario"
              aria-label="Buscar por orden o usuario"
            />
            <label for="reception-filter" class="visually-hidden">Filtrar recepciones</label>
            <select id="reception-filter" class="reception-filter" aria-label="Filtrar recepciones">
              <option value="all">Todas</option>
            </select>
            <button class="action-btn primary" id="createOrderBtn">
              + Crear Orden
            </button>
          </div>
        </div>
        <div id="receptionGrid" class="reception-grid">
        </div>
      </section>

      <section id="history-section" class="route-section history-section">
        <div class="history-header">
          <h2>Historial de Cambios</h2>
          <div class="history-controls">
            <div class="tab-selector" role="tablist" aria-label="Seleccionar tipo de historial">
              <button class="tab-btn active" data-tab="inventory" role="tab" aria-selected="true" aria-controls="inventoryHistoryTab">Inventario</button>
              <button class="tab-btn" data-tab="recipes" role="tab" aria-selected="false" aria-controls="recipesHistoryTab">Recetas</button>
              <button class="tab-btn" data-tab="orders" role="tab" aria-selected="false" aria-controls="ordersHistoryTab">√ìrdenes</button>
            </div>
            <label for="history-search" class="visually-hidden">Buscar en historial</label>
            <input
              id="history-search"
              class="history-search"
              type="text"
              placeholder="Buscar por producto o usuario"
              aria-label="Buscar por producto o usuario"
            />
            <label for="history-filter" class="visually-hidden">Filtrar historial</label>
            <select id="history-filter" class="history-filter" aria-label="Filtrar por tipo de movimiento">
              <option value="all">Todos</option>
              <option value="ENTRADA">Entradas</option>
              <option value="SALIDA">Salidas</option>
              <option value="AJUSTE">Ajustes</option>
              <option value="DEVOLUCION">Devoluciones</option>
            </select>
            <div class="date-range-picker">
              <label for="dateFrom" class="visually-hidden">Fecha desde</label>
              <input type="date" class="date-input" id="dateFrom" aria-label="Fecha desde" />
              <span aria-hidden="true">-</span>
              <label for="dateTo" class="visually-hidden">Fecha hasta</label>
              <input type="date" class="date-input" id="dateTo" aria-label="Fecha hasta" />
            </div>
          </div>
        </div>

        <div class="history-content">
          <div class="history-tab-content active" id="inventoryHistoryTab">
            <div class="table-container">
              <table class="history-table">
                <thead>
                  <tr>
                    <th>Fecha</th>
                    <th>Producto</th>
                    <th>Tipo</th>
                    <th>Cantidad</th>
                    <th>Usuario</th>
                    <th>Estado Anterior</th>
                    <th>Estado Nuevo</th>
                  </tr>
                </thead>
                <tbody id="inventoryHistoryBody">
                  <tr class="loading-row">
                    <td colspan="7">
                      <div class="loading-spinner"></div>
                      Cargando historial...
                    </td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>

          <div class="history-tab-content" id="recipesHistoryTab">
            <div class="table-container">
              <table class="history-table">
                <thead>
                  <tr>
                    <th>Fecha</th>
                    <th>Receta</th>
                    <th>Acci√≥n</th>
                    <th>Usuario</th>
                    <th>Estado Anterior</th>
                    <th>Estado Nuevo</th>
                  </tr>
                </thead>
                <tbody id="recipesHistoryBody">
                  <tr class="loading-row">
                    <td colspan="6">
                      <div class="loading-spinner"></div>
                      Cargando historial...
                    </td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>

          <div class="history-tab-content" id="ordersHistoryTab">
            <div class="table-container">
              <table class="history-table">
                <thead>
                  <tr>
                    <th>Fecha</th>
                    <th>Orden ID</th>
                    <th>Acci√≥n</th>
                    <th>Usuario</th>
                    <th>Estado Anterior</th>
                    <th>Estado Nuevo</th>
                  </tr>
                </thead>
                <tbody id="ordersHistoryBody">
                  <tr class="loading-row">
                    <td colspan="6">
                      <div class="loading-spinner"></div>
                      Cargando historial...
                    </td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>
        </div>
      </section>

      <section id="recipes-section" class="route-section">
        <div class="recipes-header">
          <h2>Recetas</h2>
          <div class="recipes-controls">
            <label for="recipes-search" class="visually-hidden">Buscar receta</label>
            <input
              id="recipes-search"
              class="recipes-search"
              type="text"
              placeholder="Buscar receta"
              aria-label="Buscar receta"
            />
            <label for="recipes-filter" class="visually-hidden">Filtrar recetas</label>
            <select id="recipes-filter" class="recipes-filter" aria-label="Filtrar recetas por costo">
              <option value="">Todas</option>
              <option value="cost-asc">Menor costo</option>
              <option value="cost-desc">Mayor costo</option>
            </select>
          </div>
        </div>

        <div class="recipes-container">
          <div class="recipes-grid" id="recipesGrid">
          </div>
        </div>
      </section>
    </main>

    <footer>
      <p>&copy; 2025 Ejemplo de Inventario Economato - Made By Fran</p>
    </footer>

    <script type="module" src="scripts/api/products.api.js" defer></script>
    <script type="module" src="scripts/api/recipes.api.js" defer></script>
    <script type="module" src="scripts/api/orders.api.js" defer></script>
    <script type="module" src="scripts/api/reception.api.js" defer></script>
    <script type="module" src="scripts/api/audit.api.js" defer></script>

    <script type="module" src="scripts/components/auth.component.js" defer></script>
    <script type="module" src="scripts/components/orders.component.js" defer></script>
    <script type="module" src="scripts/components/history.component.js" defer></script>

    <script type="module" src="scripts/script.js" defer></script>
  </body>
</html>

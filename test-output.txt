[INFO] Scanning for projects...
[INFO] 
[INFO] ----------------------< com.economatom:inventory >----------------------
[INFO] Building inventory 0.0.1-SNAPSHOT
[INFO]   from pom.xml
[INFO] --------------------------------[ jar ]---------------------------------
[INFO] 
[INFO] --- clean:3.4.1:clean (default-clean) @ inventory ---
[INFO] Deleting /home/franchu/Escritorio/turing/target
[INFO] 
[INFO] --- jacoco:0.8.11:prepare-agent (prepare-agent) @ inventory ---
[INFO] argLine set to -javaagent:/home/franchu/.m2/repository/org/jacoco/org.jacoco.agent/0.8.11/org.jacoco.agent-0.8.11-runtime.jar=destfile=/home/franchu/Escritorio/turing/target/jacoco.exec
[INFO] 
[INFO] --- resources:3.3.1:resources (default-resources) @ inventory ---
[INFO] Copying 1 resource from src/main/resources to target/classes
[INFO] Copying 48 resources from src/main/resources to target/classes
[INFO] 
[INFO] --- compiler:3.14.0:compile (default-compile) @ inventory ---
[INFO] Recompiling the module because of changed source code.
[INFO] Compiling 105 source files with javac [debug parameters release 17] to target/classes
[WARNING] /home/franchu/Escritorio/turing/src/main/java/com/economatom/inventory/mapper/ProductMapper.java:[18,13] Unmapped target property: "version".
[WARNING] /home/franchu/Escritorio/turing/src/main/java/com/economatom/inventory/mapper/ProductMapper.java:[22,10] Unmapped target property: "version".
[WARNING] /home/franchu/Escritorio/turing/src/main/java/com/economatom/inventory/mapper/AllergenMapper.java:[18,14] Unmapped target properties: "id, recipes".
[WARNING] /home/franchu/Escritorio/turing/src/main/java/com/economatom/inventory/mapper/AllergenMapper.java:[20,10] Unmapped target properties: "id, recipes".
[WARNING] /home/franchu/Escritorio/turing/src/main/java/com/economatom/inventory/mapper/RecipeMapper.java:[47,12] Unmapped target property: "version".
[WARNING] /home/franchu/Escritorio/turing/src/main/java/com/economatom/inventory/mapper/RecipeMapper.java:[56,10] Unmapped target property: "version".
[INFO] 
[INFO] --- resources:3.3.1:testResources (default-testResources) @ inventory ---
[INFO] Copying 1 resource from src/test/resources to target/test-classes
[INFO] 
[INFO] --- compiler:3.14.0:testCompile (default-testCompile) @ inventory ---
[INFO] Recompiling the module because of changed dependency.
[INFO] Compiling 25 source files with javac [debug parameters release 17] to target/test-classes
[INFO] 
[INFO] --- surefire:3.5.4:test (default-test) @ inventory ---
[INFO] Using auto detected provider org.apache.maven.surefire.junitplatform.JUnitPlatformProvider
[INFO] 
[INFO] -------------------------------------------------------
[INFO]  T E S T S
[INFO] -------------------------------------------------------
SLF4J(W): Class path contains multiple SLF4J providers.
SLF4J(W): Found provider [ch.qos.logback.classic.spi.LogbackServiceProvider@1de5f0ef]
SLF4J(W): Found provider [org.slf4j.simple.SimpleServiceProvider@376a312c]
SLF4J(W): See https://www.slf4j.org/codes.html#multiple_bindings for an explanation.
SLF4J(I): Actual provider is of type [ch.qos.logback.classic.spi.LogbackServiceProvider@1de5f0ef]
[INFO] Running com.economatom.inventory.InventoryApplicationTests
22:38:11.288 [main] INFO org.springframework.test.context.support.AnnotationConfigContextLoaderUtils -- Could not detect default configuration classes for test class [com.economatom.inventory.InventoryApplicationTests]: InventoryApplicationTests does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
22:38:11.353 [main] INFO org.springframework.boot.test.context.SpringBootTestContextBootstrapper -- Found @SpringBootConfiguration com.economatom.inventory.InventoryApplication for test class com.economatom.inventory.InventoryApplicationTests
22:38:11.459 [main] INFO org.springframework.boot.devtools.restart.RestartApplicationListener -- Restart disabled due to context in which it is running

  .   ____          _            __ _ _
 /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
 \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
  '  |____| .__|_| |_|_| |_\__, | / / / /
 =========|_|==============|___/=/_/_/_/

 :: Spring Boot ::                (v3.5.6)

2026-01-30T22:38:11.635Z  INFO 372594 --- [inventory] [           main] c.e.inventory.InventoryApplicationTests  : Starting InventoryApplicationTests using Java 21.0.2 with PID 372594 (started by franchu in /home/franchu/Escritorio/turing)
2026-01-30T22:38:11.636Z DEBUG 372594 --- [inventory] [           main] c.e.inventory.InventoryApplicationTests  : Running with Spring Boot v3.5.6, Spring v6.2.11
2026-01-30T22:38:11.636Z  INFO 372594 --- [inventory] [           main] c.e.inventory.InventoryApplicationTests  : The following 1 profile is active: "test"
2026-01-30T22:38:11.654Z DEBUG 372594 --- [inventory] [           main] o.s.w.c.s.GenericWebApplicationContext   : Refreshing org.springframework.web.context.support.GenericWebApplicationContext@514377fc
2026-01-30T22:38:12.295Z  INFO 372594 --- [inventory] [           main] .s.d.r.c.RepositoryConfigurationDelegate : Multiple Spring Data modules found, entering strict repository configuration mode
2026-01-30T22:38:12.296Z  INFO 372594 --- [inventory] [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2026-01-30T22:38:12.373Z  INFO 372594 --- [inventory] [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 72 ms. Found 10 JPA repository interfaces.
2026-01-30T22:38:12.381Z  INFO 372594 --- [inventory] [           main] .s.d.r.c.RepositoryConfigurationDelegate : Multiple Spring Data modules found, entering strict repository configuration mode
2026-01-30T22:38:12.382Z  INFO 372594 --- [inventory] [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2026-01-30T22:38:12.391Z  INFO 372594 --- [inventory] [           main] .RepositoryConfigurationExtensionSupport : Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.economatom.inventory.repository.AllergenRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2026-01-30T22:38:12.392Z  INFO 372594 --- [inventory] [           main] .RepositoryConfigurationExtensionSupport : Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.economatom.inventory.repository.InventoryAuditRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2026-01-30T22:38:12.392Z  INFO 372594 --- [inventory] [           main] .RepositoryConfigurationExtensionSupport : Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.economatom.inventory.repository.OrderDetailRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2026-01-30T22:38:12.392Z  INFO 372594 --- [inventory] [           main] .RepositoryConfigurationExtensionSupport : Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.economatom.inventory.repository.OrderRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2026-01-30T22:38:12.392Z  INFO 372594 --- [inventory] [           main] .RepositoryConfigurationExtensionSupport : Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.economatom.inventory.repository.ProductRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2026-01-30T22:38:12.393Z  INFO 372594 --- [inventory] [           main] .RepositoryConfigurationExtensionSupport : Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.economatom.inventory.repository.RecipeAllergenRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2026-01-30T22:38:12.393Z  INFO 372594 --- [inventory] [           main] .RepositoryConfigurationExtensionSupport : Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.economatom.inventory.repository.RecipeAuditRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2026-01-30T22:38:12.393Z  INFO 372594 --- [inventory] [           main] .RepositoryConfigurationExtensionSupport : Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.economatom.inventory.repository.RecipeComponentRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2026-01-30T22:38:12.393Z  INFO 372594 --- [inventory] [           main] .RepositoryConfigurationExtensionSupport : Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.economatom.inventory.repository.RecipeRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2026-01-30T22:38:12.393Z  INFO 372594 --- [inventory] [           main] .RepositoryConfigurationExtensionSupport : Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.economatom.inventory.repository.UserRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2026-01-30T22:38:12.393Z  INFO 372594 --- [inventory] [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 5 ms. Found 0 Redis repository interfaces.
2026-01-30T22:38:12.778Z  INFO 372594 --- [inventory] [           main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2026-01-30T22:38:12.802Z  INFO 372594 --- [inventory] [           main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.6.29.Final
2026-01-30T22:38:12.823Z  INFO 372594 --- [inventory] [           main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2026-01-30T22:38:12.989Z  INFO 372594 --- [inventory] [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2026-01-30T22:38:13.006Z  INFO 372594 --- [inventory] [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2026-01-30T22:38:13.168Z  INFO 372594 --- [inventory] [           main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:testdb user=SA
2026-01-30T22:38:13.169Z  INFO 372594 --- [inventory] [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2026-01-30T22:38:13.182Z  WARN 372594 --- [inventory] [           main] org.hibernate.dialect.Dialect            : HHH000511: The 2.3.232 version for [org.hibernate.dialect.PostgreSQLDialect] is no longer supported, hence certain features may not work properly. The minimum supported version is 12.0.0. Check the community dialects project for available legacy versions.
2026-01-30T22:38:13.192Z  WARN 372594 --- [inventory] [           main] org.hibernate.orm.deprecation            : HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2026-01-30T22:38:13.203Z  INFO 372594 --- [inventory] [           main] org.hibernate.orm.connections.pooling    : HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 2.3.232
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2026-01-30T22:38:14.008Z  INFO 372594 --- [inventory] [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
Hibernate: 
    set client_min_messages = WARNING
Hibernate: 
    alter table if exists inventory_audit 
       drop constraint if exists fk_inventory_audit_product
Hibernate: 
    alter table if exists inventory_audit 
       drop constraint if exists fk_inventory_audit_user
Hibernate: 
    alter table if exists order_detail 
       drop constraint if exists fk_order_detail_order
Hibernate: 
    alter table if exists order_detail 
       drop constraint if exists fk_order_detail_product
Hibernate: 
    alter table if exists order_header 
       drop constraint if exists fk_order_user
Hibernate: 
    alter table if exists recipe_allergen 
       drop constraint if exists FK5ceorq8xo6ht37xq3dmj7xsaa
Hibernate: 
    alter table if exists recipe_allergen 
       drop constraint if exists FKds7dbdp4j946gihsuy4asv2l4
Hibernate: 
    alter table if exists recipe_audit 
       drop constraint if exists fk_recipe_audit_recipe
Hibernate: 
    alter table if exists recipe_audit 
       drop constraint if exists fk_recipe_audit_user
Hibernate: 
    alter table if exists recipe_component 
       drop constraint if exists fk_recipe_component_recipe
Hibernate: 
    alter table if exists recipe_component 
       drop constraint if exists fk_recipe_component_product
Hibernate: 
    drop table if exists allergen cascade
Hibernate: 
    drop table if exists inventory_audit cascade
Hibernate: 
    drop table if exists order_detail cascade
Hibernate: 
    drop table if exists order_header cascade
Hibernate: 
    drop table if exists product cascade
Hibernate: 
    drop table if exists recipe cascade
Hibernate: 
    drop table if exists recipe_allergen cascade
Hibernate: 
    drop table if exists recipe_audit cascade
Hibernate: 
    drop table if exists recipe_component cascade
Hibernate: 
    drop table if exists users cascade
Hibernate: 
    create table allergen (
        allergen_id integer generated by default as identity,
        name varchar(50) not null unique,
        primary key (allergen_id)
    )
Hibernate: 
    create table inventory_audit (
        audit_id integer generated by default as identity,
        product_id integer not null,
        quantity numeric(13,3) not null,
        user_id integer,
        movement_date timestamp(6) not null,
        movement_type varchar(20) not null,
        action_description varchar(500),
        new_state TEXT,
        previous_state TEXT,
        primary key (audit_id)
    )
Hibernate: 
    create table order_detail (
        order_id integer not null,
        product_id integer not null,
        received_quantity numeric(13,3),
        requested_quantity numeric(13,3) not null,
        primary key (order_id, product_id)
    )
Hibernate: 
    create table order_header (
        order_id integer generated by default as identity,
        user_id integer not null,
        order_date timestamp(6) not null,
        version bigint,
        status varchar(20) not null,
        primary key (order_id)
    )
Hibernate: 
    create table product (
        current_stock numeric(13,3) not null,
        product_id integer generated by default as identity,
        unit_price numeric(12,2) not null,
        version bigint,
        unit_of_measure varchar(20) not null,
        product_code varchar(50) not null unique,
        type varchar(50) not null,
        name varchar(100) not null,
        primary key (product_id)
    )
Hibernate: 
    create table recipe (
        recipe_id integer generated by default as identity,
        total_cost numeric(12,2),
        version bigint,
        recipe_name varchar(150) not null,
        presentation TEXT,
        elaboration TEXT,
        primary key (recipe_id)
    )
Hibernate: 
    create table recipe_allergen (
        allergen_id integer not null,
        id integer generated by default as identity,
        recipe_id integer not null,
        primary key (id)
    )
Hibernate: 
    create table recipe_audit (
        audit_id integer generated by default as identity,
        recipe_id integer,
        user_id integer,
        audit_date timestamp(6) not null,
        action varchar(100) not null,
        details TEXT,
        new_state TEXT,
        previous_state TEXT,
        primary key (audit_id)
    )
Hibernate: 
    create table recipe_component (
        id integer generated by default as identity,
        parent_recipe_id integer not null,
        product_id integer not null,
        quantity numeric(13,3) not null,
        primary key (id),
        constraint uk_recipe_component unique (parent_recipe_id, product_id)
    )
Hibernate: 
    create table users (
        user_id integer generated by default as identity,
        role varchar(20) not null,
        email varchar(100) not null unique,
        name varchar(100) not null,
        password varchar(255) not null,
        primary key (user_id)
    )
Hibernate: 
    create index idx_inventory_audit_product 
       on inventory_audit (product_id)
Hibernate: 
    create index idx_inventory_audit_user 
       on inventory_audit (user_id)
Hibernate: 
    create index idx_inventory_audit_date 
       on inventory_audit (movement_date)
Hibernate: 
    create index idx_inventory_audit_type 
       on inventory_audit (movement_type)
Hibernate: 
    create index idx_order_detail_order 
       on order_detail (order_id)
Hibernate: 
    create index idx_order_detail_product 
       on order_detail (product_id)
Hibernate: 
    create index idx_order_status 
       on order_header (status)
Hibernate: 
    create index idx_order_date 
       on order_header (order_date)
Hibernate: 
    create index idx_order_user 
       on order_header (user_id)
Hibernate: 
    create index idx_product_name 
       on product (name)
Hibernate: 
    create index idx_product_type 
       on product (type)
Hibernate: 
    create index idx_recipe_name 
       on recipe (recipe_name)
Hibernate: 
    create index idx_recipe_audit_recipe 
       on recipe_audit (recipe_id)
Hibernate: 
    create index idx_recipe_audit_user 
       on recipe_audit (user_id)
Hibernate: 
    create index idx_recipe_audit_date 
       on recipe_audit (audit_date)
Hibernate: 
    create index idx_recipe_audit_action 
       on recipe_audit (action)
Hibernate: 
    create index idx_recipe_component_recipe 
       on recipe_component (parent_recipe_id)
Hibernate: 
    create index idx_recipe_component_product 
       on recipe_component (product_id)
Hibernate: 
    create index idx_user_role 
       on users (role)
Hibernate: 
    alter table if exists inventory_audit 
       add constraint fk_inventory_audit_product 
       foreign key (product_id) 
       references product
Hibernate: 
    alter table if exists inventory_audit 
       add constraint fk_inventory_audit_user 
       foreign key (user_id) 
       references users
Hibernate: 
    alter table if exists order_detail 
       add constraint fk_order_detail_order 
       foreign key (order_id) 
       references order_header
Hibernate: 
    alter table if exists order_detail 
       add constraint fk_order_detail_product 
       foreign key (product_id) 
       references product
Hibernate: 
    alter table if exists order_header 
       add constraint fk_order_user 
       foreign key (user_id) 
       references users
Hibernate: 
    alter table if exists recipe_allergen 
       add constraint FK5ceorq8xo6ht37xq3dmj7xsaa 
       foreign key (allergen_id) 
       references allergen
Hibernate: 
    alter table if exists recipe_allergen 
       add constraint FKds7dbdp4j946gihsuy4asv2l4 
       foreign key (recipe_id) 
       references recipe
Hibernate: 
    alter table if exists recipe_audit 
       add constraint fk_recipe_audit_recipe FOREIGN KEY (recipe_id) REFERENCES recipe(recipe_id) ON DELETE SET NULL
Hibernate: 
    alter table if exists recipe_audit 
       add constraint fk_recipe_audit_user 
       foreign key (user_id) 
       references users
Hibernate: 
    alter table if exists recipe_component 
       add constraint fk_recipe_component_recipe 
       foreign key (parent_recipe_id) 
       references recipe
Hibernate: 
    alter table if exists recipe_component 
       add constraint fk_recipe_component_product 
       foreign key (product_id) 
       references product
2026-01-30T22:38:14.058Z  INFO 372594 --- [inventory] [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2026-01-30T22:38:14.294Z  INFO 372594 --- [inventory] [           main] r$InitializeUserDetailsManagerConfigurer : Global AuthenticationManager configured with UserDetailsService bean with name customUserDetailsService
2026-01-30T22:38:14.316Z  INFO 372594 --- [inventory] [           main] o.s.d.j.r.query.QueryEnhancerFactory     : Hibernate is in classpath; If applicable, HQL parser will be used.
2026-01-30T22:38:14.906Z  WARN 372594 --- [inventory] [           main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2026-01-30T22:38:14.924Z  INFO 372594 --- [inventory] [           main] o.s.b.a.w.s.WelcomePageHandlerMapping    : Adding welcome page template: index
2026-01-30T22:38:14.973Z DEBUG 372594 --- [inventory] [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : 76 mappings in 'requestMappingHandlerMapping'
2026-01-30T22:38:15.038Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Patterns [/webjars/**, /**, /scripts/**, /styles/**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2026-01-30T22:38:15.212Z  INFO 372594 --- [inventory] [           main] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 2 endpoints beneath base path '/actuator'
2026-01-30T22:38:15.273Z DEBUG 372594 --- [inventory] [           main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2026-01-30T22:38:15.354Z DEBUG 372594 --- [inventory] [           main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2026-01-30T22:38:15.394Z DEBUG 372594 --- [inventory] [           main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2026-01-30T22:38:15.542Z  INFO 372594 --- [inventory] [           main] o.s.b.a.h2.H2ConsoleAutoConfiguration    : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:testdb'
2026-01-30T22:38:15.623Z  INFO 372594 --- [inventory] [           main] c.e.inventory.InventoryApplicationTests  : Started InventoryApplicationTests in 4.171 seconds (process running for 4.884)
Mockito is currently self-attaching to enable the inline-mock-maker. This will no longer work in future releases of the JDK. Please add Mockito as an agent to your build as described in Mockito's documentation: https://javadoc.io/doc/org.mockito/mockito-core/latest/org.mockito/org/mockito/Mockito.html#0.3
OpenJDK 64-Bit Server VM warning: Sharing is only supported for boot loader classes because bootstrap classpath has been appended
WARNING: A Java agent has been loaded dynamically (/home/franchu/.m2/repository/net/bytebuddy/byte-buddy-agent/1.17.7/byte-buddy-agent-1.17.7.jar)
WARNING: If a serviceability tool is in use, please run with -XX:+EnableDynamicAgentLoading to hide this warning
WARNING: If a serviceability tool is not in use, please run with -Djdk.instrument.traceUsage for more information
WARNING: Dynamic loading of agents will be disallowed by default in a future release
[INFO] Tests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 4.671 s -- in com.economatom.inventory.InventoryApplicationTests
[INFO] Running com.economatom.inventory.concurrency.ConcurrencyTest
[WARNING] Tests run: 3, Failures: 0, Errors: 0, Skipped: 3, Time elapsed: 0 s -- in com.economatom.inventory.concurrency.ConcurrencyTest
[INFO] Running com.economatom.inventory.controller.AllergenControllerIntegrationTest
2026-01-30T22:38:15.899Z  INFO 372594 --- [inventory] [           main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [com.economatom.inventory.controller.AllergenControllerIntegrationTest]: AllergenControllerIntegrationTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2026-01-30T22:38:15.911Z  INFO 372594 --- [inventory] [           main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration com.economatom.inventory.InventoryApplication for test class com.economatom.inventory.controller.AllergenControllerIntegrationTest
2026-01-30T22:38:15.914Z  INFO 372594 --- [inventory] [           main] o.s.b.d.r.RestartApplicationListener     : Restart disabled due to context in which it is running

  .   ____          _            __ _ _
 /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
 \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
  '  |____| .__|_| |_|_| |_\__, | / / / /
 =========|_|==============|___/=/_/_/_/

 :: Spring Boot ::                (v3.5.6)

2026-01-30T22:38:15.925Z  INFO 372594 --- [inventory] [           main] .e.i.c.AllergenControllerIntegrationTest : Starting AllergenControllerIntegrationTest using Java 21.0.2 with PID 372594 (started by franchu in /home/franchu/Escritorio/turing)
2026-01-30T22:38:15.925Z DEBUG 372594 --- [inventory] [           main] .e.i.c.AllergenControllerIntegrationTest : Running with Spring Boot v3.5.6, Spring v6.2.11
2026-01-30T22:38:15.925Z  INFO 372594 --- [inventory] [           main] .e.i.c.AllergenControllerIntegrationTest : The following 1 profile is active: "test"
2026-01-30T22:38:15.926Z DEBUG 372594 --- [inventory] [           main] o.s.w.c.s.GenericWebApplicationContext   : Refreshing org.springframework.web.context.support.GenericWebApplicationContext@79073adc
2026-01-30T22:38:16.030Z  INFO 372594 --- [inventory] [           main] .s.d.r.c.RepositoryConfigurationDelegate : Multiple Spring Data modules found, entering strict repository configuration mode
2026-01-30T22:38:16.030Z  INFO 372594 --- [inventory] [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2026-01-30T22:38:16.038Z  INFO 372594 --- [inventory] [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 7 ms. Found 10 JPA repository interfaces.
2026-01-30T22:38:16.039Z  INFO 372594 --- [inventory] [           main] .s.d.r.c.RepositoryConfigurationDelegate : Multiple Spring Data modules found, entering strict repository configuration mode
2026-01-30T22:38:16.039Z  INFO 372594 --- [inventory] [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2026-01-30T22:38:16.042Z  INFO 372594 --- [inventory] [           main] .RepositoryConfigurationExtensionSupport : Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.economatom.inventory.repository.AllergenRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2026-01-30T22:38:16.042Z  INFO 372594 --- [inventory] [           main] .RepositoryConfigurationExtensionSupport : Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.economatom.inventory.repository.InventoryAuditRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2026-01-30T22:38:16.042Z  INFO 372594 --- [inventory] [           main] .RepositoryConfigurationExtensionSupport : Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.economatom.inventory.repository.OrderDetailRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2026-01-30T22:38:16.042Z  INFO 372594 --- [inventory] [           main] .RepositoryConfigurationExtensionSupport : Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.economatom.inventory.repository.OrderRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2026-01-30T22:38:16.042Z  INFO 372594 --- [inventory] [           main] .RepositoryConfigurationExtensionSupport : Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.economatom.inventory.repository.ProductRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2026-01-30T22:38:16.042Z  INFO 372594 --- [inventory] [           main] .RepositoryConfigurationExtensionSupport : Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.economatom.inventory.repository.RecipeAllergenRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2026-01-30T22:38:16.042Z  INFO 372594 --- [inventory] [           main] .RepositoryConfigurationExtensionSupport : Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.economatom.inventory.repository.RecipeAuditRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2026-01-30T22:38:16.042Z  INFO 372594 --- [inventory] [           main] .RepositoryConfigurationExtensionSupport : Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.economatom.inventory.repository.RecipeComponentRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2026-01-30T22:38:16.042Z  INFO 372594 --- [inventory] [           main] .RepositoryConfigurationExtensionSupport : Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.economatom.inventory.repository.RecipeRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2026-01-30T22:38:16.042Z  INFO 372594 --- [inventory] [           main] .RepositoryConfigurationExtensionSupport : Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.economatom.inventory.repository.UserRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2026-01-30T22:38:16.042Z  INFO 372594 --- [inventory] [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 2 ms. Found 0 Redis repository interfaces.
2026-01-30T22:38:16.111Z  INFO 372594 --- [inventory] [           main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2026-01-30T22:38:16.112Z  INFO 372594 --- [inventory] [           main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2026-01-30T22:38:16.115Z  INFO 372594 --- [inventory] [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2026-01-30T22:38:16.115Z  INFO 372594 --- [inventory] [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Starting...
2026-01-30T22:38:16.116Z  INFO 372594 --- [inventory] [           main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-2 - Added connection conn1: url=jdbc:h2:mem:testdb user=SA
2026-01-30T22:38:16.116Z  INFO 372594 --- [inventory] [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Start completed.
2026-01-30T22:38:16.117Z  WARN 372594 --- [inventory] [           main] org.hibernate.dialect.Dialect            : HHH000511: The 2.3.232 version for [org.hibernate.dialect.PostgreSQLDialect] is no longer supported, hence certain features may not work properly. The minimum supported version is 12.0.0. Check the community dialects project for available legacy versions.
2026-01-30T22:38:16.117Z  WARN 372594 --- [inventory] [           main] org.hibernate.orm.deprecation            : HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2026-01-30T22:38:16.117Z  INFO 372594 --- [inventory] [           main] org.hibernate.orm.connections.pooling    : HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-2)']
	Database driver: undefined/unknown
	Database version: 2.3.232
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2026-01-30T22:38:16.165Z  INFO 372594 --- [inventory] [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
Hibernate: 
    set client_min_messages = WARNING
Hibernate: 
    alter table if exists inventory_audit 
       drop constraint if exists fk_inventory_audit_product
Hibernate: 
    alter table if exists inventory_audit 
       drop constraint if exists fk_inventory_audit_user
Hibernate: 
    alter table if exists order_detail 
       drop constraint if exists fk_order_detail_order
Hibernate: 
    alter table if exists order_detail 
       drop constraint if exists fk_order_detail_product
Hibernate: 
    alter table if exists order_header 
       drop constraint if exists fk_order_user
Hibernate: 
    alter table if exists recipe_allergen 
       drop constraint if exists FK5ceorq8xo6ht37xq3dmj7xsaa
Hibernate: 
    alter table if exists recipe_allergen 
       drop constraint if exists FKds7dbdp4j946gihsuy4asv2l4
Hibernate: 
    alter table if exists recipe_audit 
       drop constraint if exists fk_recipe_audit_recipe
Hibernate: 
    alter table if exists recipe_audit 
       drop constraint if exists fk_recipe_audit_user
Hibernate: 
    alter table if exists recipe_component 
       drop constraint if exists fk_recipe_component_recipe
Hibernate: 
    alter table if exists recipe_component 
       drop constraint if exists fk_recipe_component_product
Hibernate: 
    drop table if exists allergen cascade
Hibernate: 
    drop table if exists inventory_audit cascade
Hibernate: 
    drop table if exists order_detail cascade
Hibernate: 
    drop table if exists order_header cascade
Hibernate: 
    drop table if exists product cascade
Hibernate: 
    drop table if exists recipe cascade
Hibernate: 
    drop table if exists recipe_allergen cascade
Hibernate: 
    drop table if exists recipe_audit cascade
Hibernate: 
    drop table if exists recipe_component cascade
Hibernate: 
    drop table if exists users cascade
Hibernate: 
    create table allergen (
        allergen_id integer generated by default as identity,
        name varchar(50) not null unique,
        primary key (allergen_id)
    )
Hibernate: 
    create table inventory_audit (
        audit_id integer generated by default as identity,
        product_id integer not null,
        quantity numeric(13,3) not null,
        user_id integer,
        movement_date timestamp(6) not null,
        movement_type varchar(20) not null,
        action_description varchar(500),
        new_state TEXT,
        previous_state TEXT,
        primary key (audit_id)
    )
Hibernate: 
    create table order_detail (
        order_id integer not null,
        product_id integer not null,
        received_quantity numeric(13,3),
        requested_quantity numeric(13,3) not null,
        primary key (order_id, product_id)
    )
Hibernate: 
    create table order_header (
        order_id integer generated by default as identity,
        user_id integer not null,
        order_date timestamp(6) not null,
        version bigint,
        status varchar(20) not null,
        primary key (order_id)
    )
Hibernate: 
    create table product (
        current_stock numeric(13,3) not null,
        product_id integer generated by default as identity,
        unit_price numeric(12,2) not null,
        version bigint,
        unit_of_measure varchar(20) not null,
        product_code varchar(50) not null unique,
        type varchar(50) not null,
        name varchar(100) not null,
        primary key (product_id)
    )
Hibernate: 
    create table recipe (
        recipe_id integer generated by default as identity,
        total_cost numeric(12,2),
        version bigint,
        recipe_name varchar(150) not null,
        presentation TEXT,
        elaboration TEXT,
        primary key (recipe_id)
    )
Hibernate: 
    create table recipe_allergen (
        allergen_id integer not null,
        id integer generated by default as identity,
        recipe_id integer not null,
        primary key (id)
    )
Hibernate: 
    create table recipe_audit (
        audit_id integer generated by default as identity,
        recipe_id integer,
        user_id integer,
        audit_date timestamp(6) not null,
        action varchar(100) not null,
        details TEXT,
        new_state TEXT,
        previous_state TEXT,
        primary key (audit_id)
    )
Hibernate: 
    create table recipe_component (
        id integer generated by default as identity,
        parent_recipe_id integer not null,
        product_id integer not null,
        quantity numeric(13,3) not null,
        primary key (id),
        constraint uk_recipe_component unique (parent_recipe_id, product_id)
    )
Hibernate: 
    create table users (
        user_id integer generated by default as identity,
        role varchar(20) not null,
        email varchar(100) not null unique,
        name varchar(100) not null,
        password varchar(255) not null,
        primary key (user_id)
    )
Hibernate: 
    create index idx_inventory_audit_product 
       on inventory_audit (product_id)
Hibernate: 
    create index idx_inventory_audit_user 
       on inventory_audit (user_id)
Hibernate: 
    create index idx_inventory_audit_date 
       on inventory_audit (movement_date)
Hibernate: 
    create index idx_inventory_audit_type 
       on inventory_audit (movement_type)
Hibernate: 
    create index idx_order_detail_order 
       on order_detail (order_id)
Hibernate: 
    create index idx_order_detail_product 
       on order_detail (product_id)
Hibernate: 
    create index idx_order_status 
       on order_header (status)
Hibernate: 
    create index idx_order_date 
       on order_header (order_date)
Hibernate: 
    create index idx_order_user 
       on order_header (user_id)
Hibernate: 
    create index idx_product_name 
       on product (name)
Hibernate: 
    create index idx_product_type 
       on product (type)
Hibernate: 
    create index idx_recipe_name 
       on recipe (recipe_name)
Hibernate: 
    create index idx_recipe_audit_recipe 
       on recipe_audit (recipe_id)
Hibernate: 
    create index idx_recipe_audit_user 
       on recipe_audit (user_id)
Hibernate: 
    create index idx_recipe_audit_date 
       on recipe_audit (audit_date)
Hibernate: 
    create index idx_recipe_audit_action 
       on recipe_audit (action)
Hibernate: 
    create index idx_recipe_component_recipe 
       on recipe_component (parent_recipe_id)
Hibernate: 
    create index idx_recipe_component_product 
       on recipe_component (product_id)
Hibernate: 
    create index idx_user_role 
       on users (role)
Hibernate: 
    alter table if exists inventory_audit 
       add constraint fk_inventory_audit_product 
       foreign key (product_id) 
       references product
Hibernate: 
    alter table if exists inventory_audit 
       add constraint fk_inventory_audit_user 
       foreign key (user_id) 
       references users
Hibernate: 
    alter table if exists order_detail 
       add constraint fk_order_detail_order 
       foreign key (order_id) 
       references order_header
Hibernate: 
    alter table if exists order_detail 
       add constraint fk_order_detail_product 
       foreign key (product_id) 
       references product
Hibernate: 
    alter table if exists order_header 
       add constraint fk_order_user 
       foreign key (user_id) 
       references users
Hibernate: 
    alter table if exists recipe_allergen 
       add constraint FK5ceorq8xo6ht37xq3dmj7xsaa 
       foreign key (allergen_id) 
       references allergen
Hibernate: 
    alter table if exists recipe_allergen 
       add constraint FKds7dbdp4j946gihsuy4asv2l4 
       foreign key (recipe_id) 
       references recipe
Hibernate: 
    alter table if exists recipe_audit 
       add constraint fk_recipe_audit_recipe FOREIGN KEY (recipe_id) REFERENCES recipe(recipe_id) ON DELETE SET NULL
Hibernate: 
    alter table if exists recipe_audit 
       add constraint fk_recipe_audit_user 
       foreign key (user_id) 
       references users
Hibernate: 
    alter table if exists recipe_component 
       add constraint fk_recipe_component_recipe 
       foreign key (parent_recipe_id) 
       references recipe
Hibernate: 
    alter table if exists recipe_component 
       add constraint fk_recipe_component_product 
       foreign key (product_id) 
       references product
2026-01-30T22:38:16.187Z  INFO 372594 --- [inventory] [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2026-01-30T22:38:16.223Z  INFO 372594 --- [inventory] [           main] r$InitializeUserDetailsManagerConfigurer : Global AuthenticationManager configured with UserDetailsService bean with name customUserDetailsService
2026-01-30T22:38:16.323Z  WARN 372594 --- [inventory] [           main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2026-01-30T22:38:16.328Z  INFO 372594 --- [inventory] [           main] o.s.b.a.w.s.WelcomePageHandlerMapping    : Adding welcome page template: index
2026-01-30T22:38:16.344Z DEBUG 372594 --- [inventory] [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : 76 mappings in 'requestMappingHandlerMapping'
2026-01-30T22:38:16.361Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Patterns [/webjars/**, /**, /scripts/**, /styles/**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2026-01-30T22:38:16.383Z  INFO 372594 --- [inventory] [           main] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 2 endpoints beneath base path '/actuator'
2026-01-30T22:38:16.397Z DEBUG 372594 --- [inventory] [           main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2026-01-30T22:38:16.414Z DEBUG 372594 --- [inventory] [           main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2026-01-30T22:38:16.421Z DEBUG 372594 --- [inventory] [           main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2026-01-30T22:38:16.460Z  INFO 372594 --- [inventory] [           main] o.s.b.a.h2.H2ConsoleAutoConfiguration    : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:testdb'
2026-01-30T22:38:16.488Z DEBUG 372594 --- [inventory] [           main] o.s.w.f.ServerHttpObservationFilter      : Filter 'webMvcObservationFilter' configured for use
2026-01-30T22:38:16.488Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.r.ResourceUrlEncodingFilter      : Filter 'resourceUrlEncodingFilter' configured for use
2026-01-30T22:38:16.488Z DEBUG 372594 --- [inventory] [           main] c.e.inventory.security.JwtFilter         : Filter 'jwtFilter' configured for use
2026-01-30T22:38:16.488Z  INFO 372594 --- [inventory] [           main] o.s.b.t.m.w.SpringBootMockServletContext : Initializing Spring TestDispatcherServlet ''
2026-01-30T22:38:16.488Z  INFO 372594 --- [inventory] [           main] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet ''
2026-01-30T22:38:16.489Z  INFO 372594 --- [inventory] [           main] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 1 ms
2026-01-30T22:38:16.499Z  INFO 372594 --- [inventory] [           main] .e.i.c.AllergenControllerIntegrationTest : Started AllergenControllerIntegrationTest in 0.585 seconds (process running for 5.761)
Hibernate: 
    
SET
    REFERENTIAL_INTEGRITY FALSE
Hibernate: 
    TRUNCATE TABLE allergen RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE product RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE order_header RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE recipe_component RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE recipe RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE inventory_audit RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE recipe_audit RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE order_detail RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE recipe_allergen RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE users RESTART IDENTITY
Hibernate: 
    
SET
    REFERENTIAL_INTEGRITY TRUE
Hibernate: 
    insert 
    into
        users
        (email, name, password, role) 
    values
        (?, ?, ?, ?)
2026-01-30T22:38:16.669Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Securing POST /api/auth/login
2026-01-30T22:38:16.675Z DEBUG 372594 --- [inventory] [           main] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2026-01-30T22:38:16.678Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Secured POST /api/auth/login
2026-01-30T22:38:16.680Z DEBUG 372594 --- [inventory] [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.economatom.inventory.controller.AuthController#authenticateUser(LoginRequestDTO)
2026-01-30T22:38:16.705Z DEBUG 372594 --- [inventory] [           main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [LoginRequestDTO(name=Admin, password=admin123)]
Hibernate: 
    select
        u1_0.user_id,
        u1_0.email,
        u1_0.name,
        u1_0.password,
        u1_0.role 
    from
        users u1_0 
    where
        u1_0.name=?
2026-01-30T22:38:16.850Z DEBUG 372594 --- [inventory] [           main] o.s.s.a.dao.DaoAuthenticationProvider    : Authenticated user
2026-01-30T22:38:16.877Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T22:38:16.877Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [LoginResponseDTO(token=eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJBZG1pbiIsImlhdCI6MTc2OTgxMjY5NiwiZXhwIjoxNzY5 (truncated)...]
2026-01-30T22:38:16.887Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Securing GET /api/allergens
Hibernate: 
    select
        u1_0.user_id,
        u1_0.email,
        u1_0.name,
        u1_0.password,
        u1_0.role 
    from
        users u1_0 
    where
        u1_0.name=?
2026-01-30T22:38:16.900Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Secured GET /api/allergens
2026-01-30T22:38:16.901Z DEBUG 372594 --- [inventory] [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.economatom.inventory.controller.AllergenController#getAll(Pageable)
Hibernate: 
    select
        a1_0.allergen_id,
        a1_0.name 
    from
        allergen a1_0 
    offset
        ? rows 
    fetch
        first ? rows only
2026-01-30T22:38:16.911Z  WARN 372594 --- [inventory] [           main] ration$PageModule$WarningLoggingModifier : Serializing PageImpl instances as-is is not supported, meaning that there is no guarantee about the stability of the resulting JSON structure!
	For a stable JSON structure, please use Spring Data's PagedModel (globally via @EnableSpringDataWebSupport(pageSerializationMode = VIA_DTO))
	or Spring HATEOAS and Spring Data's PagedResourcesAssembler as documented in https://docs.spring.io/spring-data/commons/reference/repositories/core-extensions.html#core.web.pageables.

2026-01-30T22:38:16.914Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T22:38:16.914Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [Page 1 of 0 containing UNKNOWN instances]

MockHttpServletRequest:
      HTTP Method = GET
      Request URI = /api/allergens
       Parameters = {page=[0], size=[10]}
          Headers = [Authorization:"Bearer eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJBZG1pbiIsImlhdCI6MTc2OTgxMjY5NiwiZXhwIjoxNzY5ODEzNDk2fQ.ldBVybdHcRmGSkmw8Dj3LP0IKMrZ6uP92vGJn1YPBX4"]
             Body = null
    Session Attrs = {}

Handler:
             Type = com.economatom.inventory.controller.AllergenController
           Method = com.economatom.inventory.controller.AllergenController#getAll(Pageable)

Async:
    Async started = false
     Async result = null

Resolved Exception:
             Type = null

ModelAndView:
        View name = null
             View = null
            Model = null

FlashMap:
       Attributes = null

MockHttpServletResponse:
           Status = 200
    Error message = null
          Headers = [Vary:"Origin", "Access-Control-Request-Method", "Access-Control-Request-Headers", Content-Type:"application/json", X-Content-Type-Options:"nosniff", X-XSS-Protection:"0", Cache-Control:"no-cache, no-store, max-age=0, must-revalidate", Pragma:"no-cache", Expires:"0", X-Frame-Options:"DENY"]
     Content type = application/json
             Body = {"content":[],"pageable":{"pageNumber":0,"pageSize":10,"sort":{"empty":true,"unsorted":true,"sorted":false},"offset":0,"paged":true,"unpaged":false},"last":true,"totalElements":0,"totalPages":0,"first":true,"size":10,"number":0,"sort":{"empty":true,"unsorted":true,"sorted":false},"numberOfElements":0,"empty":true}
    Forwarded URL = null
   Redirected URL = null
          Cookies = []
Hibernate: 
    
SET
    REFERENTIAL_INTEGRITY FALSE
Hibernate: 
    TRUNCATE TABLE allergen RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE product RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE order_header RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE recipe_component RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE recipe RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE inventory_audit RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE recipe_audit RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE order_detail RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE recipe_allergen RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE users RESTART IDENTITY
Hibernate: 
    
SET
    REFERENTIAL_INTEGRITY TRUE
Hibernate: 
    insert 
    into
        users
        (email, name, password, role) 
    values
        (?, ?, ?, ?)
2026-01-30T22:38:16.995Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Securing POST /api/auth/login
2026-01-30T22:38:16.995Z DEBUG 372594 --- [inventory] [           main] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2026-01-30T22:38:16.995Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Secured POST /api/auth/login
2026-01-30T22:38:16.996Z DEBUG 372594 --- [inventory] [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.economatom.inventory.controller.AuthController#authenticateUser(LoginRequestDTO)
2026-01-30T22:38:16.996Z DEBUG 372594 --- [inventory] [           main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [LoginRequestDTO(name=Admin, password=admin123)]
Hibernate: 
    select
        u1_0.user_id,
        u1_0.email,
        u1_0.name,
        u1_0.password,
        u1_0.role 
    from
        users u1_0 
    where
        u1_0.name=?
2026-01-30T22:38:17.038Z DEBUG 372594 --- [inventory] [           main] o.s.s.a.dao.DaoAuthenticationProvider    : Authenticated user
2026-01-30T22:38:17.039Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T22:38:17.039Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [LoginResponseDTO(token=eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJBZG1pbiIsImlhdCI6MTc2OTgxMjY5NywiZXhwIjoxNzY5 (truncated)...]
2026-01-30T22:38:17.042Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Securing POST /api/allergens
Hibernate: 
    select
        u1_0.user_id,
        u1_0.email,
        u1_0.name,
        u1_0.password,
        u1_0.role 
    from
        users u1_0 
    where
        u1_0.name=?
2026-01-30T22:38:17.046Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Secured POST /api/allergens
2026-01-30T22:38:17.046Z DEBUG 372594 --- [inventory] [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.economatom.inventory.controller.AllergenController#create(AllergenRequestDTO)
2026-01-30T22:38:17.047Z DEBUG 372594 --- [inventory] [           main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [AllergenRequestDTO(name=Huevos)]
Hibernate: 
    insert 
    into
        allergen
        (name) 
    values
        (?)
2026-01-30T22:38:17.053Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T22:38:17.053Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [AllergenResponseDTO(id=1, name=Huevos)]

MockHttpServletRequest:
      HTTP Method = POST
      Request URI = /api/allergens
       Parameters = {}
          Headers = [Content-Type:"application/json;charset=UTF-8", Authorization:"Bearer eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJBZG1pbiIsImlhdCI6MTc2OTgxMjY5NywiZXhwIjoxNzY5ODEzNDk3fQ.tFIDjqP2HPv0-bIz0I3F2bMdoc5YZgqfCi0sdn_QnMI", Content-Length:"17"]
             Body = {"name":"Huevos"}
    Session Attrs = {}

Handler:
             Type = com.economatom.inventory.controller.AllergenController
           Method = com.economatom.inventory.controller.AllergenController#create(AllergenRequestDTO)

Async:
    Async started = false
     Async result = null

Resolved Exception:
             Type = null

ModelAndView:
        View name = null
             View = null
            Model = null

FlashMap:
       Attributes = null

MockHttpServletResponse:
           Status = 201
    Error message = null
          Headers = [Vary:"Origin", "Access-Control-Request-Method", "Access-Control-Request-Headers", Location:"/api/allergens/1", Content-Type:"application/json", X-Content-Type-Options:"nosniff", X-XSS-Protection:"0", Cache-Control:"no-cache, no-store, max-age=0, must-revalidate", Pragma:"no-cache", Expires:"0", X-Frame-Options:"DENY"]
     Content type = application/json
             Body = {"id":1,"name":"Huevos"}
    Forwarded URL = null
   Redirected URL = /api/allergens/1
          Cookies = []
2026-01-30T22:38:17.058Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Securing GET /api/allergens/1
Hibernate: 
    select
        u1_0.user_id,
        u1_0.email,
        u1_0.name,
        u1_0.password,
        u1_0.role 
    from
        users u1_0 
    where
        u1_0.name=?
2026-01-30T22:38:17.062Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Secured GET /api/allergens/1
2026-01-30T22:38:17.062Z DEBUG 372594 --- [inventory] [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.economatom.inventory.controller.AllergenController#getById(Integer)
Hibernate: 
    select
        a1_0.allergen_id,
        a1_0.name 
    from
        allergen a1_0 
    where
        a1_0.allergen_id=?
2026-01-30T22:38:17.068Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T22:38:17.068Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [AllergenResponseDTO(id=1, name=Huevos)]

MockHttpServletRequest:
      HTTP Method = GET
      Request URI = /api/allergens/1
       Parameters = {}
          Headers = [Authorization:"Bearer eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJBZG1pbiIsImlhdCI6MTc2OTgxMjY5NywiZXhwIjoxNzY5ODEzNDk3fQ.tFIDjqP2HPv0-bIz0I3F2bMdoc5YZgqfCi0sdn_QnMI"]
             Body = null
    Session Attrs = {}

Handler:
             Type = com.economatom.inventory.controller.AllergenController
           Method = com.economatom.inventory.controller.AllergenController#getById(Integer)

Async:
    Async started = false
     Async result = null

Resolved Exception:
             Type = null

ModelAndView:
        View name = null
             View = null
            Model = null

FlashMap:
       Attributes = null

MockHttpServletResponse:
           Status = 200
    Error message = null
          Headers = [Vary:"Origin", "Access-Control-Request-Method", "Access-Control-Request-Headers", Content-Type:"application/json", X-Content-Type-Options:"nosniff", X-XSS-Protection:"0", Cache-Control:"no-cache, no-store, max-age=0, must-revalidate", Pragma:"no-cache", Expires:"0", X-Frame-Options:"DENY"]
     Content type = application/json
             Body = {"id":1,"name":"Huevos"}
    Forwarded URL = null
   Redirected URL = null
          Cookies = []
Hibernate: 
    
SET
    REFERENTIAL_INTEGRITY FALSE
Hibernate: 
    TRUNCATE TABLE allergen RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE product RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE order_header RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE recipe_component RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE recipe RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE inventory_audit RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE recipe_audit RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE order_detail RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE recipe_allergen RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE users RESTART IDENTITY
Hibernate: 
    
SET
    REFERENTIAL_INTEGRITY TRUE
Hibernate: 
    insert 
    into
        users
        (email, name, password, role) 
    values
        (?, ?, ?, ?)
2026-01-30T22:38:17.122Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Securing POST /api/auth/login
2026-01-30T22:38:17.123Z DEBUG 372594 --- [inventory] [           main] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2026-01-30T22:38:17.123Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Secured POST /api/auth/login
2026-01-30T22:38:17.123Z DEBUG 372594 --- [inventory] [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.economatom.inventory.controller.AuthController#authenticateUser(LoginRequestDTO)
2026-01-30T22:38:17.124Z DEBUG 372594 --- [inventory] [           main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [LoginRequestDTO(name=Admin, password=admin123)]
Hibernate: 
    select
        u1_0.user_id,
        u1_0.email,
        u1_0.name,
        u1_0.password,
        u1_0.role 
    from
        users u1_0 
    where
        u1_0.name=?
2026-01-30T22:38:17.165Z DEBUG 372594 --- [inventory] [           main] o.s.s.a.dao.DaoAuthenticationProvider    : Authenticated user
2026-01-30T22:38:17.166Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T22:38:17.166Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [LoginResponseDTO(token=eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJBZG1pbiIsImlhdCI6MTc2OTgxMjY5NywiZXhwIjoxNzY5 (truncated)...]
2026-01-30T22:38:17.168Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Securing POST /api/allergens
Hibernate: 
    select
        u1_0.user_id,
        u1_0.email,
        u1_0.name,
        u1_0.password,
        u1_0.role 
    from
        users u1_0 
    where
        u1_0.name=?
2026-01-30T22:38:17.171Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Secured POST /api/allergens
2026-01-30T22:38:17.171Z DEBUG 372594 --- [inventory] [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.economatom.inventory.controller.AllergenController#create(AllergenRequestDTO)
2026-01-30T22:38:17.172Z DEBUG 372594 --- [inventory] [           main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [AllergenRequestDTO(name=Gluten)]
Hibernate: 
    insert 
    into
        allergen
        (name) 
    values
        (?)
2026-01-30T22:38:17.173Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T22:38:17.173Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [AllergenResponseDTO(id=1, name=Gluten)]

MockHttpServletRequest:
      HTTP Method = POST
      Request URI = /api/allergens
       Parameters = {}
          Headers = [Content-Type:"application/json;charset=UTF-8", Authorization:"Bearer eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJBZG1pbiIsImlhdCI6MTc2OTgxMjY5NywiZXhwIjoxNzY5ODEzNDk3fQ.tFIDjqP2HPv0-bIz0I3F2bMdoc5YZgqfCi0sdn_QnMI", Content-Length:"17"]
             Body = {"name":"Gluten"}
    Session Attrs = {}

Handler:
             Type = com.economatom.inventory.controller.AllergenController
           Method = com.economatom.inventory.controller.AllergenController#create(AllergenRequestDTO)

Async:
    Async started = false
     Async result = null

Resolved Exception:
             Type = null

ModelAndView:
        View name = null
             View = null
            Model = null

FlashMap:
       Attributes = null

MockHttpServletResponse:
           Status = 201
    Error message = null
          Headers = [Vary:"Origin", "Access-Control-Request-Method", "Access-Control-Request-Headers", Location:"/api/allergens/1", Content-Type:"application/json", X-Content-Type-Options:"nosniff", X-XSS-Protection:"0", Cache-Control:"no-cache, no-store, max-age=0, must-revalidate", Pragma:"no-cache", Expires:"0", X-Frame-Options:"DENY"]
     Content type = application/json
             Body = {"id":1,"name":"Gluten"}
    Forwarded URL = null
   Redirected URL = /api/allergens/1
          Cookies = []
2026-01-30T22:38:17.175Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Securing PUT /api/allergens/1
Hibernate: 
    select
        u1_0.user_id,
        u1_0.email,
        u1_0.name,
        u1_0.password,
        u1_0.role 
    from
        users u1_0 
    where
        u1_0.name=?
2026-01-30T22:38:17.178Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Secured PUT /api/allergens/1
2026-01-30T22:38:17.178Z DEBUG 372594 --- [inventory] [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.economatom.inventory.controller.AllergenController#update(Integer, AllergenRequestDTO)
2026-01-30T22:38:17.179Z DEBUG 372594 --- [inventory] [           main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [AllergenRequestDTO(name=Gluten Actualizado)]
Hibernate: 
    select
        a1_0.allergen_id,
        a1_0.name 
    from
        allergen a1_0 
    where
        a1_0.allergen_id=?
Hibernate: 
    update
        allergen 
    set
        name=? 
    where
        allergen_id=?
2026-01-30T22:38:17.186Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T22:38:17.186Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [AllergenResponseDTO(id=1, name=Gluten Actualizado)]

MockHttpServletRequest:
      HTTP Method = PUT
      Request URI = /api/allergens/1
       Parameters = {}
          Headers = [Content-Type:"application/json;charset=UTF-8", Authorization:"Bearer eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJBZG1pbiIsImlhdCI6MTc2OTgxMjY5NywiZXhwIjoxNzY5ODEzNDk3fQ.tFIDjqP2HPv0-bIz0I3F2bMdoc5YZgqfCi0sdn_QnMI", Content-Length:"29"]
             Body = {"name":"Gluten Actualizado"}
    Session Attrs = {}

Handler:
             Type = com.economatom.inventory.controller.AllergenController
           Method = com.economatom.inventory.controller.AllergenController#update(Integer, AllergenRequestDTO)

Async:
    Async started = false
     Async result = null

Resolved Exception:
             Type = null

ModelAndView:
        View name = null
             View = null
            Model = null

FlashMap:
       Attributes = null

MockHttpServletResponse:
           Status = 200
    Error message = null
          Headers = [Vary:"Origin", "Access-Control-Request-Method", "Access-Control-Request-Headers", Content-Type:"application/json", X-Content-Type-Options:"nosniff", X-XSS-Protection:"0", Cache-Control:"no-cache, no-store, max-age=0, must-revalidate", Pragma:"no-cache", Expires:"0", X-Frame-Options:"DENY"]
     Content type = application/json
             Body = {"id":1,"name":"Gluten Actualizado"}
    Forwarded URL = null
   Redirected URL = null
          Cookies = []
Hibernate: 
    
SET
    REFERENTIAL_INTEGRITY FALSE
Hibernate: 
    TRUNCATE TABLE allergen RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE product RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE order_header RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE recipe_component RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE recipe RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE inventory_audit RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE recipe_audit RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE order_detail RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE recipe_allergen RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE users RESTART IDENTITY
Hibernate: 
    
SET
    REFERENTIAL_INTEGRITY TRUE
Hibernate: 
    insert 
    into
        users
        (email, name, password, role) 
    values
        (?, ?, ?, ?)
2026-01-30T22:38:17.236Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Securing POST /api/auth/login
2026-01-30T22:38:17.237Z DEBUG 372594 --- [inventory] [           main] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2026-01-30T22:38:17.237Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Secured POST /api/auth/login
2026-01-30T22:38:17.237Z DEBUG 372594 --- [inventory] [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.economatom.inventory.controller.AuthController#authenticateUser(LoginRequestDTO)
2026-01-30T22:38:17.238Z DEBUG 372594 --- [inventory] [           main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [LoginRequestDTO(name=Admin, password=admin123)]
Hibernate: 
    select
        u1_0.user_id,
        u1_0.email,
        u1_0.name,
        u1_0.password,
        u1_0.role 
    from
        users u1_0 
    where
        u1_0.name=?
2026-01-30T22:38:17.279Z DEBUG 372594 --- [inventory] [           main] o.s.s.a.dao.DaoAuthenticationProvider    : Authenticated user
2026-01-30T22:38:17.280Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T22:38:17.280Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [LoginResponseDTO(token=eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJBZG1pbiIsImlhdCI6MTc2OTgxMjY5NywiZXhwIjoxNzY5 (truncated)...]
2026-01-30T22:38:17.281Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Securing POST /api/allergens
Hibernate: 
    select
        u1_0.user_id,
        u1_0.email,
        u1_0.name,
        u1_0.password,
        u1_0.role 
    from
        users u1_0 
    where
        u1_0.name=?
2026-01-30T22:38:17.285Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Secured POST /api/allergens
2026-01-30T22:38:17.285Z DEBUG 372594 --- [inventory] [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.economatom.inventory.controller.AllergenController#create(AllergenRequestDTO)
2026-01-30T22:38:17.285Z DEBUG 372594 --- [inventory] [           main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [AllergenRequestDTO(name=Frutos secos)]
Hibernate: 
    insert 
    into
        allergen
        (name) 
    values
        (?)
2026-01-30T22:38:17.287Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T22:38:17.287Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [AllergenResponseDTO(id=1, name=Frutos secos)]

MockHttpServletRequest:
      HTTP Method = POST
      Request URI = /api/allergens
       Parameters = {}
          Headers = [Content-Type:"application/json;charset=UTF-8", Authorization:"Bearer eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJBZG1pbiIsImlhdCI6MTc2OTgxMjY5NywiZXhwIjoxNzY5ODEzNDk3fQ.tFIDjqP2HPv0-bIz0I3F2bMdoc5YZgqfCi0sdn_QnMI", Content-Length:"23"]
             Body = {"name":"Frutos secos"}
    Session Attrs = {}

Handler:
             Type = com.economatom.inventory.controller.AllergenController
           Method = com.economatom.inventory.controller.AllergenController#create(AllergenRequestDTO)

Async:
    Async started = false
     Async result = null

Resolved Exception:
             Type = null

ModelAndView:
        View name = null
             View = null
            Model = null

FlashMap:
       Attributes = null

MockHttpServletResponse:
           Status = 201
    Error message = null
          Headers = [Vary:"Origin", "Access-Control-Request-Method", "Access-Control-Request-Headers", Location:"/api/allergens/1", Content-Type:"application/json", X-Content-Type-Options:"nosniff", X-XSS-Protection:"0", Cache-Control:"no-cache, no-store, max-age=0, must-revalidate", Pragma:"no-cache", Expires:"0", X-Frame-Options:"DENY"]
     Content type = application/json
             Body = {"id":1,"name":"Frutos secos"}
    Forwarded URL = null
   Redirected URL = /api/allergens/1
          Cookies = []
2026-01-30T22:38:17.289Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Securing DELETE /api/allergens/1
Hibernate: 
    select
        u1_0.user_id,
        u1_0.email,
        u1_0.name,
        u1_0.password,
        u1_0.role 
    from
        users u1_0 
    where
        u1_0.name=?
2026-01-30T22:38:17.293Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Secured DELETE /api/allergens/1
2026-01-30T22:38:17.293Z DEBUG 372594 --- [inventory] [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.economatom.inventory.controller.AllergenController#delete(Integer)
Hibernate: 
    select
        a1_0.allergen_id,
        a1_0.name 
    from
        allergen a1_0 
    where
        a1_0.allergen_id=?
Hibernate: 
    delete 
    from
        allergen 
    where
        allergen_id=?
2026-01-30T22:38:17.300Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/octet-stream', given [*/*] and supported [*/*]

MockHttpServletRequest:
      HTTP Method = DELETE
      Request URI = /api/allergens/1
       Parameters = {}
          Headers = [Authorization:"Bearer eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJBZG1pbiIsImlhdCI6MTc2OTgxMjY5NywiZXhwIjoxNzY5ODEzNDk3fQ.tFIDjqP2HPv0-bIz0I3F2bMdoc5YZgqfCi0sdn_QnMI"]
             Body = null
    Session Attrs = {}

Handler:
             Type = com.economatom.inventory.controller.AllergenController
           Method = com.economatom.inventory.controller.AllergenController#delete(Integer)

Async:
    Async started = false
     Async result = null

Resolved Exception:
             Type = null

ModelAndView:
        View name = null
             View = null
            Model = null

FlashMap:
       Attributes = null

MockHttpServletResponse:
           Status = 204
    Error message = null
          Headers = [Vary:"Origin", "Access-Control-Request-Method", "Access-Control-Request-Headers", X-Content-Type-Options:"nosniff", X-XSS-Protection:"0", Cache-Control:"no-cache, no-store, max-age=0, must-revalidate", Pragma:"no-cache", Expires:"0", X-Frame-Options:"DENY"]
     Content type = null
             Body = 
    Forwarded URL = null
   Redirected URL = null
          Cookies = []
2026-01-30T22:38:17.302Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Securing GET /api/allergens/1
Hibernate: 
    select
        u1_0.user_id,
        u1_0.email,
        u1_0.name,
        u1_0.password,
        u1_0.role 
    from
        users u1_0 
    where
        u1_0.name=?
2026-01-30T22:38:17.305Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Secured GET /api/allergens/1
2026-01-30T22:38:17.306Z DEBUG 372594 --- [inventory] [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.economatom.inventory.controller.AllergenController#getById(Integer)
Hibernate: 
    select
        a1_0.allergen_id,
        a1_0.name 
    from
        allergen a1_0 
    where
        a1_0.allergen_id=?
2026-01-30T22:38:17.307Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T22:38:17.307Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Nothing to write: null body

MockHttpServletRequest:
      HTTP Method = GET
      Request URI = /api/allergens/1
       Parameters = {}
          Headers = [Authorization:"Bearer eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJBZG1pbiIsImlhdCI6MTc2OTgxMjY5NywiZXhwIjoxNzY5ODEzNDk3fQ.tFIDjqP2HPv0-bIz0I3F2bMdoc5YZgqfCi0sdn_QnMI"]
             Body = null
    Session Attrs = {}

Handler:
             Type = com.economatom.inventory.controller.AllergenController
           Method = com.economatom.inventory.controller.AllergenController#getById(Integer)

Async:
    Async started = false
     Async result = null

Resolved Exception:
             Type = null

ModelAndView:
        View name = null
             View = null
            Model = null

FlashMap:
       Attributes = null

MockHttpServletResponse:
           Status = 404
    Error message = null
          Headers = [Vary:"Origin", "Access-Control-Request-Method", "Access-Control-Request-Headers", X-Content-Type-Options:"nosniff", X-XSS-Protection:"0", Cache-Control:"no-cache, no-store, max-age=0, must-revalidate", Pragma:"no-cache", Expires:"0", X-Frame-Options:"DENY"]
     Content type = null
             Body = 
    Forwarded URL = null
   Redirected URL = null
          Cookies = []
Hibernate: 
    
SET
    REFERENTIAL_INTEGRITY FALSE
Hibernate: 
    TRUNCATE TABLE allergen RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE product RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE order_header RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE recipe_component RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE recipe RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE inventory_audit RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE recipe_audit RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE order_detail RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE recipe_allergen RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE users RESTART IDENTITY
Hibernate: 
    
SET
    REFERENTIAL_INTEGRITY TRUE
Hibernate: 
    insert 
    into
        users
        (email, name, password, role) 
    values
        (?, ?, ?, ?)
2026-01-30T22:38:17.356Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Securing POST /api/auth/login
2026-01-30T22:38:17.356Z DEBUG 372594 --- [inventory] [           main] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2026-01-30T22:38:17.356Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Secured POST /api/auth/login
2026-01-30T22:38:17.357Z DEBUG 372594 --- [inventory] [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.economatom.inventory.controller.AuthController#authenticateUser(LoginRequestDTO)
2026-01-30T22:38:17.357Z DEBUG 372594 --- [inventory] [           main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [LoginRequestDTO(name=Admin, password=admin123)]
Hibernate: 
    select
        u1_0.user_id,
        u1_0.email,
        u1_0.name,
        u1_0.password,
        u1_0.role 
    from
        users u1_0 
    where
        u1_0.name=?
2026-01-30T22:38:17.398Z DEBUG 372594 --- [inventory] [           main] o.s.s.a.dao.DaoAuthenticationProvider    : Authenticated user
2026-01-30T22:38:17.399Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T22:38:17.399Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [LoginResponseDTO(token=eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJBZG1pbiIsImlhdCI6MTc2OTgxMjY5NywiZXhwIjoxNzY5 (truncated)...]
2026-01-30T22:38:17.401Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Securing POST /api/allergens
Hibernate: 
    select
        u1_0.user_id,
        u1_0.email,
        u1_0.name,
        u1_0.password,
        u1_0.role 
    from
        users u1_0 
    where
        u1_0.name=?
2026-01-30T22:38:17.404Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Secured POST /api/allergens
2026-01-30T22:38:17.404Z DEBUG 372594 --- [inventory] [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.economatom.inventory.controller.AllergenController#create(AllergenRequestDTO)
2026-01-30T22:38:17.404Z DEBUG 372594 --- [inventory] [           main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [AllergenRequestDTO(name=Frutos secos)]
Hibernate: 
    insert 
    into
        allergen
        (name) 
    values
        (?)
2026-01-30T22:38:17.406Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T22:38:17.406Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [AllergenResponseDTO(id=1, name=Frutos secos)]

MockHttpServletRequest:
      HTTP Method = POST
      Request URI = /api/allergens
       Parameters = {}
          Headers = [Content-Type:"application/json;charset=UTF-8", Authorization:"Bearer eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJBZG1pbiIsImlhdCI6MTc2OTgxMjY5NywiZXhwIjoxNzY5ODEzNDk3fQ.tFIDjqP2HPv0-bIz0I3F2bMdoc5YZgqfCi0sdn_QnMI", Content-Length:"23"]
             Body = {"name":"Frutos secos"}
    Session Attrs = {}

Handler:
             Type = com.economatom.inventory.controller.AllergenController
           Method = com.economatom.inventory.controller.AllergenController#create(AllergenRequestDTO)

Async:
    Async started = false
     Async result = null

Resolved Exception:
             Type = null

ModelAndView:
        View name = null
             View = null
            Model = null

FlashMap:
       Attributes = null

MockHttpServletResponse:
           Status = 201
    Error message = null
          Headers = [Vary:"Origin", "Access-Control-Request-Method", "Access-Control-Request-Headers", Location:"/api/allergens/1", Content-Type:"application/json", X-Content-Type-Options:"nosniff", X-XSS-Protection:"0", Cache-Control:"no-cache, no-store, max-age=0, must-revalidate", Pragma:"no-cache", Expires:"0", X-Frame-Options:"DENY"]
     Content type = application/json
             Body = {"id":1,"name":"Frutos secos"}
    Forwarded URL = null
   Redirected URL = /api/allergens/1
          Cookies = []
[INFO] Tests run: 5, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 1.510 s -- in com.economatom.inventory.controller.AllergenControllerIntegrationTest
[INFO] Running com.economatom.inventory.controller.AuthControllerEdgeCasesTest
2026-01-30T22:38:17.410Z  INFO 372594 --- [inventory] [           main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [com.economatom.inventory.controller.AuthControllerEdgeCasesTest]: AuthControllerEdgeCasesTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2026-01-30T22:38:17.411Z  INFO 372594 --- [inventory] [           main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration com.economatom.inventory.InventoryApplication for test class com.economatom.inventory.controller.AuthControllerEdgeCasesTest
Hibernate: 
    
SET
    REFERENTIAL_INTEGRITY FALSE
Hibernate: 
    TRUNCATE TABLE allergen RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE product RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE order_header RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE recipe_component RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE recipe RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE inventory_audit RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE recipe_audit RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE order_detail RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE recipe_allergen RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE users RESTART IDENTITY
Hibernate: 
    
SET
    REFERENTIAL_INTEGRITY TRUE
Hibernate: 
    insert 
    into
        users
        (email, name, password, role) 
    values
        (?, ?, ?, ?)
2026-01-30T22:38:17.458Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Securing POST /api/auth/login
2026-01-30T22:38:17.459Z DEBUG 372594 --- [inventory] [           main] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2026-01-30T22:38:17.459Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Secured POST /api/auth/login
2026-01-30T22:38:17.459Z DEBUG 372594 --- [inventory] [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.economatom.inventory.controller.AuthController#authenticateUser(LoginRequestDTO)
2026-01-30T22:38:17.460Z DEBUG 372594 --- [inventory] [           main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [LoginRequestDTO(name=, password=password)]
2026-01-30T22:38:17.464Z DEBUG 372594 --- [inventory] [           main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.economatom.inventory.exception.GlobalExceptionHandler#handleValidationExceptions(MethodArgumentNotValidException)
2026-01-30T22:38:17.465Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T22:38:17.465Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{name=El nombre de usuario no puede estar vaco}]
2026-01-30T22:38:17.466Z DEBUG 372594 --- [inventory] [           main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.economatom.inventory.dto.response.LoginResponseDTO> com.economatom.inventory.controller.AuthController.authenticateUser(com.economatom.inventory.dto.request.LoginRequestDTO): [Field error in object 'loginRequestDTO' on field 'name': rejected value []; codes [NotBlank.loginRequestDTO.name,NotBlank.name,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [loginRequestDTO.name,name]; arguments []; default message [name]]; default message [El nombre de usuario no puede estar vaco]] ]
Hibernate: 
    
SET
    REFERENTIAL_INTEGRITY FALSE
Hibernate: 
    TRUNCATE TABLE allergen RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE product RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE order_header RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE recipe_component RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE recipe RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE inventory_audit RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE recipe_audit RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE order_detail RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE recipe_allergen RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE users RESTART IDENTITY
Hibernate: 
    
SET
    REFERENTIAL_INTEGRITY TRUE
Hibernate: 
    insert 
    into
        users
        (email, name, password, role) 
    values
        (?, ?, ?, ?)
2026-01-30T22:38:17.514Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Securing POST /api/auth/login
2026-01-30T22:38:17.515Z DEBUG 372594 --- [inventory] [           main] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2026-01-30T22:38:17.515Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Secured POST /api/auth/login
2026-01-30T22:38:17.515Z DEBUG 372594 --- [inventory] [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.economatom.inventory.controller.AuthController#authenticateUser(LoginRequestDTO)
2026-01-30T22:38:17.515Z DEBUG 372594 --- [inventory] [           main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [LoginRequestDTO(name=Admin, password=admin123)]
Hibernate: 
    select
        u1_0.user_id,
        u1_0.email,
        u1_0.name,
        u1_0.password,
        u1_0.role 
    from
        users u1_0 
    where
        u1_0.name=?
2026-01-30T22:38:17.557Z DEBUG 372594 --- [inventory] [           main] o.s.s.a.dao.DaoAuthenticationProvider    : Authenticated user
2026-01-30T22:38:17.558Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T22:38:17.558Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [LoginResponseDTO(token=eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJBZG1pbiIsImlhdCI6MTc2OTgxMjY5NywiZXhwIjoxNzY5 (truncated)...]
2026-01-30T22:38:17.559Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Securing POST /api/auth/login
2026-01-30T22:38:17.559Z DEBUG 372594 --- [inventory] [           main] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2026-01-30T22:38:17.560Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Secured POST /api/auth/login
2026-01-30T22:38:17.560Z DEBUG 372594 --- [inventory] [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.economatom.inventory.controller.AuthController#authenticateUser(LoginRequestDTO)
2026-01-30T22:38:17.560Z DEBUG 372594 --- [inventory] [           main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [LoginRequestDTO(name=Admin, password=admin123)]
Hibernate: 
    select
        u1_0.user_id,
        u1_0.email,
        u1_0.name,
        u1_0.password,
        u1_0.role 
    from
        users u1_0 
    where
        u1_0.name=?
2026-01-30T22:38:17.602Z DEBUG 372594 --- [inventory] [           main] o.s.s.a.dao.DaoAuthenticationProvider    : Authenticated user
2026-01-30T22:38:17.602Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T22:38:17.602Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [LoginResponseDTO(token=eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJBZG1pbiIsImlhdCI6MTc2OTgxMjY5NywiZXhwIjoxNzY5 (truncated)...]
Hibernate: 
    
SET
    REFERENTIAL_INTEGRITY FALSE
Hibernate: 
    TRUNCATE TABLE allergen RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE product RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE order_header RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE recipe_component RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE recipe RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE inventory_audit RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE recipe_audit RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE order_detail RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE recipe_allergen RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE users RESTART IDENTITY
Hibernate: 
    
SET
    REFERENTIAL_INTEGRITY TRUE
Hibernate: 
    insert 
    into
        users
        (email, name, password, role) 
    values
        (?, ?, ?, ?)
2026-01-30T22:38:17.653Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Securing POST /api/auth/login
2026-01-30T22:38:17.653Z DEBUG 372594 --- [inventory] [           main] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2026-01-30T22:38:17.653Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Secured POST /api/auth/login
2026-01-30T22:38:17.653Z DEBUG 372594 --- [inventory] [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.economatom.inventory.controller.AuthController#authenticateUser(LoginRequestDTO)
2026-01-30T22:38:17.654Z DEBUG 372594 --- [inventory] [           main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [LoginRequestDTO(name=Admin, password=admin123)]
Hibernate: 
    select
        u1_0.user_id,
        u1_0.email,
        u1_0.name,
        u1_0.password,
        u1_0.role 
    from
        users u1_0 
    where
        u1_0.name=?
2026-01-30T22:38:17.695Z DEBUG 372594 --- [inventory] [           main] o.s.s.a.dao.DaoAuthenticationProvider    : Authenticated user
2026-01-30T22:38:17.696Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T22:38:17.696Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [LoginResponseDTO(token=eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJBZG1pbiIsImlhdCI6MTc2OTgxMjY5NywiZXhwIjoxNzY5 (truncated)...]

MockHttpServletRequest:
      HTTP Method = POST
      Request URI = /api/auth/login
       Parameters = {}
          Headers = [Content-Type:"application/json;charset=UTF-8", Content-Length:"38"]
             Body = {"name":"Admin","password":"admin123"}
    Session Attrs = {}

Handler:
             Type = com.economatom.inventory.controller.AuthController
           Method = com.economatom.inventory.controller.AuthController#authenticateUser(LoginRequestDTO)

Async:
    Async started = false
     Async result = null

Resolved Exception:
             Type = null

ModelAndView:
        View name = null
             View = null
            Model = null

FlashMap:
       Attributes = null

MockHttpServletResponse:
           Status = 200
    Error message = null
          Headers = [Vary:"Origin", "Access-Control-Request-Method", "Access-Control-Request-Headers", Content-Type:"application/json", X-Content-Type-Options:"nosniff", X-XSS-Protection:"0", Cache-Control:"no-cache, no-store, max-age=0, must-revalidate", Pragma:"no-cache", Expires:"0", X-Frame-Options:"DENY"]
     Content type = application/json
             Body = {"token":"eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJBZG1pbiIsImlhdCI6MTc2OTgxMjY5NywiZXhwIjoxNzY5ODEzNDk3fQ.tFIDjqP2HPv0-bIz0I3F2bMdoc5YZgqfCi0sdn_QnMI"}
    Forwarded URL = null
   Redirected URL = null
          Cookies = []
Hibernate: 
    
SET
    REFERENTIAL_INTEGRITY FALSE
Hibernate: 
    TRUNCATE TABLE allergen RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE product RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE order_header RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE recipe_component RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE recipe RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE inventory_audit RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE recipe_audit RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE order_detail RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE recipe_allergen RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE users RESTART IDENTITY
Hibernate: 
    
SET
    REFERENTIAL_INTEGRITY TRUE
Hibernate: 
    insert 
    into
        users
        (email, name, password, role) 
    values
        (?, ?, ?, ?)
2026-01-30T22:38:17.749Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Securing POST /api/auth/login
2026-01-30T22:38:17.749Z DEBUG 372594 --- [inventory] [           main] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2026-01-30T22:38:17.749Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Secured POST /api/auth/login
2026-01-30T22:38:17.749Z DEBUG 372594 --- [inventory] [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.economatom.inventory.controller.AuthController#authenticateUser(LoginRequestDTO)
2026-01-30T22:38:17.750Z DEBUG 372594 --- [inventory] [           main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [LoginRequestDTO(name=admin, password=admin123)]
Hibernate: 
    select
        u1_0.user_id,
        u1_0.email,
        u1_0.name,
        u1_0.password,
        u1_0.role 
    from
        users u1_0 
    where
        u1_0.name=?
2026-01-30T22:38:17.791Z DEBUG 372594 --- [inventory] [           main] o.s.s.a.dao.DaoAuthenticationProvider    : Failed to find user 'admin'
2026-01-30T22:38:17.792Z DEBUG 372594 --- [inventory] [           main] o.s.s.authentication.ProviderManager     : Authentication failed with provider DaoAuthenticationProvider since Bad credentials
2026-01-30T22:38:17.793Z DEBUG 372594 --- [inventory] [           main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.economatom.inventory.exception.GlobalExceptionHandler#handleBadCredentials(BadCredentialsException)
2026-01-30T22:38:17.795Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T22:38:17.795Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{status=401, timestamp=2026-01-30T22:38:17.793340839Z, message=Usuario o contrasea incorrectos}]
2026-01-30T22:38:17.795Z DEBUG 372594 --- [inventory] [           main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.security.authentication.BadCredentialsException: Bad credentials]
Hibernate: 
    
SET
    REFERENTIAL_INTEGRITY FALSE
Hibernate: 
    TRUNCATE TABLE allergen RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE product RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE order_header RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE recipe_component RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE recipe RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE inventory_audit RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE recipe_audit RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE order_detail RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE recipe_allergen RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE users RESTART IDENTITY
Hibernate: 
    
SET
    REFERENTIAL_INTEGRITY TRUE
Hibernate: 
    insert 
    into
        users
        (email, name, password, role) 
    values
        (?, ?, ?, ?)
2026-01-30T22:38:17.847Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Securing POST /api/auth/login
2026-01-30T22:38:17.848Z DEBUG 372594 --- [inventory] [           main] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2026-01-30T22:38:17.848Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Secured POST /api/auth/login
2026-01-30T22:38:17.848Z DEBUG 372594 --- [inventory] [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.economatom.inventory.controller.AuthController#authenticateUser(LoginRequestDTO)
2026-01-30T22:38:17.849Z DEBUG 372594 --- [inventory] [           main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [LoginRequestDTO(name=NonExistent, password=password)]
Hibernate: 
    select
        u1_0.user_id,
        u1_0.email,
        u1_0.name,
        u1_0.password,
        u1_0.role 
    from
        users u1_0 
    where
        u1_0.name=?
2026-01-30T22:38:17.894Z DEBUG 372594 --- [inventory] [           main] o.s.s.a.dao.DaoAuthenticationProvider    : Failed to find user 'NonExistent'
2026-01-30T22:38:17.894Z DEBUG 372594 --- [inventory] [           main] o.s.s.authentication.ProviderManager     : Authentication failed with provider DaoAuthenticationProvider since Bad credentials
2026-01-30T22:38:17.895Z DEBUG 372594 --- [inventory] [           main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.economatom.inventory.exception.GlobalExceptionHandler#handleBadCredentials(BadCredentialsException)
2026-01-30T22:38:17.895Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T22:38:17.895Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{status=401, timestamp=2026-01-30T22:38:17.895366687Z, message=Usuario o contrasea incorrectos}]
2026-01-30T22:38:17.895Z DEBUG 372594 --- [inventory] [           main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.security.authentication.BadCredentialsException: Bad credentials]
Hibernate: 
    
SET
    REFERENTIAL_INTEGRITY FALSE
Hibernate: 
    TRUNCATE TABLE allergen RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE product RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE order_header RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE recipe_component RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE recipe RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE inventory_audit RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE recipe_audit RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE order_detail RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE recipe_allergen RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE users RESTART IDENTITY
Hibernate: 
    
SET
    REFERENTIAL_INTEGRITY TRUE
Hibernate: 
    insert 
    into
        users
        (email, name, password, role) 
    values
        (?, ?, ?, ?)
2026-01-30T22:38:17.945Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Securing POST /api/auth/login
2026-01-30T22:38:17.945Z DEBUG 372594 --- [inventory] [           main] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2026-01-30T22:38:17.946Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Secured POST /api/auth/login
2026-01-30T22:38:17.946Z DEBUG 372594 --- [inventory] [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.economatom.inventory.controller.AuthController#authenticateUser(LoginRequestDTO)
2026-01-30T22:38:17.946Z DEBUG 372594 --- [inventory] [           main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [LoginRequestDTO(name=Admin, password=)]
2026-01-30T22:38:17.947Z DEBUG 372594 --- [inventory] [           main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.economatom.inventory.exception.GlobalExceptionHandler#handleValidationExceptions(MethodArgumentNotValidException)
2026-01-30T22:38:17.947Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T22:38:17.947Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{password=La contrasea no puede estar vaca}]
2026-01-30T22:38:17.947Z DEBUG 372594 --- [inventory] [           main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.economatom.inventory.dto.response.LoginResponseDTO> com.economatom.inventory.controller.AuthController.authenticateUser(com.economatom.inventory.dto.request.LoginRequestDTO): [Field error in object 'loginRequestDTO' on field 'password': rejected value []; codes [NotBlank.loginRequestDTO.password,NotBlank.password,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [loginRequestDTO.password,password]; arguments []; default message [password]]; default message [La contrasea no puede estar vaca]] ]
Hibernate: 
    
SET
    REFERENTIAL_INTEGRITY FALSE
Hibernate: 
    TRUNCATE TABLE allergen RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE product RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE order_header RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE recipe_component RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE recipe RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE inventory_audit RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE recipe_audit RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE order_detail RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE recipe_allergen RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE users RESTART IDENTITY
Hibernate: 
    
SET
    REFERENTIAL_INTEGRITY TRUE
Hibernate: 
    insert 
    into
        users
        (email, name, password, role) 
    values
        (?, ?, ?, ?)
2026-01-30T22:38:17.998Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Securing POST /api/auth/login
2026-01-30T22:38:17.998Z DEBUG 372594 --- [inventory] [           main] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2026-01-30T22:38:17.999Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Secured POST /api/auth/login
2026-01-30T22:38:17.999Z DEBUG 372594 --- [inventory] [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.economatom.inventory.controller.AuthController#authenticateUser(LoginRequestDTO)
2026-01-30T22:38:18.000Z DEBUG 372594 --- [inventory] [           main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [LoginRequestDTO(name=null, password=null)]
2026-01-30T22:38:18.001Z DEBUG 372594 --- [inventory] [           main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.economatom.inventory.exception.GlobalExceptionHandler#handleValidationExceptions(MethodArgumentNotValidException)
2026-01-30T22:38:18.001Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T22:38:18.001Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{password=La contrasea no puede estar vaca, name=El nombre de usuario no puede estar vaco}]
2026-01-30T22:38:18.001Z DEBUG 372594 --- [inventory] [           main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.economatom.inventory.dto.response.LoginResponseDTO> com.economatom.inventory.controller.AuthController.authenticateUser(com.economatom.inventory.dto.request.LoginRequestDTO) with 2 errors: [Field error in object 'loginRequestDTO' on field 'name': rejected value [null]; codes [NotBlank.loginRequestDTO.name,NotBlank.name,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [loginRequestDTO.name,name]; arguments []; default message [name]]; default message [El nombre de usuario no puede estar vaco]] [Field error in object 'loginRequestDTO' on field 'password': rejected value [null]; codes [NotBlank.loginRequestDTO.password,NotBlank.password,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [loginRequestDTO.password,password]; arguments []; default message [password]]; default message [La contrasea no puede estar vaca]] ]
Hibernate: 
    
SET
    REFERENTIAL_INTEGRITY FALSE
Hibernate: 
    TRUNCATE TABLE allergen RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE product RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE order_header RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE recipe_component RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE recipe RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE inventory_audit RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE recipe_audit RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE order_detail RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE recipe_allergen RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE users RESTART IDENTITY
Hibernate: 
    
SET
    REFERENTIAL_INTEGRITY TRUE
Hibernate: 
    insert 
    into
        users
        (email, name, password, role) 
    values
        (?, ?, ?, ?)
2026-01-30T22:38:18.049Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Securing POST /api/auth/login
2026-01-30T22:38:18.050Z DEBUG 372594 --- [inventory] [           main] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2026-01-30T22:38:18.050Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Secured POST /api/auth/login
2026-01-30T22:38:18.050Z DEBUG 372594 --- [inventory] [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.economatom.inventory.controller.AuthController#authenticateUser(LoginRequestDTO)
2026-01-30T22:38:18.051Z DEBUG 372594 --- [inventory] [           main] o.s.web.method.HandlerMethod             : Could not resolve parameter [0] in public org.springframework.http.ResponseEntity<com.economatom.inventory.dto.response.LoginResponseDTO> com.economatom.inventory.controller.AuthController.authenticateUser(com.economatom.inventory.dto.request.LoginRequestDTO): Content-Type 'application/octet-stream' is not supported
2026-01-30T22:38:18.051Z DEBUG 372594 --- [inventory] [           main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.economatom.inventory.exception.GlobalExceptionHandler#handleGeneralException(Exception)
2026-01-30T22:38:18.051Z ERROR 372594 --- [inventory] [           main] c.e.i.exception.GlobalExceptionHandler   : Error no controlado

org.springframework.web.HttpMediaTypeNotSupportedException: Content-Type 'application/octet-stream' is not supported
	at org.springframework.web.servlet.mvc.method.annotation.AbstractMessageConverterMethodArgumentResolver.readWithMessageConverters(AbstractMessageConverterMethodArgumentResolver.java:236) ~[spring-webmvc-6.2.11.jar:6.2.11]
	at org.springframework.web.servlet.mvc.method.annotation.RequestResponseBodyMethodProcessor.readWithMessageConverters(RequestResponseBodyMethodProcessor.java:176) ~[spring-webmvc-6.2.11.jar:6.2.11]
	at org.springframework.web.servlet.mvc.method.annotation.RequestResponseBodyMethodProcessor.resolveArgument(RequestResponseBodyMethodProcessor.java:150) ~[spring-webmvc-6.2.11.jar:6.2.11]
	at org.springframework.web.method.support.HandlerMethodArgumentResolverComposite.resolveArgument(HandlerMethodArgumentResolverComposite.java:122) ~[spring-web-6.2.11.jar:6.2.11]
	at org.springframework.web.method.support.InvocableHandlerMethod.getMethodArgumentValues(InvocableHandlerMethod.java:227) ~[spring-web-6.2.11.jar:6.2.11]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:181) ~[spring-web-6.2.11.jar:6.2.11]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.11.jar:6.2.11]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991) ~[spring-webmvc-6.2.11.jar:6.2.11]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896) ~[spring-webmvc-6.2.11.jar:6.2.11]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.11.jar:6.2.11]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.11.jar:6.2.11]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.11.jar:6.2.11]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.11.jar:6.2.11]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.2.11.jar:6.2.11]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.46.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.11.jar:6.2.11]
	at org.springframework.test.web.servlet.TestDispatcherServlet.service(TestDispatcherServlet.java:72) ~[spring-test-6.2.11.jar:6.2.11]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.46.jar:6.0]
	at org.springframework.mock.web.MockFilterChain$ServletFilterProxy.doFilter(MockFilterChain.java:165) ~[spring-test-6.2.11.jar:6.2.11]
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:132) ~[spring-test-6.2.11.jar:6.2.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110) ~[spring-web-6.2.11.jar:6.2.11]
	at org.springframework.test.web.servlet.setup.MockMvcFilterDecorator.doFilter(MockMvcFilterDecorator.java:162) ~[spring-test-6.2.11.jar:6.2.11]
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:132) ~[spring-test-6.2.11.jar:6.2.11]
	at org.springframework.web.servlet.resource.ResourceUrlEncodingFilter.doFilter(ResourceUrlEncodingFilter.java:66) ~[spring-webmvc-6.2.11.jar:6.2.11]
	at org.springframework.test.web.servlet.setup.MockMvcFilterDecorator.doFilter(MockMvcFilterDecorator.java:162) ~[spring-test-6.2.11.jar:6.2.11]
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:132) ~[spring-test-6.2.11.jar:6.2.11]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108) ~[spring-web-6.2.11.jar:6.2.11]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108) ~[spring-web-6.2.11.jar:6.2.11]
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231) ~[spring-security-web-6.5.5.jar:6.5.5]
	at org.springframework.security.web.ObservationFilterChainDecorator$FilterObservation$SimpleFilterObservation.lambda$wrap$1(ObservationFilterChainDecorator.java:490) ~[spring-security-web-6.5.5.jar:6.5.5]
	at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$1(ObservationFilterChainDecorator.java:351) ~[spring-security-web-6.5.5.jar:6.5.5]
	at org.springframework.security.web.ObservationFilterChainDecorator.lambda$wrapSecured$0(ObservationFilterChainDecorator.java:83) ~[spring-security-web-6.5.5.jar:6.5.5]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:129) ~[spring-security-web-6.5.5.jar:6.5.5]
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101) ~[spring-security-web-6.5.5.jar:6.5.5]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:241) ~[spring-security-web-6.5.5.jar:6.5.5]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:228) ~[spring-security-web-6.5.5.jar:6.5.5]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:138) ~[spring-security-web-6.5.5.jar:6.5.5]
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:125) ~[spring-security-web-6.5.5.jar:6.5.5]
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:119) ~[spring-security-web-6.5.5.jar:6.5.5]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:241) ~[spring-security-web-6.5.5.jar:6.5.5]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:228) ~[spring-security-web-6.5.5.jar:6.5.5]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:138) ~[spring-security-web-6.5.5.jar:6.5.5]
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131) ~[spring-security-web-6.5.5.jar:6.5.5]
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85) ~[spring-security-web-6.5.5.jar:6.5.5]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:241) ~[spring-security-web-6.5.5.jar:6.5.5]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:228) ~[spring-security-web-6.5.5.jar:6.5.5]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:138) ~[spring-security-web-6.5.5.jar:6.5.5]
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100) ~[spring-security-web-6.5.5.jar:6.5.5]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:241) ~[spring-security-web-6.5.5.jar:6.5.5]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:228) ~[spring-security-web-6.5.5.jar:6.5.5]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:138) ~[spring-security-web-6.5.5.jar:6.5.5]
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179) ~[spring-security-web-6.5.5.jar:6.5.5]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:241) ~[spring-security-web-6.5.5.jar:6.5.5]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:228) ~[spring-security-web-6.5.5.jar:6.5.5]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:138) ~[spring-security-web-6.5.5.jar:6.5.5]
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63) ~[spring-security-web-6.5.5.jar:6.5.5]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:241) ~[spring-security-web-6.5.5.jar:6.5.5]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:228) ~[spring-security-web-6.5.5.jar:6.5.5]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:138) ~[spring-security-web-6.5.5.jar:6.5.5]
	at com.economatom.inventory.security.JwtFilter.doFilterInternal(JwtFilter.java:44) ~[classes/:na]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.11.jar:6.2.11]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:241) ~[spring-security-web-6.5.5.jar:6.5.5]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:228) ~[spring-security-web-6.5.5.jar:6.5.5]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:138) ~[spring-security-web-6.5.5.jar:6.5.5]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107) ~[spring-security-web-6.5.5.jar:6.5.5]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93) ~[spring-security-web-6.5.5.jar:6.5.5]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:241) ~[spring-security-web-6.5.5.jar:6.5.5]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:228) ~[spring-security-web-6.5.5.jar:6.5.5]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:138) ~[spring-security-web-6.5.5.jar:6.5.5]
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91) ~[spring-web-6.2.11.jar:6.2.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.11.jar:6.2.11]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:241) ~[spring-security-web-6.5.5.jar:6.5.5]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:228) ~[spring-security-web-6.5.5.jar:6.5.5]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:138) ~[spring-security-web-6.5.5.jar:6.5.5]
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90) ~[spring-security-web-6.5.5.jar:6.5.5]
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75) ~[spring-security-web-6.5.5.jar:6.5.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.11.jar:6.2.11]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:241) ~[spring-security-web-6.5.5.jar:6.5.5]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:228) ~[spring-security-web-6.5.5.jar:6.5.5]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:138) ~[spring-security-web-6.5.5.jar:6.5.5]
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82) ~[spring-security-web-6.5.5.jar:6.5.5]
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69) ~[spring-security-web-6.5.5.jar:6.5.5]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:241) ~[spring-security-web-6.5.5.jar:6.5.5]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:228) ~[spring-security-web-6.5.5.jar:6.5.5]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:138) ~[spring-security-web-6.5.5.jar:6.5.5]
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62) ~[spring-security-web-6.5.5.jar:6.5.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.11.jar:6.2.11]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:241) ~[spring-security-web-6.5.5.jar:6.5.5]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:228) ~[spring-security-web-6.5.5.jar:6.5.5]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:138) ~[spring-security-web-6.5.5.jar:6.5.5]
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42) ~[spring-security-web-6.5.5.jar:6.5.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.11.jar:6.2.11]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:241) ~[spring-security-web-6.5.5.jar:6.5.5]
	at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$0(ObservationFilterChainDecorator.java:334) ~[spring-security-web-6.5.5.jar:6.5.5]
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:225) ~[spring-security-web-6.5.5.jar:6.5.5]
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:138) ~[spring-security-web-6.5.5.jar:6.5.5]
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233) ~[spring-security-web-6.5.5.jar:6.5.5]
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191) ~[spring-security-web-6.5.5.jar:6.5.5]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113) ~[spring-web-6.2.11.jar:6.2.11]
	at org.springframework.web.filter.ServletRequestPathFilter.doFilter(ServletRequestPathFilter.java:52) ~[spring-web-6.2.11.jar:6.2.11]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113) ~[spring-web-6.2.11.jar:6.2.11]
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74) ~[spring-web-6.2.11.jar:6.2.11]
	at org.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebSecurityConfiguration.java:319) ~[spring-security-config-6.5.5.jar:6.5.5]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113) ~[spring-web-6.2.11.jar:6.2.11]
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$4(HandlerMappingIntrospector.java:267) ~[spring-webmvc-6.2.11.jar:6.2.11]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113) ~[spring-web-6.2.11.jar:6.2.11]
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74) ~[spring-web-6.2.11.jar:6.2.11]
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:240) ~[spring-security-config-6.5.5.jar:6.5.5]
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362) ~[spring-web-6.2.11.jar:6.2.11]
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278) ~[spring-web-6.2.11.jar:6.2.11]
	at org.springframework.test.web.servlet.setup.MockMvcFilterDecorator.doFilter(MockMvcFilterDecorator.java:162) ~[spring-test-6.2.11.jar:6.2.11]
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:132) ~[spring-test-6.2.11.jar:6.2.11]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.11.jar:6.2.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.11.jar:6.2.11]
	at org.springframework.test.web.servlet.setup.MockMvcFilterDecorator.doFilter(MockMvcFilterDecorator.java:162) ~[spring-test-6.2.11.jar:6.2.11]
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:132) ~[spring-test-6.2.11.jar:6.2.11]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.11.jar:6.2.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.11.jar:6.2.11]
	at org.springframework.test.web.servlet.setup.MockMvcFilterDecorator.doFilter(MockMvcFilterDecorator.java:162) ~[spring-test-6.2.11.jar:6.2.11]
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:132) ~[spring-test-6.2.11.jar:6.2.11]
	at org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:110) ~[spring-web-6.2.11.jar:6.2.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.11.jar:6.2.11]
	at org.springframework.test.web.servlet.setup.MockMvcFilterDecorator.doFilter(MockMvcFilterDecorator.java:162) ~[spring-test-6.2.11.jar:6.2.11]
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:132) ~[spring-test-6.2.11.jar:6.2.11]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.11.jar:6.2.11]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.11.jar:6.2.11]
	at org.springframework.test.web.servlet.setup.MockMvcFilterDecorator.doFilter(MockMvcFilterDecorator.java:162) ~[spring-test-6.2.11.jar:6.2.11]
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:132) ~[spring-test-6.2.11.jar:6.2.11]
	at org.springframework.test.web.servlet.MockMvc.perform(MockMvc.java:201) ~[spring-test-6.2.11.jar:6.2.11]
	at com.economatom.inventory.controller.AuthControllerEdgeCasesTest.login_WithoutContentType_ShouldReturnUnsupportedMediaType(AuthControllerEdgeCasesTest.java:152) ~[test-classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:775) ~[junit-platform-commons-1.12.2.jar:1.12.2]
	at org.junit.platform.commons.support.ReflectionSupport.invokeMethod(ReflectionSupport.java:479) ~[junit-platform-commons-1.12.2.jar:1.12.2]
	at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60) ~[junit-jupiter-engine-5.12.2.jar:5.12.2]
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131) ~[junit-jupiter-engine-5.12.2.jar:5.12.2]
	at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:161) ~[junit-jupiter-engine-5.12.2.jar:5.12.2]
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:152) ~[junit-jupiter-engine-5.12.2.jar:5.12.2]
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:91) ~[junit-jupiter-engine-5.12.2.jar:5.12.2]
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(InterceptingExecutableInvoker.java:112) ~[junit-jupiter-engine-5.12.2.jar:5.12.2]
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.lambda$invoke$0(InterceptingExecutableInvoker.java:94) ~[junit-jupiter-engine-5.12.2.jar:5.12.2]
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106) ~[junit-jupiter-engine-5.12.2.jar:5.12.2]
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64) ~[junit-jupiter-engine-5.12.2.jar:5.12.2]
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45) ~[junit-jupiter-engine-5.12.2.jar:5.12.2]
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37) ~[junit-jupiter-engine-5.12.2.jar:5.12.2]
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:93) ~[junit-jupiter-engine-5.12.2.jar:5.12.2]
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:87) ~[junit-jupiter-engine-5.12.2.jar:5.12.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:216) ~[junit-jupiter-engine-5.12.2.jar:5.12.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:212) ~[junit-jupiter-engine-5.12.2.jar:5.12.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:137) ~[junit-jupiter-engine-5.12.2.jar:5.12.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:69) ~[junit-jupiter-engine-5.12.2.jar:5.12.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:156) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:201) ~[junit-platform-launcher-1.12.2.jar:1.12.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:170) ~[junit-platform-launcher-1.12.2.jar:1.12.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:94) ~[junit-platform-launcher-1.12.2.jar:1.12.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:59) ~[junit-platform-launcher-1.12.2.jar:1.12.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:142) ~[junit-platform-launcher-1.12.2.jar:1.12.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:58) ~[junit-platform-launcher-1.12.2.jar:1.12.2]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103) ~[junit-platform-launcher-1.12.2.jar:1.12.2]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85) ~[junit-platform-launcher-1.12.2.jar:1.12.2]
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47) ~[junit-platform-launcher-1.12.2.jar:1.12.2]
	at org.junit.platform.launcher.core.InterceptingLauncher.lambda$execute$1(InterceptingLauncher.java:39) ~[junit-platform-launcher-1.12.2.jar:1.12.2]
	at org.junit.platform.launcher.core.ClasspathAlignmentCheckingLauncherInterceptor.intercept(ClasspathAlignmentCheckingLauncherInterceptor.java:25) ~[junit-platform-launcher-1.12.2.jar:1.12.2]
	at org.junit.platform.launcher.core.InterceptingLauncher.execute(InterceptingLauncher.java:38) ~[junit-platform-launcher-1.12.2.jar:1.12.2]
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47) ~[junit-platform-launcher-1.12.2.jar:1.12.2]
	at org.apache.maven.surefire.junitplatform.LauncherAdapter.executeWithoutCancellationToken(LauncherAdapter.java:60) ~[surefire-junit-platform-3.5.4.jar:3.5.4]
	at org.apache.maven.surefire.junitplatform.LauncherAdapter.execute(LauncherAdapter.java:52) ~[surefire-junit-platform-3.5.4.jar:3.5.4]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:203) ~[surefire-junit-platform-3.5.4.jar:3.5.4]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:168) ~[surefire-junit-platform-3.5.4.jar:3.5.4]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:136) ~[surefire-junit-platform-3.5.4.jar:3.5.4]
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385) ~[surefire-booter-3.5.4.jar:3.5.4]
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162) ~[surefire-booter-3.5.4.jar:3.5.4]
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507) ~[surefire-booter-3.5.4.jar:3.5.4]
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495) ~[surefire-booter-3.5.4.jar:3.5.4]

2026-01-30T22:38:18.057Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T22:38:18.058Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(status=500, message=Se ha producido un error interno. Por favor, intntelo de nuevo m (truncated)...]
2026-01-30T22:38:18.058Z DEBUG 372594 --- [inventory] [           main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.HttpMediaTypeNotSupportedException: Content-Type 'application/octet-stream' is not supported]

MockHttpServletRequest:
      HTTP Method = POST
      Request URI = /api/auth/login
       Parameters = {}
          Headers = [Content-Length:"38"]
             Body = {"name":"Admin","password":"admin123"}
    Session Attrs = {}

Handler:
             Type = com.economatom.inventory.controller.AuthController
           Method = com.economatom.inventory.controller.AuthController#authenticateUser(LoginRequestDTO)

Async:
    Async started = false
     Async result = null

Resolved Exception:
             Type = org.springframework.web.HttpMediaTypeNotSupportedException

ModelAndView:
        View name = null
             View = null
            Model = null

FlashMap:
       Attributes = null

MockHttpServletResponse:
           Status = 500
    Error message = null
          Headers = [Vary:"Origin", "Access-Control-Request-Method", "Access-Control-Request-Headers", Content-Type:"application/json", X-Content-Type-Options:"nosniff", X-XSS-Protection:"0", Cache-Control:"no-cache, no-store, max-age=0, must-revalidate", Pragma:"no-cache", Expires:"0", X-Frame-Options:"DENY"]
     Content type = application/json
             Body = {"status":500,"message":"Se ha producido un error interno. Por favor, intntelo de nuevo ms tarde.","timestamp":"2026-01-30T22:38:18.054963848"}
    Forwarded URL = null
   Redirected URL = null
          Cookies = []
Hibernate: 
    
SET
    REFERENTIAL_INTEGRITY FALSE
Hibernate: 
    TRUNCATE TABLE allergen RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE product RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE order_header RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE recipe_component RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE recipe RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE inventory_audit RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE recipe_audit RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE order_detail RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE recipe_allergen RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE users RESTART IDENTITY
Hibernate: 
    
SET
    REFERENTIAL_INTEGRITY TRUE
Hibernate: 
    insert 
    into
        users
        (email, name, password, role) 
    values
        (?, ?, ?, ?)
2026-01-30T22:38:18.108Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Securing POST /api/auth/login
2026-01-30T22:38:18.108Z DEBUG 372594 --- [inventory] [           main] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2026-01-30T22:38:18.108Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Secured POST /api/auth/login
2026-01-30T22:38:18.108Z DEBUG 372594 --- [inventory] [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.economatom.inventory.controller.AuthController#authenticateUser(LoginRequestDTO)
2026-01-30T22:38:18.109Z DEBUG 372594 --- [inventory] [           main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [LoginRequestDTO(name=Admin, password=null)]
2026-01-30T22:38:18.109Z DEBUG 372594 --- [inventory] [           main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.economatom.inventory.exception.GlobalExceptionHandler#handleValidationExceptions(MethodArgumentNotValidException)
2026-01-30T22:38:18.109Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T22:38:18.109Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{password=La contrasea no puede estar vaca}]
2026-01-30T22:38:18.110Z DEBUG 372594 --- [inventory] [           main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.economatom.inventory.dto.response.LoginResponseDTO> com.economatom.inventory.controller.AuthController.authenticateUser(com.economatom.inventory.dto.request.LoginRequestDTO): [Field error in object 'loginRequestDTO' on field 'password': rejected value [null]; codes [NotBlank.loginRequestDTO.password,NotBlank.password,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [loginRequestDTO.password,password]; arguments []; default message [password]]; default message [La contrasea no puede estar vaca]] ]
Hibernate: 
    
SET
    REFERENTIAL_INTEGRITY FALSE
Hibernate: 
    TRUNCATE TABLE allergen RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE product RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE order_header RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE recipe_component RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE recipe RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE inventory_audit RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE recipe_audit RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE order_detail RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE recipe_allergen RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE users RESTART IDENTITY
Hibernate: 
    
SET
    REFERENTIAL_INTEGRITY TRUE
Hibernate: 
    insert 
    into
        users
        (email, name, password, role) 
    values
        (?, ?, ?, ?)
2026-01-30T22:38:18.157Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Securing POST /api/auth/login
2026-01-30T22:38:18.157Z DEBUG 372594 --- [inventory] [           main] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2026-01-30T22:38:18.158Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Secured POST /api/auth/login
2026-01-30T22:38:18.158Z DEBUG 372594 --- [inventory] [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.economatom.inventory.controller.AuthController#authenticateUser(LoginRequestDTO)
2026-01-30T22:38:18.158Z DEBUG 372594 --- [inventory] [           main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [LoginRequestDTO(name=null, password=password)]
2026-01-30T22:38:18.159Z DEBUG 372594 --- [inventory] [           main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.economatom.inventory.exception.GlobalExceptionHandler#handleValidationExceptions(MethodArgumentNotValidException)
2026-01-30T22:38:18.159Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T22:38:18.159Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{name=El nombre de usuario no puede estar vaco}]
2026-01-30T22:38:18.159Z DEBUG 372594 --- [inventory] [           main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.economatom.inventory.dto.response.LoginResponseDTO> com.economatom.inventory.controller.AuthController.authenticateUser(com.economatom.inventory.dto.request.LoginRequestDTO): [Field error in object 'loginRequestDTO' on field 'name': rejected value [null]; codes [NotBlank.loginRequestDTO.name,NotBlank.name,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [loginRequestDTO.name,name]; arguments []; default message [name]]; default message [El nombre de usuario no puede estar vaco]] ]
Hibernate: 
    
SET
    REFERENTIAL_INTEGRITY FALSE
Hibernate: 
    TRUNCATE TABLE allergen RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE product RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE order_header RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE recipe_component RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE recipe RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE inventory_audit RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE recipe_audit RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE order_detail RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE recipe_allergen RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE users RESTART IDENTITY
Hibernate: 
    
SET
    REFERENTIAL_INTEGRITY TRUE
Hibernate: 
    insert 
    into
        users
        (email, name, password, role) 
    values
        (?, ?, ?, ?)
2026-01-30T22:38:18.207Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Securing POST /api/auth/login
2026-01-30T22:38:18.208Z DEBUG 372594 --- [inventory] [           main] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2026-01-30T22:38:18.208Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Secured POST /api/auth/login
2026-01-30T22:38:18.208Z DEBUG 372594 --- [inventory] [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.economatom.inventory.controller.AuthController#authenticateUser(LoginRequestDTO)
2026-01-30T22:38:18.209Z DEBUG 372594 --- [inventory] [           main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [LoginRequestDTO(name=Admin, password=wrongPassword)]
Hibernate: 
    select
        u1_0.user_id,
        u1_0.email,
        u1_0.name,
        u1_0.password,
        u1_0.role 
    from
        users u1_0 
    where
        u1_0.name=?
2026-01-30T22:38:18.250Z DEBUG 372594 --- [inventory] [           main] o.s.s.a.dao.DaoAuthenticationProvider    : Failed to authenticate since password does not match stored value
2026-01-30T22:38:18.250Z DEBUG 372594 --- [inventory] [           main] o.s.s.authentication.ProviderManager     : Authentication failed with provider DaoAuthenticationProvider since Bad credentials
2026-01-30T22:38:18.251Z DEBUG 372594 --- [inventory] [           main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.economatom.inventory.exception.GlobalExceptionHandler#handleBadCredentials(BadCredentialsException)
2026-01-30T22:38:18.251Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T22:38:18.251Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{status=401, timestamp=2026-01-30T22:38:18.251392609Z, message=Usuario o contrasea incorrectos}]
2026-01-30T22:38:18.252Z DEBUG 372594 --- [inventory] [           main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.security.authentication.BadCredentialsException: Bad credentials]
[ERROR] Tests run: 11, Failures: 2, Errors: 0, Skipped: 0, Time elapsed: 0.845 s <<< FAILURE! -- in com.economatom.inventory.controller.AuthControllerEdgeCasesTest
[ERROR] com.economatom.inventory.controller.AuthControllerEdgeCasesTest.login_WithValidCredentials_ShouldReturnToken -- Time elapsed: 0.094 s <<< FAILURE!
java.lang.AssertionError: No value at JSON path "$.type"
	at org.springframework.test.util.JsonPathExpectationsHelper.evaluateJsonPath(JsonPathExpectationsHelper.java:351)
	at org.springframework.test.util.JsonPathExpectationsHelper.assertValue(JsonPathExpectationsHelper.java:106)
	at org.springframework.test.web.servlet.result.JsonPathResultMatchers.lambda$value$0(JsonPathResultMatchers.java:88)
	at org.springframework.test.web.servlet.MockMvc$1.andExpect(MockMvc.java:214)
	at com.economatom.inventory.controller.AuthControllerEdgeCasesTest.login_WithValidCredentials_ShouldReturnToken(AuthControllerEdgeCasesTest.java:47)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
Caused by: com.jayway.jsonpath.PathNotFoundException: No results for path: $['type']

[ERROR] com.economatom.inventory.controller.AuthControllerEdgeCasesTest.login_WithoutContentType_ShouldReturnUnsupportedMediaType -- Time elapsed: 0.057 s <<< FAILURE!
java.lang.AssertionError: Status expected:<415> but was:<500>
	at org.springframework.test.util.AssertionErrors.fail(AssertionErrors.java:61)
	at org.springframework.test.util.AssertionErrors.assertEquals(AssertionErrors.java:128)
	at org.springframework.test.web.servlet.result.StatusResultMatchers.lambda$matcher$9(StatusResultMatchers.java:640)
	at org.springframework.test.web.servlet.MockMvc$1.andExpect(MockMvc.java:214)
	at com.economatom.inventory.controller.AuthControllerEdgeCasesTest.login_WithoutContentType_ShouldReturnUnsupportedMediaType(AuthControllerEdgeCasesTest.java:154)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)

[INFO] Running com.economatom.inventory.controller.AuthControllerIntegrationTest
2026-01-30T22:38:18.256Z  INFO 372594 --- [inventory] [           main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [com.economatom.inventory.controller.AuthControllerIntegrationTest]: AuthControllerIntegrationTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2026-01-30T22:38:18.257Z  INFO 372594 --- [inventory] [           main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration com.economatom.inventory.InventoryApplication for test class com.economatom.inventory.controller.AuthControllerIntegrationTest
Hibernate: 
    
SET
    REFERENTIAL_INTEGRITY FALSE
Hibernate: 
    TRUNCATE TABLE allergen RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE product RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE order_header RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE recipe_component RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE recipe RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE inventory_audit RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE recipe_audit RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE order_detail RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE recipe_allergen RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE users RESTART IDENTITY
Hibernate: 
    
SET
    REFERENTIAL_INTEGRITY TRUE
Hibernate: 
    insert 
    into
        users
        (email, name, password, role) 
    values
        (?, ?, ?, ?)
2026-01-30T22:38:18.344Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Securing POST /api/auth/login
2026-01-30T22:38:18.344Z DEBUG 372594 --- [inventory] [           main] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2026-01-30T22:38:18.344Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Secured POST /api/auth/login
2026-01-30T22:38:18.345Z DEBUG 372594 --- [inventory] [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.economatom.inventory.controller.AuthController#authenticateUser(LoginRequestDTO)
2026-01-30T22:38:18.345Z DEBUG 372594 --- [inventory] [           main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [LoginRequestDTO(name=usuarioinexistente, password=contraseaincorrecta)]
Hibernate: 
    select
        u1_0.user_id,
        u1_0.email,
        u1_0.name,
        u1_0.password,
        u1_0.role 
    from
        users u1_0 
    where
        u1_0.name=?
2026-01-30T22:38:18.386Z DEBUG 372594 --- [inventory] [           main] o.s.s.a.dao.DaoAuthenticationProvider    : Failed to find user 'usuarioinexistente'
2026-01-30T22:38:18.387Z DEBUG 372594 --- [inventory] [           main] o.s.s.authentication.ProviderManager     : Authentication failed with provider DaoAuthenticationProvider since Bad credentials
2026-01-30T22:38:18.387Z DEBUG 372594 --- [inventory] [           main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.economatom.inventory.exception.GlobalExceptionHandler#handleBadCredentials(BadCredentialsException)
2026-01-30T22:38:18.387Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T22:38:18.387Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{status=401, timestamp=2026-01-30T22:38:18.387453457Z, message=Usuario o contrasea incorrectos}]
2026-01-30T22:38:18.388Z DEBUG 372594 --- [inventory] [           main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.security.authentication.BadCredentialsException: Bad credentials]
Hibernate: 
    
SET
    REFERENTIAL_INTEGRITY FALSE
Hibernate: 
    TRUNCATE TABLE allergen RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE product RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE order_header RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE recipe_component RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE recipe RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE inventory_audit RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE recipe_audit RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE order_detail RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE recipe_allergen RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE users RESTART IDENTITY
Hibernate: 
    
SET
    REFERENTIAL_INTEGRITY TRUE
Hibernate: 
    insert 
    into
        users
        (email, name, password, role) 
    values
        (?, ?, ?, ?)
2026-01-30T22:38:18.475Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Securing GET /api/auth/validate
2026-01-30T22:38:18.476Z ERROR 372594 --- [inventory] [           main] c.e.inventory.security.JwtUtils          : Token JWT invlido: JWT strings must contain exactly 2 period characters. Found: 0
2026-01-30T22:38:18.476Z DEBUG 372594 --- [inventory] [           main] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
Hibernate: 
    
SET
    REFERENTIAL_INTEGRITY FALSE
Hibernate: 
    TRUNCATE TABLE allergen RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE product RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE order_header RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE recipe_component RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE recipe RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE inventory_audit RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE recipe_audit RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE order_detail RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE recipe_allergen RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE users RESTART IDENTITY
Hibernate: 
    
SET
    REFERENTIAL_INTEGRITY TRUE
Hibernate: 
    insert 
    into
        users
        (email, name, password, role) 
    values
        (?, ?, ?, ?)
2026-01-30T22:38:18.564Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Securing POST /api/auth/login
2026-01-30T22:38:18.564Z DEBUG 372594 --- [inventory] [           main] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2026-01-30T22:38:18.564Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Secured POST /api/auth/login
2026-01-30T22:38:18.565Z DEBUG 372594 --- [inventory] [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.economatom.inventory.controller.AuthController#authenticateUser(LoginRequestDTO)
2026-01-30T22:38:18.565Z DEBUG 372594 --- [inventory] [           main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [LoginRequestDTO(name=, password=chef123)]
2026-01-30T22:38:18.565Z DEBUG 372594 --- [inventory] [           main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.economatom.inventory.exception.GlobalExceptionHandler#handleValidationExceptions(MethodArgumentNotValidException)
2026-01-30T22:38:18.565Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T22:38:18.565Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{name=El nombre de usuario no puede estar vaco}]
2026-01-30T22:38:18.566Z DEBUG 372594 --- [inventory] [           main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.economatom.inventory.dto.response.LoginResponseDTO> com.economatom.inventory.controller.AuthController.authenticateUser(com.economatom.inventory.dto.request.LoginRequestDTO): [Field error in object 'loginRequestDTO' on field 'name': rejected value []; codes [NotBlank.loginRequestDTO.name,NotBlank.name,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [loginRequestDTO.name,name]; arguments []; default message [name]]; default message [El nombre de usuario no puede estar vaco]] ]
Hibernate: 
    
SET
    REFERENTIAL_INTEGRITY FALSE
Hibernate: 
    TRUNCATE TABLE allergen RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE product RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE order_header RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE recipe_component RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE recipe RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE inventory_audit RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE recipe_audit RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE order_detail RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE recipe_allergen RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE users RESTART IDENTITY
Hibernate: 
    
SET
    REFERENTIAL_INTEGRITY TRUE
Hibernate: 
    insert 
    into
        users
        (email, name, password, role) 
    values
        (?, ?, ?, ?)
2026-01-30T22:38:18.653Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Securing POST /api/auth/login
2026-01-30T22:38:18.653Z DEBUG 372594 --- [inventory] [           main] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2026-01-30T22:38:18.653Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Secured POST /api/auth/login
2026-01-30T22:38:18.653Z DEBUG 372594 --- [inventory] [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.economatom.inventory.controller.AuthController#authenticateUser(LoginRequestDTO)
2026-01-30T22:38:18.654Z DEBUG 372594 --- [inventory] [           main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [LoginRequestDTO(name=Chef, password=chef123)]
Hibernate: 
    select
        u1_0.user_id,
        u1_0.email,
        u1_0.name,
        u1_0.password,
        u1_0.role 
    from
        users u1_0 
    where
        u1_0.name=?
2026-01-30T22:38:18.695Z DEBUG 372594 --- [inventory] [           main] o.s.s.a.dao.DaoAuthenticationProvider    : Authenticated user
2026-01-30T22:38:18.696Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T22:38:18.696Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [LoginResponseDTO(token=eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJDaGVmIiwiaWF0IjoxNzY5ODEyNjk4LCJleHAiOjE3Njk4 (truncated)...]
2026-01-30T22:38:18.697Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Securing GET /api/auth/validate
Hibernate: 
    select
        u1_0.user_id,
        u1_0.email,
        u1_0.name,
        u1_0.password,
        u1_0.role 
    from
        users u1_0 
    where
        u1_0.name=?
2026-01-30T22:38:18.700Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Secured GET /api/auth/validate
2026-01-30T22:38:18.700Z DEBUG 372594 --- [inventory] [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.economatom.inventory.controller.AuthController#validateToken(Authentication)
2026-01-30T22:38:18.701Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T22:38:18.701Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{valid=true, username=Chef}]
Hibernate: 
    
SET
    REFERENTIAL_INTEGRITY FALSE
Hibernate: 
    TRUNCATE TABLE allergen RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE product RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE order_header RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE recipe_component RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE recipe RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE inventory_audit RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE recipe_audit RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE order_detail RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE recipe_allergen RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE users RESTART IDENTITY
Hibernate: 
    
SET
    REFERENTIAL_INTEGRITY TRUE
Hibernate: 
    insert 
    into
        users
        (email, name, password, role) 
    values
        (?, ?, ?, ?)
2026-01-30T22:38:18.788Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Securing POST /api/auth/login
2026-01-30T22:38:18.788Z DEBUG 372594 --- [inventory] [           main] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2026-01-30T22:38:18.788Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Secured POST /api/auth/login
2026-01-30T22:38:18.788Z DEBUG 372594 --- [inventory] [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.economatom.inventory.controller.AuthController#authenticateUser(LoginRequestDTO)
2026-01-30T22:38:18.789Z DEBUG 372594 --- [inventory] [           main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [LoginRequestDTO(name=Chef, password=chef123)]
Hibernate: 
    select
        u1_0.user_id,
        u1_0.email,
        u1_0.name,
        u1_0.password,
        u1_0.role 
    from
        users u1_0 
    where
        u1_0.name=?
2026-01-30T22:38:18.830Z DEBUG 372594 --- [inventory] [           main] o.s.s.a.dao.DaoAuthenticationProvider    : Authenticated user
2026-01-30T22:38:18.831Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T22:38:18.831Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [LoginResponseDTO(token=eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJDaGVmIiwiaWF0IjoxNzY5ODEyNjk4LCJleHAiOjE3Njk4 (truncated)...]
Hibernate: 
    
SET
    REFERENTIAL_INTEGRITY FALSE
Hibernate: 
    TRUNCATE TABLE allergen RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE product RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE order_header RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE recipe_component RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE recipe RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE inventory_audit RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE recipe_audit RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE order_detail RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE recipe_allergen RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE users RESTART IDENTITY
Hibernate: 
    
SET
    REFERENTIAL_INTEGRITY TRUE
Hibernate: 
    insert 
    into
        users
        (email, name, password, role) 
    values
        (?, ?, ?, ?)
2026-01-30T22:38:18.920Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Securing GET /api/auth/validate
2026-01-30T22:38:18.920Z DEBUG 372594 --- [inventory] [           main] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
Hibernate: 
    
SET
    REFERENTIAL_INTEGRITY FALSE
Hibernate: 
    TRUNCATE TABLE allergen RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE product RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE order_header RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE recipe_component RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE recipe RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE inventory_audit RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE recipe_audit RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE order_detail RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE recipe_allergen RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE users RESTART IDENTITY
Hibernate: 
    
SET
    REFERENTIAL_INTEGRITY TRUE
Hibernate: 
    insert 
    into
        users
        (email, name, password, role) 
    values
        (?, ?, ?, ?)
2026-01-30T22:38:19.006Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Securing POST /api/auth/login
2026-01-30T22:38:19.006Z DEBUG 372594 --- [inventory] [           main] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2026-01-30T22:38:19.007Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Secured POST /api/auth/login
2026-01-30T22:38:19.007Z DEBUG 372594 --- [inventory] [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.economatom.inventory.controller.AuthController#authenticateUser(LoginRequestDTO)
2026-01-30T22:38:19.007Z DEBUG 372594 --- [inventory] [           main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [LoginRequestDTO(name=Chef, password=)]
2026-01-30T22:38:19.008Z DEBUG 372594 --- [inventory] [           main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.economatom.inventory.exception.GlobalExceptionHandler#handleValidationExceptions(MethodArgumentNotValidException)
2026-01-30T22:38:19.008Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T22:38:19.008Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{password=La contrasea no puede estar vaca}]
2026-01-30T22:38:19.008Z DEBUG 372594 --- [inventory] [           main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.economatom.inventory.dto.response.LoginResponseDTO> com.economatom.inventory.controller.AuthController.authenticateUser(com.economatom.inventory.dto.request.LoginRequestDTO): [Field error in object 'loginRequestDTO' on field 'password': rejected value []; codes [NotBlank.loginRequestDTO.password,NotBlank.password,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [loginRequestDTO.password,password]; arguments []; default message [password]]; default message [La contrasea no puede estar vaca]] ]
Hibernate: 
    
SET
    REFERENTIAL_INTEGRITY FALSE
Hibernate: 
    TRUNCATE TABLE allergen RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE product RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE order_header RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE recipe_component RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE recipe RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE inventory_audit RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE recipe_audit RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE order_detail RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE recipe_allergen RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE users RESTART IDENTITY
Hibernate: 
    
SET
    REFERENTIAL_INTEGRITY TRUE
Hibernate: 
    insert 
    into
        users
        (email, name, password, role) 
    values
        (?, ?, ?, ?)
2026-01-30T22:38:19.094Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Securing POST /api/auth/login
2026-01-30T22:38:19.094Z DEBUG 372594 --- [inventory] [           main] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2026-01-30T22:38:19.094Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Secured POST /api/auth/login
2026-01-30T22:38:19.094Z DEBUG 372594 --- [inventory] [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.economatom.inventory.controller.AuthController#authenticateUser(LoginRequestDTO)
2026-01-30T22:38:19.095Z DEBUG 372594 --- [inventory] [           main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [LoginRequestDTO(name=null, password=null)]
2026-01-30T22:38:19.095Z DEBUG 372594 --- [inventory] [           main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.economatom.inventory.exception.GlobalExceptionHandler#handleValidationExceptions(MethodArgumentNotValidException)
2026-01-30T22:38:19.095Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T22:38:19.095Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{password=La contrasea no puede estar vaca, name=El nombre de usuario no puede estar vaco}]
2026-01-30T22:38:19.096Z DEBUG 372594 --- [inventory] [           main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.economatom.inventory.dto.response.LoginResponseDTO> com.economatom.inventory.controller.AuthController.authenticateUser(com.economatom.inventory.dto.request.LoginRequestDTO) with 2 errors: [Field error in object 'loginRequestDTO' on field 'password': rejected value [null]; codes [NotBlank.loginRequestDTO.password,NotBlank.password,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [loginRequestDTO.password,password]; arguments []; default message [password]]; default message [La contrasea no puede estar vaca]] [Field error in object 'loginRequestDTO' on field 'name': rejected value [null]; codes [NotBlank.loginRequestDTO.name,NotBlank.name,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [loginRequestDTO.name,name]; arguments []; default message [name]]; default message [El nombre de usuario no puede estar vaco]] ]
[INFO] Tests run: 8, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.843 s -- in com.economatom.inventory.controller.AuthControllerIntegrationTest
[INFO] Running com.economatom.inventory.controller.OrderControllerIntegrationTest
2026-01-30T22:38:19.099Z  INFO 372594 --- [inventory] [           main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [com.economatom.inventory.controller.OrderControllerIntegrationTest]: OrderControllerIntegrationTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2026-01-30T22:38:19.100Z  INFO 372594 --- [inventory] [           main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration com.economatom.inventory.InventoryApplication for test class com.economatom.inventory.controller.OrderControllerIntegrationTest
Hibernate: 
    
SET
    REFERENTIAL_INTEGRITY FALSE
Hibernate: 
    TRUNCATE TABLE allergen RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE product RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE order_header RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE recipe_component RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE recipe RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE inventory_audit RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE recipe_audit RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE order_detail RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE recipe_allergen RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE users RESTART IDENTITY
Hibernate: 
    
SET
    REFERENTIAL_INTEGRITY TRUE
Hibernate: 
    insert 
    into
        users
        (email, name, password, role) 
    values
        (?, ?, ?, ?)
Hibernate: 
    insert 
    into
        product
        (current_stock, name, product_code, type, unit_of_measure, unit_price, version) 
    values
        (?, ?, ?, ?, ?, ?, ?)
Hibernate: 
    insert 
    into
        product
        (current_stock, name, product_code, type, unit_of_measure, unit_price, version) 
    values
        (?, ?, ?, ?, ?, ?, ?)
2026-01-30T22:38:19.195Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Securing POST /api/auth/login
2026-01-30T22:38:19.195Z DEBUG 372594 --- [inventory] [           main] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2026-01-30T22:38:19.196Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Secured POST /api/auth/login
2026-01-30T22:38:19.196Z DEBUG 372594 --- [inventory] [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.economatom.inventory.controller.AuthController#authenticateUser(LoginRequestDTO)
2026-01-30T22:38:19.196Z DEBUG 372594 --- [inventory] [           main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [LoginRequestDTO(name=Chef, password=chef123)]
Hibernate: 
    select
        u1_0.user_id,
        u1_0.email,
        u1_0.name,
        u1_0.password,
        u1_0.role 
    from
        users u1_0 
    where
        u1_0.name=?
2026-01-30T22:38:19.238Z DEBUG 372594 --- [inventory] [           main] o.s.s.a.dao.DaoAuthenticationProvider    : Authenticated user
2026-01-30T22:38:19.239Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T22:38:19.239Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [LoginResponseDTO(token=eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJDaGVmIiwiaWF0IjoxNzY5ODEyNjk5LCJleHAiOjE3Njk4 (truncated)...]
2026-01-30T22:38:19.245Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Securing POST /api/orders
Hibernate: 
    select
        u1_0.user_id,
        u1_0.email,
        u1_0.name,
        u1_0.password,
        u1_0.role 
    from
        users u1_0 
    where
        u1_0.name=?
2026-01-30T22:38:19.248Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Secured POST /api/orders
2026-01-30T22:38:19.248Z DEBUG 372594 --- [inventory] [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.economatom.inventory.controller.OrderController#create(OrderRequestDTO)
2026-01-30T22:38:19.251Z DEBUG 372594 --- [inventory] [           main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [OrderRequestDTO(userId=1, details=[OrderDetailRequestDTO(orderId=null, productId=1, quantity=2.5)])]
Hibernate: 
    select
        u1_0.user_id,
        u1_0.email,
        u1_0.name,
        u1_0.password,
        u1_0.role 
    from
        users u1_0 
    where
        u1_0.user_id=?
Hibernate: 
    select
        p1_0.product_id,
        p1_0.current_stock,
        p1_0.name,
        p1_0.product_code,
        p1_0.type,
        p1_0.unit_of_measure,
        p1_0.unit_price,
        p1_0.version 
    from
        product p1_0 
    where
        p1_0.product_id=?
Hibernate: 
    insert 
    into
        order_header
        (order_date, status, user_id, version) 
    values
        (?, ?, ?, ?)
Hibernate: 
    insert 
    into
        order_detail
        (requested_quantity, received_quantity, order_id, product_id) 
    values
        (?, ?, ?, ?)
2026-01-30T22:38:19.264Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T22:38:19.265Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [OrderResponseDTO(id=1, userId=1, userName=Chef, orderDate=2026-01-30T22:38:19.253552455, status=CREA (truncated)...]
2026-01-30T22:38:19.269Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Securing PUT /api/orders/1
Hibernate: 
    select
        u1_0.user_id,
        u1_0.email,
        u1_0.name,
        u1_0.password,
        u1_0.role 
    from
        users u1_0 
    where
        u1_0.name=?
2026-01-30T22:38:19.272Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Secured PUT /api/orders/1
2026-01-30T22:38:19.272Z DEBUG 372594 --- [inventory] [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.economatom.inventory.controller.OrderController#update(Integer, OrderRequestDTO)
2026-01-30T22:38:19.273Z DEBUG 372594 --- [inventory] [           main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [OrderRequestDTO(userId=1, details=[OrderDetailRequestDTO(orderId=null, productId=2, quantity=3.0)])]
Hibernate: 
    select
        o1_0.order_id,
        o1_0.order_date,
        o1_0.status,
        o1_0.user_id,
        o1_0.version 
    from
        order_header o1_0 
    where
        o1_0.order_id=?
Hibernate: 
    select
        u1_0.user_id,
        u1_0.email,
        u1_0.name,
        u1_0.password,
        u1_0.role 
    from
        users u1_0 
    where
        u1_0.user_id=?
Hibernate: 
    select
        d1_0.order_id,
        d1_0.product_id,
        d1_0.requested_quantity,
        d1_0.received_quantity 
    from
        order_detail d1_0 
    where
        d1_0.order_id=?
Hibernate: 
    delete 
    from
        order_detail 
    where
        order_id=? 
        and product_id=?
Hibernate: 
    select
        p1_0.product_id,
        p1_0.current_stock,
        p1_0.name,
        p1_0.product_code,
        p1_0.type,
        p1_0.unit_of_measure,
        p1_0.unit_price,
        p1_0.version 
    from
        product p1_0 
    where
        p1_0.product_id=?
Hibernate: 
    select
        od1_0.order_id,
        od1_0.product_id,
        od1_0.requested_quantity,
        od1_0.received_quantity 
    from
        order_detail od1_0 
    where
        (
            od1_0.order_id, od1_0.product_id
        ) in ((?, ?))
Hibernate: 
    insert 
    into
        order_detail
        (requested_quantity, received_quantity, order_id, product_id) 
    values
        (?, ?, ?, ?)
2026-01-30T22:38:19.291Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T22:38:19.292Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [OrderResponseDTO(id=1, userId=1, userName=Chef, orderDate=2026-01-30T22:38:19.253552, status=CREATED (truncated)...]
Hibernate: 
    
SET
    REFERENTIAL_INTEGRITY FALSE
Hibernate: 
    TRUNCATE TABLE allergen RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE product RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE order_header RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE recipe_component RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE recipe RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE inventory_audit RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE recipe_audit RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE order_detail RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE recipe_allergen RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE users RESTART IDENTITY
Hibernate: 
    
SET
    REFERENTIAL_INTEGRITY TRUE
Hibernate: 
    insert 
    into
        users
        (email, name, password, role) 
    values
        (?, ?, ?, ?)
Hibernate: 
    insert 
    into
        product
        (current_stock, name, product_code, type, unit_of_measure, unit_price, version) 
    values
        (?, ?, ?, ?, ?, ?, ?)
Hibernate: 
    insert 
    into
        product
        (current_stock, name, product_code, type, unit_of_measure, unit_price, version) 
    values
        (?, ?, ?, ?, ?, ?, ?)
2026-01-30T22:38:19.383Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Securing POST /api/auth/login
2026-01-30T22:38:19.383Z DEBUG 372594 --- [inventory] [           main] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2026-01-30T22:38:19.383Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Secured POST /api/auth/login
2026-01-30T22:38:19.383Z DEBUG 372594 --- [inventory] [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.economatom.inventory.controller.AuthController#authenticateUser(LoginRequestDTO)
2026-01-30T22:38:19.384Z DEBUG 372594 --- [inventory] [           main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [LoginRequestDTO(name=Chef, password=chef123)]
Hibernate: 
    select
        u1_0.user_id,
        u1_0.email,
        u1_0.name,
        u1_0.password,
        u1_0.role 
    from
        users u1_0 
    where
        u1_0.name=?
2026-01-30T22:38:19.425Z DEBUG 372594 --- [inventory] [           main] o.s.s.a.dao.DaoAuthenticationProvider    : Authenticated user
2026-01-30T22:38:19.426Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T22:38:19.426Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [LoginResponseDTO(token=eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJDaGVmIiwiaWF0IjoxNzY5ODEyNjk5LCJleHAiOjE3Njk4 (truncated)...]
2026-01-30T22:38:19.428Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Securing POST /api/orders
Hibernate: 
    select
        u1_0.user_id,
        u1_0.email,
        u1_0.name,
        u1_0.password,
        u1_0.role 
    from
        users u1_0 
    where
        u1_0.name=?
2026-01-30T22:38:19.431Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Secured POST /api/orders
2026-01-30T22:38:19.431Z DEBUG 372594 --- [inventory] [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.economatom.inventory.controller.OrderController#create(OrderRequestDTO)
2026-01-30T22:38:19.432Z DEBUG 372594 --- [inventory] [           main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [OrderRequestDTO(userId=1, details=[OrderDetailRequestDTO(orderId=null, productId=1, quantity=2.5)])]
Hibernate: 
    select
        u1_0.user_id,
        u1_0.email,
        u1_0.name,
        u1_0.password,
        u1_0.role 
    from
        users u1_0 
    where
        u1_0.user_id=?
Hibernate: 
    select
        p1_0.product_id,
        p1_0.current_stock,
        p1_0.name,
        p1_0.product_code,
        p1_0.type,
        p1_0.unit_of_measure,
        p1_0.unit_price,
        p1_0.version 
    from
        product p1_0 
    where
        p1_0.product_id=?
Hibernate: 
    insert 
    into
        order_header
        (order_date, status, user_id, version) 
    values
        (?, ?, ?, ?)
Hibernate: 
    insert 
    into
        order_detail
        (requested_quantity, received_quantity, order_id, product_id) 
    values
        (?, ?, ?, ?)
2026-01-30T22:38:19.435Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T22:38:19.435Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [OrderResponseDTO(id=1, userId=1, userName=Chef, orderDate=2026-01-30T22:38:19.432500257, status=CREA (truncated)...]
2026-01-30T22:38:19.437Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Securing GET /api/orders/1
Hibernate: 
    select
        u1_0.user_id,
        u1_0.email,
        u1_0.name,
        u1_0.password,
        u1_0.role 
    from
        users u1_0 
    where
        u1_0.name=?
2026-01-30T22:38:19.440Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Secured GET /api/orders/1
2026-01-30T22:38:19.440Z DEBUG 372594 --- [inventory] [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.economatom.inventory.controller.OrderController#getById(Integer)
Hibernate: 
    select
        distinct o1_0.order_id,
        d1_0.order_id,
        d1_0.product_id,
        p1_0.product_id,
        p1_0.current_stock,
        p1_0.name,
        p1_0.product_code,
        p1_0.type,
        p1_0.unit_of_measure,
        p1_0.unit_price,
        p1_0.version,
        d1_0.requested_quantity,
        d1_0.received_quantity,
        o1_0.order_date,
        o1_0.status,
        o1_0.user_id,
        u1_0.user_id,
        u1_0.email,
        u1_0.name,
        u1_0.password,
        u1_0.role,
        o1_0.version 
    from
        order_header o1_0 
    left join
        order_detail d1_0 
            on o1_0.order_id=d1_0.order_id 
    left join
        product p1_0 
            on p1_0.product_id=d1_0.product_id 
    left join
        users u1_0 
            on u1_0.user_id=o1_0.user_id 
    where
        o1_0.order_id=?
2026-01-30T22:38:19.454Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T22:38:19.454Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [OrderResponseDTO(id=1, userId=1, userName=Chef, orderDate=2026-01-30T22:38:19.432500, status=CREATED (truncated)...]
Hibernate: 
    
SET
    REFERENTIAL_INTEGRITY FALSE
Hibernate: 
    TRUNCATE TABLE allergen RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE product RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE order_header RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE recipe_component RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE recipe RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE inventory_audit RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE recipe_audit RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE order_detail RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE recipe_allergen RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE users RESTART IDENTITY
Hibernate: 
    
SET
    REFERENTIAL_INTEGRITY TRUE
Hibernate: 
    insert 
    into
        users
        (email, name, password, role) 
    values
        (?, ?, ?, ?)
Hibernate: 
    insert 
    into
        product
        (current_stock, name, product_code, type, unit_of_measure, unit_price, version) 
    values
        (?, ?, ?, ?, ?, ?, ?)
Hibernate: 
    insert 
    into
        product
        (current_stock, name, product_code, type, unit_of_measure, unit_price, version) 
    values
        (?, ?, ?, ?, ?, ?, ?)
2026-01-30T22:38:19.542Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Securing POST /api/auth/login
2026-01-30T22:38:19.542Z DEBUG 372594 --- [inventory] [           main] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2026-01-30T22:38:19.542Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Secured POST /api/auth/login
2026-01-30T22:38:19.542Z DEBUG 372594 --- [inventory] [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.economatom.inventory.controller.AuthController#authenticateUser(LoginRequestDTO)
2026-01-30T22:38:19.542Z DEBUG 372594 --- [inventory] [           main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [LoginRequestDTO(name=Chef, password=chef123)]
Hibernate: 
    select
        u1_0.user_id,
        u1_0.email,
        u1_0.name,
        u1_0.password,
        u1_0.role 
    from
        users u1_0 
    where
        u1_0.name=?
2026-01-30T22:38:19.583Z DEBUG 372594 --- [inventory] [           main] o.s.s.a.dao.DaoAuthenticationProvider    : Authenticated user
2026-01-30T22:38:19.584Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T22:38:19.584Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [LoginResponseDTO(token=eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJDaGVmIiwiaWF0IjoxNzY5ODEyNjk5LCJleHAiOjE3Njk4 (truncated)...]
2026-01-30T22:38:19.585Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Securing POST /api/orders
Hibernate: 
    select
        u1_0.user_id,
        u1_0.email,
        u1_0.name,
        u1_0.password,
        u1_0.role 
    from
        users u1_0 
    where
        u1_0.name=?
2026-01-30T22:38:19.588Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Secured POST /api/orders
2026-01-30T22:38:19.588Z DEBUG 372594 --- [inventory] [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.economatom.inventory.controller.OrderController#create(OrderRequestDTO)
2026-01-30T22:38:19.589Z DEBUG 372594 --- [inventory] [           main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [OrderRequestDTO(userId=1, details=[OrderDetailRequestDTO(orderId=null, productId=1, quantity=2.5)])]
Hibernate: 
    select
        u1_0.user_id,
        u1_0.email,
        u1_0.name,
        u1_0.password,
        u1_0.role 
    from
        users u1_0 
    where
        u1_0.user_id=?
Hibernate: 
    select
        p1_0.product_id,
        p1_0.current_stock,
        p1_0.name,
        p1_0.product_code,
        p1_0.type,
        p1_0.unit_of_measure,
        p1_0.unit_price,
        p1_0.version 
    from
        product p1_0 
    where
        p1_0.product_id=?
Hibernate: 
    insert 
    into
        order_header
        (order_date, status, user_id, version) 
    values
        (?, ?, ?, ?)
Hibernate: 
    insert 
    into
        order_detail
        (requested_quantity, received_quantity, order_id, product_id) 
    values
        (?, ?, ?, ?)
2026-01-30T22:38:19.592Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T22:38:19.592Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [OrderResponseDTO(id=1, userId=1, userName=Chef, orderDate=2026-01-30T22:38:19.589357930, status=CREA (truncated)...]
Hibernate: 
    
SET
    REFERENTIAL_INTEGRITY FALSE
Hibernate: 
    TRUNCATE TABLE allergen RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE product RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE order_header RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE recipe_component RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE recipe RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE inventory_audit RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE recipe_audit RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE order_detail RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE recipe_allergen RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE users RESTART IDENTITY
Hibernate: 
    
SET
    REFERENTIAL_INTEGRITY TRUE
Hibernate: 
    insert 
    into
        users
        (email, name, password, role) 
    values
        (?, ?, ?, ?)
Hibernate: 
    insert 
    into
        product
        (current_stock, name, product_code, type, unit_of_measure, unit_price, version) 
    values
        (?, ?, ?, ?, ?, ?, ?)
Hibernate: 
    insert 
    into
        product
        (current_stock, name, product_code, type, unit_of_measure, unit_price, version) 
    values
        (?, ?, ?, ?, ?, ?, ?)
2026-01-30T22:38:19.679Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Securing POST /api/auth/login
2026-01-30T22:38:19.680Z DEBUG 372594 --- [inventory] [           main] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2026-01-30T22:38:19.680Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Secured POST /api/auth/login
2026-01-30T22:38:19.680Z DEBUG 372594 --- [inventory] [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.economatom.inventory.controller.AuthController#authenticateUser(LoginRequestDTO)
2026-01-30T22:38:19.680Z DEBUG 372594 --- [inventory] [           main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [LoginRequestDTO(name=Chef, password=chef123)]
Hibernate: 
    select
        u1_0.user_id,
        u1_0.email,
        u1_0.name,
        u1_0.password,
        u1_0.role 
    from
        users u1_0 
    where
        u1_0.name=?
2026-01-30T22:38:19.721Z DEBUG 372594 --- [inventory] [           main] o.s.s.a.dao.DaoAuthenticationProvider    : Authenticated user
2026-01-30T22:38:19.722Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T22:38:19.722Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [LoginResponseDTO(token=eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJDaGVmIiwiaWF0IjoxNzY5ODEyNjk5LCJleHAiOjE3Njk4 (truncated)...]
2026-01-30T22:38:19.723Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Securing GET /api/orders
Hibernate: 
    select
        u1_0.user_id,
        u1_0.email,
        u1_0.name,
        u1_0.password,
        u1_0.role 
    from
        users u1_0 
    where
        u1_0.name=?
2026-01-30T22:38:19.725Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Secured GET /api/orders
2026-01-30T22:38:19.726Z DEBUG 372594 --- [inventory] [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.economatom.inventory.controller.OrderController#getAll(Pageable)
2026-01-30T22:38:19.730Z  WARN 372594 --- [inventory] [           main] org.hibernate.orm.query                  : HHH90003004: firstResult/maxResults specified with collection fetch; applying in memory
Hibernate: 
    select
        o1_0.order_id,
        d1_0.order_id,
        d1_0.product_id,
        p1_0.product_id,
        p1_0.current_stock,
        p1_0.name,
        p1_0.product_code,
        p1_0.type,
        p1_0.unit_of_measure,
        p1_0.unit_price,
        p1_0.version,
        d1_0.requested_quantity,
        d1_0.received_quantity,
        o1_0.order_date,
        o1_0.status,
        o1_0.user_id,
        u1_0.user_id,
        u1_0.email,
        u1_0.name,
        u1_0.password,
        u1_0.role,
        o1_0.version 
    from
        order_header o1_0 
    left join
        order_detail d1_0 
            on o1_0.order_id=d1_0.order_id 
    left join
        product p1_0 
            on p1_0.product_id=d1_0.product_id 
    join
        users u1_0 
            on u1_0.user_id=o1_0.user_id
2026-01-30T22:38:19.733Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T22:38:19.734Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [[]]
Hibernate: 
    
SET
    REFERENTIAL_INTEGRITY FALSE
Hibernate: 
    TRUNCATE TABLE allergen RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE product RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE order_header RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE recipe_component RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE recipe RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE inventory_audit RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE recipe_audit RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE order_detail RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE recipe_allergen RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE users RESTART IDENTITY
Hibernate: 
    
SET
    REFERENTIAL_INTEGRITY TRUE
Hibernate: 
    insert 
    into
        users
        (email, name, password, role) 
    values
        (?, ?, ?, ?)
Hibernate: 
    insert 
    into
        product
        (current_stock, name, product_code, type, unit_of_measure, unit_price, version) 
    values
        (?, ?, ?, ?, ?, ?, ?)
Hibernate: 
    insert 
    into
        product
        (current_stock, name, product_code, type, unit_of_measure, unit_price, version) 
    values
        (?, ?, ?, ?, ?, ?, ?)
2026-01-30T22:38:19.820Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Securing POST /api/auth/login
2026-01-30T22:38:19.821Z DEBUG 372594 --- [inventory] [           main] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2026-01-30T22:38:19.821Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Secured POST /api/auth/login
2026-01-30T22:38:19.821Z DEBUG 372594 --- [inventory] [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.economatom.inventory.controller.AuthController#authenticateUser(LoginRequestDTO)
2026-01-30T22:38:19.821Z DEBUG 372594 --- [inventory] [           main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [LoginRequestDTO(name=Chef, password=chef123)]
Hibernate: 
    select
        u1_0.user_id,
        u1_0.email,
        u1_0.name,
        u1_0.password,
        u1_0.role 
    from
        users u1_0 
    where
        u1_0.name=?
2026-01-30T22:38:19.862Z DEBUG 372594 --- [inventory] [           main] o.s.s.a.dao.DaoAuthenticationProvider    : Authenticated user
2026-01-30T22:38:19.863Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T22:38:19.863Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [LoginResponseDTO(token=eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJDaGVmIiwiaWF0IjoxNzY5ODEyNjk5LCJleHAiOjE3Njk4 (truncated)...]
2026-01-30T22:38:19.865Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Securing POST /api/orders
Hibernate: 
    select
        u1_0.user_id,
        u1_0.email,
        u1_0.name,
        u1_0.password,
        u1_0.role 
    from
        users u1_0 
    where
        u1_0.name=?
2026-01-30T22:38:19.868Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Secured POST /api/orders
2026-01-30T22:38:19.868Z DEBUG 372594 --- [inventory] [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.economatom.inventory.controller.OrderController#create(OrderRequestDTO)
2026-01-30T22:38:19.869Z DEBUG 372594 --- [inventory] [           main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [OrderRequestDTO(userId=1, details=[OrderDetailRequestDTO(orderId=null, productId=1, quantity=2.5)])]
Hibernate: 
    select
        u1_0.user_id,
        u1_0.email,
        u1_0.name,
        u1_0.password,
        u1_0.role 
    from
        users u1_0 
    where
        u1_0.user_id=?
Hibernate: 
    select
        p1_0.product_id,
        p1_0.current_stock,
        p1_0.name,
        p1_0.product_code,
        p1_0.type,
        p1_0.unit_of_measure,
        p1_0.unit_price,
        p1_0.version 
    from
        product p1_0 
    where
        p1_0.product_id=?
Hibernate: 
    insert 
    into
        order_header
        (order_date, status, user_id, version) 
    values
        (?, ?, ?, ?)
Hibernate: 
    insert 
    into
        order_detail
        (requested_quantity, received_quantity, order_id, product_id) 
    values
        (?, ?, ?, ?)
2026-01-30T22:38:19.872Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T22:38:19.872Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [OrderResponseDTO(id=1, userId=1, userName=Chef, orderDate=2026-01-30T22:38:19.869376292, status=CREA (truncated)...]
2026-01-30T22:38:19.873Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Securing DELETE /api/orders/1
Hibernate: 
    select
        u1_0.user_id,
        u1_0.email,
        u1_0.name,
        u1_0.password,
        u1_0.role 
    from
        users u1_0 
    where
        u1_0.name=?
2026-01-30T22:38:19.876Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Secured DELETE /api/orders/1
2026-01-30T22:38:19.876Z DEBUG 372594 --- [inventory] [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.economatom.inventory.controller.OrderController#delete(Integer)
Hibernate: 
    select
        distinct o1_0.order_id,
        d1_0.order_id,
        d1_0.product_id,
        p1_0.product_id,
        p1_0.current_stock,
        p1_0.name,
        p1_0.product_code,
        p1_0.type,
        p1_0.unit_of_measure,
        p1_0.unit_price,
        p1_0.version,
        d1_0.requested_quantity,
        d1_0.received_quantity,
        o1_0.order_date,
        o1_0.status,
        o1_0.user_id,
        u1_0.user_id,
        u1_0.email,
        u1_0.name,
        u1_0.password,
        u1_0.role,
        o1_0.version 
    from
        order_header o1_0 
    left join
        order_detail d1_0 
            on o1_0.order_id=d1_0.order_id 
    left join
        product p1_0 
            on p1_0.product_id=d1_0.product_id 
    left join
        users u1_0 
            on u1_0.user_id=o1_0.user_id 
    where
        o1_0.order_id=?
Hibernate: 
    delete 
    from
        order_detail 
    where
        order_id=? 
        and product_id=?
Hibernate: 
    delete 
    from
        order_header 
    where
        order_id=? 
        and version=?
2026-01-30T22:38:19.881Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/octet-stream', given [*/*] and supported [*/*]
2026-01-30T22:38:19.882Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Securing GET /api/orders/1
Hibernate: 
    select
        u1_0.user_id,
        u1_0.email,
        u1_0.name,
        u1_0.password,
        u1_0.role 
    from
        users u1_0 
    where
        u1_0.name=?
2026-01-30T22:38:19.886Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Secured GET /api/orders/1
2026-01-30T22:38:19.886Z DEBUG 372594 --- [inventory] [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.economatom.inventory.controller.OrderController#getById(Integer)
Hibernate: 
    select
        distinct o1_0.order_id,
        d1_0.order_id,
        d1_0.product_id,
        p1_0.product_id,
        p1_0.current_stock,
        p1_0.name,
        p1_0.product_code,
        p1_0.type,
        p1_0.unit_of_measure,
        p1_0.unit_price,
        p1_0.version,
        d1_0.requested_quantity,
        d1_0.received_quantity,
        o1_0.order_date,
        o1_0.status,
        o1_0.user_id,
        u1_0.user_id,
        u1_0.email,
        u1_0.name,
        u1_0.password,
        u1_0.role,
        o1_0.version 
    from
        order_header o1_0 
    left join
        order_detail d1_0 
            on o1_0.order_id=d1_0.order_id 
    left join
        product p1_0 
            on p1_0.product_id=d1_0.product_id 
    left join
        users u1_0 
            on u1_0.user_id=o1_0.user_id 
    where
        o1_0.order_id=?
2026-01-30T22:38:19.887Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T22:38:19.887Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Nothing to write: null body
[INFO] Tests run: 5, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.792 s -- in com.economatom.inventory.controller.OrderControllerIntegrationTest
[INFO] Running com.economatom.inventory.controller.OrderDetailControllerIntegrationTest
2026-01-30T22:38:19.892Z  INFO 372594 --- [inventory] [           main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [com.economatom.inventory.controller.OrderDetailControllerIntegrationTest]: OrderDetailControllerIntegrationTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2026-01-30T22:38:19.893Z  INFO 372594 --- [inventory] [           main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration com.economatom.inventory.InventoryApplication for test class com.economatom.inventory.controller.OrderDetailControllerIntegrationTest
Hibernate: 
    
SET
    REFERENTIAL_INTEGRITY FALSE
Hibernate: 
    TRUNCATE TABLE allergen RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE product RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE order_header RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE recipe_component RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE recipe RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE inventory_audit RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE recipe_audit RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE order_detail RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE recipe_allergen RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE users RESTART IDENTITY
Hibernate: 
    
SET
    REFERENTIAL_INTEGRITY TRUE
Hibernate: 
    insert 
    into
        users
        (email, name, password, role) 
    values
        (?, ?, ?, ?)
2026-01-30T22:38:19.938Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Securing POST /api/auth/login
2026-01-30T22:38:19.938Z DEBUG 372594 --- [inventory] [           main] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2026-01-30T22:38:19.939Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Secured POST /api/auth/login
2026-01-30T22:38:19.939Z DEBUG 372594 --- [inventory] [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.economatom.inventory.controller.AuthController#authenticateUser(LoginRequestDTO)
2026-01-30T22:38:19.939Z DEBUG 372594 --- [inventory] [           main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [LoginRequestDTO(name=Admin, password=admin123)]
Hibernate: 
    select
        u1_0.user_id,
        u1_0.email,
        u1_0.name,
        u1_0.password,
        u1_0.role 
    from
        users u1_0 
    where
        u1_0.name=?
2026-01-30T22:38:19.980Z DEBUG 372594 --- [inventory] [           main] o.s.s.a.dao.DaoAuthenticationProvider    : Authenticated user
2026-01-30T22:38:19.981Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T22:38:19.981Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [LoginResponseDTO(token=eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJBZG1pbiIsImlhdCI6MTc2OTgxMjY5OSwiZXhwIjoxNzY5 (truncated)...]
Hibernate: 
    insert 
    into
        product
        (current_stock, name, product_code, type, unit_of_measure, unit_price, version) 
    values
        (?, ?, ?, ?, ?, ?, ?)
Hibernate: 
    insert 
    into
        order_header
        (order_date, status, user_id, version) 
    values
        (?, ?, ?, ?)
2026-01-30T22:38:19.985Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Securing POST /api/order-details
Hibernate: 
    select
        u1_0.user_id,
        u1_0.email,
        u1_0.name,
        u1_0.password,
        u1_0.role 
    from
        users u1_0 
    where
        u1_0.name=?
2026-01-30T22:38:19.988Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Secured POST /api/order-details
2026-01-30T22:38:19.988Z DEBUG 372594 --- [inventory] [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.economatom.inventory.controller.OrderDetailController#create(OrderDetailRequestDTO)
2026-01-30T22:38:19.989Z DEBUG 372594 --- [inventory] [           main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [OrderDetailRequestDTO(orderId=1, productId=1, quantity=2.5)]
Hibernate: 
    select
        o1_0.order_id,
        o1_0.order_date,
        o1_0.status,
        o1_0.user_id,
        o1_0.version 
    from
        order_header o1_0 
    where
        o1_0.order_id=?
Hibernate: 
    select
        p1_0.product_id,
        p1_0.current_stock,
        p1_0.name,
        p1_0.product_code,
        p1_0.type,
        p1_0.unit_of_measure,
        p1_0.unit_price,
        p1_0.version 
    from
        product p1_0 
    where
        p1_0.product_id=?
Hibernate: 
    select
        od1_0.order_id,
        od1_0.product_id,
        od1_0.requested_quantity,
        od1_0.received_quantity 
    from
        order_detail od1_0 
    where
        (
            od1_0.order_id, od1_0.product_id
        ) in ((?, ?))
Hibernate: 
    insert 
    into
        order_detail
        (requested_quantity, received_quantity, order_id, product_id) 
    values
        (?, ?, ?, ?)
2026-01-30T22:38:19.996Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T22:38:19.996Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [OrderDetailResponseDTO(orderId=1, productId=1, productName=Producto test, quantity=2.5, quantityRece (truncated)...]
2026-01-30T22:38:19.997Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Securing GET /api/order-details
Hibernate: 
    select
        u1_0.user_id,
        u1_0.email,
        u1_0.name,
        u1_0.password,
        u1_0.role 
    from
        users u1_0 
    where
        u1_0.name=?
2026-01-30T22:38:20.001Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Secured GET /api/order-details
2026-01-30T22:38:20.002Z DEBUG 372594 --- [inventory] [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.economatom.inventory.controller.OrderDetailController#getAll(Pageable)
Hibernate: 
    select
        od1_0.order_id,
        od1_0.product_id,
        od1_0.requested_quantity,
        od1_0.received_quantity 
    from
        order_detail od1_0 
    offset
        ? rows 
    fetch
        first ? rows only
Hibernate: 
    select
        p1_0.product_id,
        p1_0.current_stock,
        p1_0.name,
        p1_0.product_code,
        p1_0.type,
        p1_0.unit_of_measure,
        p1_0.unit_price,
        p1_0.version 
    from
        product p1_0 
    where
        p1_0.product_id=?
2026-01-30T22:38:20.005Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T22:38:20.005Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [[OrderDetailResponseDTO(orderId=1, productId=1, productName=Producto test, quantity=2.500, quantityR (truncated)...]
Hibernate: 
    
SET
    REFERENTIAL_INTEGRITY FALSE
Hibernate: 
    TRUNCATE TABLE allergen RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE product RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE order_header RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE recipe_component RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE recipe RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE inventory_audit RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE recipe_audit RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE order_detail RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE recipe_allergen RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE users RESTART IDENTITY
Hibernate: 
    
SET
    REFERENTIAL_INTEGRITY TRUE
Hibernate: 
    insert 
    into
        users
        (email, name, password, role) 
    values
        (?, ?, ?, ?)
2026-01-30T22:38:20.055Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Securing POST /api/auth/login
2026-01-30T22:38:20.055Z DEBUG 372594 --- [inventory] [           main] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2026-01-30T22:38:20.055Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Secured POST /api/auth/login
2026-01-30T22:38:20.055Z DEBUG 372594 --- [inventory] [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.economatom.inventory.controller.AuthController#authenticateUser(LoginRequestDTO)
2026-01-30T22:38:20.056Z DEBUG 372594 --- [inventory] [           main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [LoginRequestDTO(name=Admin, password=admin123)]
Hibernate: 
    select
        u1_0.user_id,
        u1_0.email,
        u1_0.name,
        u1_0.password,
        u1_0.role 
    from
        users u1_0 
    where
        u1_0.name=?
2026-01-30T22:38:20.097Z DEBUG 372594 --- [inventory] [           main] o.s.s.a.dao.DaoAuthenticationProvider    : Authenticated user
2026-01-30T22:38:20.098Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T22:38:20.098Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [LoginResponseDTO(token=eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJBZG1pbiIsImlhdCI6MTc2OTgxMjcwMCwiZXhwIjoxNzY5 (truncated)...]
Hibernate: 
    insert 
    into
        product
        (current_stock, name, product_code, type, unit_of_measure, unit_price, version) 
    values
        (?, ?, ?, ?, ?, ?, ?)
Hibernate: 
    insert 
    into
        order_header
        (order_date, status, user_id, version) 
    values
        (?, ?, ?, ?)
2026-01-30T22:38:20.102Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Securing POST /api/order-details
Hibernate: 
    select
        u1_0.user_id,
        u1_0.email,
        u1_0.name,
        u1_0.password,
        u1_0.role 
    from
        users u1_0 
    where
        u1_0.name=?
2026-01-30T22:38:20.105Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Secured POST /api/order-details
2026-01-30T22:38:20.105Z DEBUG 372594 --- [inventory] [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.economatom.inventory.controller.OrderDetailController#create(OrderDetailRequestDTO)
2026-01-30T22:38:20.105Z DEBUG 372594 --- [inventory] [           main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [OrderDetailRequestDTO(orderId=1, productId=1, quantity=2.5)]
Hibernate: 
    select
        o1_0.order_id,
        o1_0.order_date,
        o1_0.status,
        o1_0.user_id,
        o1_0.version 
    from
        order_header o1_0 
    where
        o1_0.order_id=?
Hibernate: 
    select
        p1_0.product_id,
        p1_0.current_stock,
        p1_0.name,
        p1_0.product_code,
        p1_0.type,
        p1_0.unit_of_measure,
        p1_0.unit_price,
        p1_0.version 
    from
        product p1_0 
    where
        p1_0.product_id=?
Hibernate: 
    select
        od1_0.order_id,
        od1_0.product_id,
        od1_0.requested_quantity,
        od1_0.received_quantity 
    from
        order_detail od1_0 
    where
        (
            od1_0.order_id, od1_0.product_id
        ) in ((?, ?))
Hibernate: 
    insert 
    into
        order_detail
        (requested_quantity, received_quantity, order_id, product_id) 
    values
        (?, ?, ?, ?)
2026-01-30T22:38:20.108Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T22:38:20.108Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [OrderDetailResponseDTO(orderId=1, productId=1, productName=Producto test, quantity=2.5, quantityRece (truncated)...]
2026-01-30T22:38:20.109Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Securing GET /api/order-details/order/1
Hibernate: 
    select
        u1_0.user_id,
        u1_0.email,
        u1_0.name,
        u1_0.password,
        u1_0.role 
    from
        users u1_0 
    where
        u1_0.name=?
2026-01-30T22:38:20.112Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Secured GET /api/order-details/order/1
2026-01-30T22:38:20.112Z DEBUG 372594 --- [inventory] [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.economatom.inventory.controller.OrderDetailController#getByOrder(Integer)
Hibernate: 
    select
        o1_0.order_id,
        o1_0.order_date,
        o1_0.status,
        o1_0.user_id,
        o1_0.version 
    from
        order_header o1_0 
    where
        o1_0.order_id=?
Hibernate: 
    select
        od1_0.order_id,
        od1_0.product_id,
        od1_0.requested_quantity,
        od1_0.received_quantity 
    from
        order_detail od1_0 
    where
        od1_0.order_id=?
Hibernate: 
    select
        p1_0.product_id,
        p1_0.current_stock,
        p1_0.name,
        p1_0.product_code,
        p1_0.type,
        p1_0.unit_of_measure,
        p1_0.unit_price,
        p1_0.version 
    from
        product p1_0 
    where
        p1_0.product_id=?
2026-01-30T22:38:20.116Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T22:38:20.116Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [[OrderDetailResponseDTO(orderId=1, productId=1, productName=Producto test, quantity=2.500, quantityR (truncated)...]
Hibernate: 
    
SET
    REFERENTIAL_INTEGRITY FALSE
Hibernate: 
    TRUNCATE TABLE allergen RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE product RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE order_header RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE recipe_component RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE recipe RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE inventory_audit RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE recipe_audit RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE order_detail RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE recipe_allergen RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE users RESTART IDENTITY
Hibernate: 
    
SET
    REFERENTIAL_INTEGRITY TRUE
Hibernate: 
    insert 
    into
        users
        (email, name, password, role) 
    values
        (?, ?, ?, ?)
2026-01-30T22:38:20.164Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Securing POST /api/auth/login
2026-01-30T22:38:20.164Z DEBUG 372594 --- [inventory] [           main] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2026-01-30T22:38:20.164Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Secured POST /api/auth/login
2026-01-30T22:38:20.164Z DEBUG 372594 --- [inventory] [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.economatom.inventory.controller.AuthController#authenticateUser(LoginRequestDTO)
2026-01-30T22:38:20.164Z DEBUG 372594 --- [inventory] [           main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [LoginRequestDTO(name=Admin, password=admin123)]
Hibernate: 
    select
        u1_0.user_id,
        u1_0.email,
        u1_0.name,
        u1_0.password,
        u1_0.role 
    from
        users u1_0 
    where
        u1_0.name=?
2026-01-30T22:38:20.205Z DEBUG 372594 --- [inventory] [           main] o.s.s.a.dao.DaoAuthenticationProvider    : Authenticated user
2026-01-30T22:38:20.206Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T22:38:20.206Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [LoginResponseDTO(token=eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJBZG1pbiIsImlhdCI6MTc2OTgxMjcwMCwiZXhwIjoxNzY5 (truncated)...]
Hibernate: 
    insert 
    into
        product
        (current_stock, name, product_code, type, unit_of_measure, unit_price, version) 
    values
        (?, ?, ?, ?, ?, ?, ?)
Hibernate: 
    insert 
    into
        order_header
        (order_date, status, user_id, version) 
    values
        (?, ?, ?, ?)
2026-01-30T22:38:20.210Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Securing POST /api/order-details
Hibernate: 
    select
        u1_0.user_id,
        u1_0.email,
        u1_0.name,
        u1_0.password,
        u1_0.role 
    from
        users u1_0 
    where
        u1_0.name=?
2026-01-30T22:38:20.213Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Secured POST /api/order-details
2026-01-30T22:38:20.213Z DEBUG 372594 --- [inventory] [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.economatom.inventory.controller.OrderDetailController#create(OrderDetailRequestDTO)
2026-01-30T22:38:20.213Z DEBUG 372594 --- [inventory] [           main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [OrderDetailRequestDTO(orderId=1, productId=1, quantity=2.5)]
Hibernate: 
    select
        o1_0.order_id,
        o1_0.order_date,
        o1_0.status,
        o1_0.user_id,
        o1_0.version 
    from
        order_header o1_0 
    where
        o1_0.order_id=?
Hibernate: 
    select
        p1_0.product_id,
        p1_0.current_stock,
        p1_0.name,
        p1_0.product_code,
        p1_0.type,
        p1_0.unit_of_measure,
        p1_0.unit_price,
        p1_0.version 
    from
        product p1_0 
    where
        p1_0.product_id=?
Hibernate: 
    select
        od1_0.order_id,
        od1_0.product_id,
        od1_0.requested_quantity,
        od1_0.received_quantity 
    from
        order_detail od1_0 
    where
        (
            od1_0.order_id, od1_0.product_id
        ) in ((?, ?))
Hibernate: 
    insert 
    into
        order_detail
        (requested_quantity, received_quantity, order_id, product_id) 
    values
        (?, ?, ?, ?)
2026-01-30T22:38:20.217Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T22:38:20.217Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [OrderDetailResponseDTO(orderId=1, productId=1, productName=Producto test, quantity=2.5, quantityRece (truncated)...]
2026-01-30T22:38:20.218Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Securing PUT /api/order-details/1/1
Hibernate: 
    select
        u1_0.user_id,
        u1_0.email,
        u1_0.name,
        u1_0.password,
        u1_0.role 
    from
        users u1_0 
    where
        u1_0.name=?
2026-01-30T22:38:20.221Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Secured PUT /api/order-details/1/1
2026-01-30T22:38:20.221Z DEBUG 372594 --- [inventory] [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.economatom.inventory.controller.OrderDetailController#update(Integer, Integer, OrderDetailRequestDTO)
2026-01-30T22:38:20.222Z DEBUG 372594 --- [inventory] [           main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [OrderDetailRequestDTO(orderId=1, productId=1, quantity=3.5)]
Hibernate: 
    select
        od1_0.order_id,
        od1_0.product_id,
        od1_0.requested_quantity,
        od1_0.received_quantity 
    from
        order_detail od1_0 
    where
        (
            od1_0.order_id, od1_0.product_id
        ) in ((?, ?))
Hibernate: 
    select
        p1_0.product_id,
        p1_0.current_stock,
        p1_0.name,
        p1_0.product_code,
        p1_0.type,
        p1_0.unit_of_measure,
        p1_0.unit_price,
        p1_0.version 
    from
        product p1_0 
    where
        p1_0.product_id=?
Hibernate: 
    update
        order_detail 
    set
        requested_quantity=?,
        received_quantity=? 
    where
        order_id=? 
        and product_id=?
2026-01-30T22:38:20.225Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T22:38:20.225Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [OrderDetailResponseDTO(orderId=1, productId=1, productName=Producto test, quantity=3.5, quantityRece (truncated)...]
Hibernate: 
    
SET
    REFERENTIAL_INTEGRITY FALSE
Hibernate: 
    TRUNCATE TABLE allergen RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE product RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE order_header RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE recipe_component RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE recipe RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE inventory_audit RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE recipe_audit RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE order_detail RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE recipe_allergen RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE users RESTART IDENTITY
Hibernate: 
    
SET
    REFERENTIAL_INTEGRITY TRUE
Hibernate: 
    insert 
    into
        users
        (email, name, password, role) 
    values
        (?, ?, ?, ?)
2026-01-30T22:38:20.274Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Securing POST /api/auth/login
2026-01-30T22:38:20.274Z DEBUG 372594 --- [inventory] [           main] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2026-01-30T22:38:20.274Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Secured POST /api/auth/login
2026-01-30T22:38:20.274Z DEBUG 372594 --- [inventory] [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.economatom.inventory.controller.AuthController#authenticateUser(LoginRequestDTO)
2026-01-30T22:38:20.275Z DEBUG 372594 --- [inventory] [           main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [LoginRequestDTO(name=Admin, password=admin123)]
Hibernate: 
    select
        u1_0.user_id,
        u1_0.email,
        u1_0.name,
        u1_0.password,
        u1_0.role 
    from
        users u1_0 
    where
        u1_0.name=?
2026-01-30T22:38:20.315Z DEBUG 372594 --- [inventory] [           main] o.s.s.a.dao.DaoAuthenticationProvider    : Authenticated user
2026-01-30T22:38:20.316Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T22:38:20.316Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [LoginResponseDTO(token=eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJBZG1pbiIsImlhdCI6MTc2OTgxMjcwMCwiZXhwIjoxNzY5 (truncated)...]
Hibernate: 
    insert 
    into
        product
        (current_stock, name, product_code, type, unit_of_measure, unit_price, version) 
    values
        (?, ?, ?, ?, ?, ?, ?)
Hibernate: 
    insert 
    into
        order_header
        (order_date, status, user_id, version) 
    values
        (?, ?, ?, ?)
2026-01-30T22:38:20.319Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Securing POST /api/order-details
Hibernate: 
    select
        u1_0.user_id,
        u1_0.email,
        u1_0.name,
        u1_0.password,
        u1_0.role 
    from
        users u1_0 
    where
        u1_0.name=?
2026-01-30T22:38:20.322Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Secured POST /api/order-details
2026-01-30T22:38:20.322Z DEBUG 372594 --- [inventory] [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.economatom.inventory.controller.OrderDetailController#create(OrderDetailRequestDTO)
2026-01-30T22:38:20.322Z DEBUG 372594 --- [inventory] [           main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [OrderDetailRequestDTO(orderId=1, productId=1, quantity=2.5)]
Hibernate: 
    select
        o1_0.order_id,
        o1_0.order_date,
        o1_0.status,
        o1_0.user_id,
        o1_0.version 
    from
        order_header o1_0 
    where
        o1_0.order_id=?
Hibernate: 
    select
        p1_0.product_id,
        p1_0.current_stock,
        p1_0.name,
        p1_0.product_code,
        p1_0.type,
        p1_0.unit_of_measure,
        p1_0.unit_price,
        p1_0.version 
    from
        product p1_0 
    where
        p1_0.product_id=?
Hibernate: 
    select
        od1_0.order_id,
        od1_0.product_id,
        od1_0.requested_quantity,
        od1_0.received_quantity 
    from
        order_detail od1_0 
    where
        (
            od1_0.order_id, od1_0.product_id
        ) in ((?, ?))
Hibernate: 
    insert 
    into
        order_detail
        (requested_quantity, received_quantity, order_id, product_id) 
    values
        (?, ?, ?, ?)
2026-01-30T22:38:20.325Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T22:38:20.325Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [OrderDetailResponseDTO(orderId=1, productId=1, productName=Producto test, quantity=2.5, quantityRece (truncated)...]
Hibernate: 
    
SET
    REFERENTIAL_INTEGRITY FALSE
Hibernate: 
    TRUNCATE TABLE allergen RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE product RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE order_header RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE recipe_component RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE recipe RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE inventory_audit RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE recipe_audit RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE order_detail RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE recipe_allergen RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE users RESTART IDENTITY
Hibernate: 
    
SET
    REFERENTIAL_INTEGRITY TRUE
Hibernate: 
    insert 
    into
        users
        (email, name, password, role) 
    values
        (?, ?, ?, ?)
2026-01-30T22:38:20.371Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Securing POST /api/auth/login
2026-01-30T22:38:20.371Z DEBUG 372594 --- [inventory] [           main] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2026-01-30T22:38:20.371Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Secured POST /api/auth/login
2026-01-30T22:38:20.372Z DEBUG 372594 --- [inventory] [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.economatom.inventory.controller.AuthController#authenticateUser(LoginRequestDTO)
2026-01-30T22:38:20.372Z DEBUG 372594 --- [inventory] [           main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [LoginRequestDTO(name=Admin, password=admin123)]
Hibernate: 
    select
        u1_0.user_id,
        u1_0.email,
        u1_0.name,
        u1_0.password,
        u1_0.role 
    from
        users u1_0 
    where
        u1_0.name=?
2026-01-30T22:38:20.413Z DEBUG 372594 --- [inventory] [           main] o.s.s.a.dao.DaoAuthenticationProvider    : Authenticated user
2026-01-30T22:38:20.413Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T22:38:20.413Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [LoginResponseDTO(token=eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJBZG1pbiIsImlhdCI6MTc2OTgxMjcwMCwiZXhwIjoxNzY5 (truncated)...]
Hibernate: 
    insert 
    into
        product
        (current_stock, name, product_code, type, unit_of_measure, unit_price, version) 
    values
        (?, ?, ?, ?, ?, ?, ?)
Hibernate: 
    insert 
    into
        order_header
        (order_date, status, user_id, version) 
    values
        (?, ?, ?, ?)
2026-01-30T22:38:20.417Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Securing POST /api/order-details
Hibernate: 
    select
        u1_0.user_id,
        u1_0.email,
        u1_0.name,
        u1_0.password,
        u1_0.role 
    from
        users u1_0 
    where
        u1_0.name=?
2026-01-30T22:38:20.420Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Secured POST /api/order-details
2026-01-30T22:38:20.420Z DEBUG 372594 --- [inventory] [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.economatom.inventory.controller.OrderDetailController#create(OrderDetailRequestDTO)
2026-01-30T22:38:20.421Z DEBUG 372594 --- [inventory] [           main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [OrderDetailRequestDTO(orderId=1, productId=1, quantity=2.5)]
Hibernate: 
    select
        o1_0.order_id,
        o1_0.order_date,
        o1_0.status,
        o1_0.user_id,
        o1_0.version 
    from
        order_header o1_0 
    where
        o1_0.order_id=?
Hibernate: 
    select
        p1_0.product_id,
        p1_0.current_stock,
        p1_0.name,
        p1_0.product_code,
        p1_0.type,
        p1_0.unit_of_measure,
        p1_0.unit_price,
        p1_0.version 
    from
        product p1_0 
    where
        p1_0.product_id=?
Hibernate: 
    select
        od1_0.order_id,
        od1_0.product_id,
        od1_0.requested_quantity,
        od1_0.received_quantity 
    from
        order_detail od1_0 
    where
        (
            od1_0.order_id, od1_0.product_id
        ) in ((?, ?))
Hibernate: 
    insert 
    into
        order_detail
        (requested_quantity, received_quantity, order_id, product_id) 
    values
        (?, ?, ?, ?)
2026-01-30T22:38:20.423Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T22:38:20.423Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [OrderDetailResponseDTO(orderId=1, productId=1, productName=Producto test, quantity=2.5, quantityRece (truncated)...]
2026-01-30T22:38:20.424Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Securing DELETE /api/order-details/1/1
Hibernate: 
    select
        u1_0.user_id,
        u1_0.email,
        u1_0.name,
        u1_0.password,
        u1_0.role 
    from
        users u1_0 
    where
        u1_0.name=?
2026-01-30T22:38:20.426Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Secured DELETE /api/order-details/1/1
2026-01-30T22:38:20.426Z DEBUG 372594 --- [inventory] [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.economatom.inventory.controller.OrderDetailController#delete(Integer, Integer)
Hibernate: 
    select
        od1_0.order_id,
        od1_0.product_id,
        od1_0.requested_quantity,
        od1_0.received_quantity 
    from
        order_detail od1_0 
    where
        (
            od1_0.order_id, od1_0.product_id
        ) in ((?, ?))
Hibernate: 
    select
        p1_0.product_id,
        p1_0.current_stock,
        p1_0.name,
        p1_0.product_code,
        p1_0.type,
        p1_0.unit_of_measure,
        p1_0.unit_price,
        p1_0.version 
    from
        product p1_0 
    where
        p1_0.product_id=?
Hibernate: 
    delete 
    from
        order_detail 
    where
        order_id=? 
        and product_id=?
2026-01-30T22:38:20.429Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/octet-stream', given [*/*] and supported [*/*]
2026-01-30T22:38:20.430Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Securing GET /api/order-details/order/1
Hibernate: 
    select
        u1_0.user_id,
        u1_0.email,
        u1_0.name,
        u1_0.password,
        u1_0.role 
    from
        users u1_0 
    where
        u1_0.name=?
2026-01-30T22:38:20.432Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Secured GET /api/order-details/order/1
2026-01-30T22:38:20.432Z DEBUG 372594 --- [inventory] [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.economatom.inventory.controller.OrderDetailController#getByOrder(Integer)
Hibernate: 
    select
        o1_0.order_id,
        o1_0.order_date,
        o1_0.status,
        o1_0.user_id,
        o1_0.version 
    from
        order_header o1_0 
    where
        o1_0.order_id=?
Hibernate: 
    select
        od1_0.order_id,
        od1_0.product_id,
        od1_0.requested_quantity,
        od1_0.received_quantity 
    from
        order_detail od1_0 
    where
        od1_0.order_id=?
2026-01-30T22:38:20.433Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T22:38:20.433Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [[]]
[INFO] Tests run: 5, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.545 s -- in com.economatom.inventory.controller.OrderDetailControllerIntegrationTest
[INFO] Running com.economatom.inventory.controller.ProductControllerEdgeCasesTest
2026-01-30T22:38:20.437Z  INFO 372594 --- [inventory] [           main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [com.economatom.inventory.controller.ProductControllerEdgeCasesTest]: ProductControllerEdgeCasesTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2026-01-30T22:38:20.438Z  INFO 372594 --- [inventory] [           main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration com.economatom.inventory.InventoryApplication for test class com.economatom.inventory.controller.ProductControllerEdgeCasesTest
Hibernate: 
    
SET
    REFERENTIAL_INTEGRITY FALSE
Hibernate: 
    TRUNCATE TABLE allergen RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE product RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE order_header RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE recipe_component RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE recipe RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE inventory_audit RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE recipe_audit RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE order_detail RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE recipe_allergen RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE users RESTART IDENTITY
Hibernate: 
    
SET
    REFERENTIAL_INTEGRITY TRUE
Hibernate: 
    insert 
    into
        users
        (email, name, password, role) 
    values
        (?, ?, ?, ?)
2026-01-30T22:38:20.484Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Securing POST /api/auth/login
2026-01-30T22:38:20.484Z DEBUG 372594 --- [inventory] [           main] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2026-01-30T22:38:20.485Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Secured POST /api/auth/login
2026-01-30T22:38:20.485Z DEBUG 372594 --- [inventory] [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.economatom.inventory.controller.AuthController#authenticateUser(LoginRequestDTO)
2026-01-30T22:38:20.485Z DEBUG 372594 --- [inventory] [           main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [LoginRequestDTO(name=Admin, password=admin123)]
Hibernate: 
    select
        u1_0.user_id,
        u1_0.email,
        u1_0.name,
        u1_0.password,
        u1_0.role 
    from
        users u1_0 
    where
        u1_0.name=?
2026-01-30T22:38:20.526Z DEBUG 372594 --- [inventory] [           main] o.s.s.a.dao.DaoAuthenticationProvider    : Authenticated user
2026-01-30T22:38:20.527Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T22:38:20.527Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [LoginResponseDTO(token=eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJBZG1pbiIsImlhdCI6MTc2OTgxMjcwMCwiZXhwIjoxNzY5 (truncated)...]
2026-01-30T22:38:20.529Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Securing POST /api/products
Hibernate: 
    select
        u1_0.user_id,
        u1_0.email,
        u1_0.name,
        u1_0.password,
        u1_0.role 
    from
        users u1_0 
    where
        u1_0.name=?
2026-01-30T22:38:20.532Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Secured POST /api/products
2026-01-30T22:38:20.532Z DEBUG 372594 --- [inventory] [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.economatom.inventory.controller.ProductController#createProduct(ProductRequestDTO)
2026-01-30T22:38:20.533Z DEBUG 372594 --- [inventory] [           main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [ProductRequestDTO(name=Test Product, type=INGREDIENT, unit=INVALID, unitPrice=10.0, productCode=TEST (truncated)...]
Hibernate: 
    select
        p1_0.product_id 
    from
        product p1_0 
    where
        p1_0.name=? 
    fetch
        first ? rows only
2026-01-30T22:38:20.538Z DEBUG 372594 --- [inventory] [           main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.economatom.inventory.exception.GlobalExceptionHandler#handleInvalidOperationException(InvalidOperationException)
2026-01-30T22:38:20.538Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T22:38:20.538Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ErrorResponse(status=400, message=Unidad de medida invlida. Debe ser: KG, G, L, ML o UND, timestamp (truncated)...]
2026-01-30T22:38:20.538Z DEBUG 372594 --- [inventory] [           main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [com.economatom.inventory.exception.InvalidOperationException: Unidad de medida invlida. Debe ser: KG, G, L, ML o UND]
Hibernate: 
    
SET
    REFERENTIAL_INTEGRITY FALSE
Hibernate: 
    TRUNCATE TABLE allergen RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE product RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE order_header RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE recipe_component RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE recipe RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE inventory_audit RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE recipe_audit RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE order_detail RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE recipe_allergen RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE users RESTART IDENTITY
Hibernate: 
    
SET
    REFERENTIAL_INTEGRITY TRUE
Hibernate: 
    insert 
    into
        users
        (email, name, password, role) 
    values
        (?, ?, ?, ?)
2026-01-30T22:38:20.584Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Securing POST /api/auth/login
2026-01-30T22:38:20.585Z DEBUG 372594 --- [inventory] [           main] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2026-01-30T22:38:20.585Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Secured POST /api/auth/login
2026-01-30T22:38:20.585Z DEBUG 372594 --- [inventory] [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.economatom.inventory.controller.AuthController#authenticateUser(LoginRequestDTO)
2026-01-30T22:38:20.585Z DEBUG 372594 --- [inventory] [           main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [LoginRequestDTO(name=Admin, password=admin123)]
Hibernate: 
    select
        u1_0.user_id,
        u1_0.email,
        u1_0.name,
        u1_0.password,
        u1_0.role 
    from
        users u1_0 
    where
        u1_0.name=?
2026-01-30T22:38:20.626Z DEBUG 372594 --- [inventory] [           main] o.s.s.a.dao.DaoAuthenticationProvider    : Authenticated user
2026-01-30T22:38:20.627Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T22:38:20.627Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [LoginResponseDTO(token=eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJBZG1pbiIsImlhdCI6MTc2OTgxMjcwMCwiZXhwIjoxNzY5 (truncated)...]
2026-01-30T22:38:20.628Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Securing POST /api/products
Hibernate: 
    select
        u1_0.user_id,
        u1_0.email,
        u1_0.name,
        u1_0.password,
        u1_0.role 
    from
        users u1_0 
    where
        u1_0.name=?
2026-01-30T22:38:20.631Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Secured POST /api/products
2026-01-30T22:38:20.631Z DEBUG 372594 --- [inventory] [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.economatom.inventory.controller.ProductController#createProduct(ProductRequestDTO)
2026-01-30T22:38:20.631Z DEBUG 372594 --- [inventory] [           main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [ProductRequestDTO(name=Product 1, type=INGREDIENT, unit=KG, unitPrice=10.0, productCode=CODE1, curre (truncated)...]
Hibernate: 
    select
        p1_0.product_id 
    from
        product p1_0 
    where
        p1_0.name=? 
    fetch
        first ? rows only
Hibernate: 
    insert 
    into
        product
        (current_stock, name, product_code, type, unit_of_measure, unit_price, version) 
    values
        (?, ?, ?, ?, ?, ?, ?)
2026-01-30T22:38:20.635Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T22:38:20.636Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ProductResponseDTO(id=1, name=Product 1, type=INGREDIENT, unit=KG, unitPrice=10.0, productCode=CODE1 (truncated)...]

MockHttpServletRequest:
      HTTP Method = POST
      Request URI = /api/auth/login
       Parameters = {}
          Headers = [Content-Type:"application/json;charset=UTF-8", Content-Length:"38"]
             Body = {"name":"Admin","password":"admin123"}
    Session Attrs = {}

Handler:
             Type = com.economatom.inventory.controller.AuthController
           Method = com.economatom.inventory.controller.AuthController#authenticateUser(LoginRequestDTO)

Async:
    Async started = false
     Async result = null

Resolved Exception:
             Type = null

ModelAndView:
        View name = null
             View = null
            Model = null

FlashMap:
       Attributes = null

MockHttpServletResponse:
           Status = 200
    Error message = null
          Headers = [Vary:"Origin", "Access-Control-Request-Method", "Access-Control-Request-Headers", Content-Type:"application/json", X-Content-Type-Options:"nosniff", X-XSS-Protection:"0", Cache-Control:"no-cache, no-store, max-age=0, must-revalidate", Pragma:"no-cache", Expires:"0", X-Frame-Options:"DENY"]
     Content type = application/json
             Body = {"token":"eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJBZG1pbiIsImlhdCI6MTc2OTgxMjcwMCwiZXhwIjoxNzY5ODEzNTAwfQ.FKzSuUXVmXI0ZTY5EDn5jDjjrYj1rL0hfk5LEN2XPXY"}
    Forwarded URL = null
   Redirected URL = null
          Cookies = []

MockHttpServletRequest:
      HTTP Method = POST
      Request URI = /api/products
       Parameters = {}
          Headers = [Content-Type:"application/json;charset=UTF-8", Authorization:"Bearer eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJBZG1pbiIsImlhdCI6MTc2OTgxMjcwMCwiZXhwIjoxNzY5ODEzNTAwfQ.FKzSuUXVmXI0ZTY5EDn5jDjjrYj1rL0hfk5LEN2XPXY", Content-Length:"110"]
             Body = {"name":"Product 1","type":"INGREDIENT","unit":"KG","unitPrice":10.0,"productCode":"CODE1","currentStock":5.0}
    Session Attrs = {}

Handler:
             Type = com.economatom.inventory.controller.ProductController
           Method = com.economatom.inventory.controller.ProductController#createProduct(ProductRequestDTO)

Async:
    Async started = false
     Async result = null

Resolved Exception:
             Type = null

ModelAndView:
        View name = null
             View = null
            Model = null

FlashMap:
       Attributes = null

MockHttpServletResponse:
           Status = 200
    Error message = null
          Headers = [Vary:"Origin", "Access-Control-Request-Method", "Access-Control-Request-Headers", Content-Type:"application/json", X-Content-Type-Options:"nosniff", X-XSS-Protection:"0", Cache-Control:"no-cache, no-store, max-age=0, must-revalidate", Pragma:"no-cache", Expires:"0", X-Frame-Options:"DENY"]
     Content type = application/json
             Body = {"id":1,"name":"Product 1","type":"INGREDIENT","unit":"KG","unitPrice":10.0,"productCode":"CODE1","currentStock":5.0}
    Forwarded URL = null
   Redirected URL = null
          Cookies = []
Hibernate: 
    
SET
    REFERENTIAL_INTEGRITY FALSE
Hibernate: 
    TRUNCATE TABLE allergen RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE product RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE order_header RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE recipe_component RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE recipe RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE inventory_audit RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE recipe_audit RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE order_detail RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE recipe_allergen RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE users RESTART IDENTITY
Hibernate: 
    
SET
    REFERENTIAL_INTEGRITY TRUE
Hibernate: 
    insert 
    into
        users
        (email, name, password, role) 
    values
        (?, ?, ?, ?)
2026-01-30T22:38:20.682Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Securing POST /api/auth/login
2026-01-30T22:38:20.683Z DEBUG 372594 --- [inventory] [           main] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2026-01-30T22:38:20.683Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Secured POST /api/auth/login
2026-01-30T22:38:20.683Z DEBUG 372594 --- [inventory] [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.economatom.inventory.controller.AuthController#authenticateUser(LoginRequestDTO)
2026-01-30T22:38:20.683Z DEBUG 372594 --- [inventory] [           main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [LoginRequestDTO(name=Admin, password=admin123)]
Hibernate: 
    select
        u1_0.user_id,
        u1_0.email,
        u1_0.name,
        u1_0.password,
        u1_0.role 
    from
        users u1_0 
    where
        u1_0.name=?
2026-01-30T22:38:20.724Z DEBUG 372594 --- [inventory] [           main] o.s.s.a.dao.DaoAuthenticationProvider    : Authenticated user
2026-01-30T22:38:20.725Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T22:38:20.725Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [LoginResponseDTO(token=eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJBZG1pbiIsImlhdCI6MTc2OTgxMjcwMCwiZXhwIjoxNzY5 (truncated)...]
2026-01-30T22:38:20.726Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Securing POST /api/products
Hibernate: 
    select
        u1_0.user_id,
        u1_0.email,
        u1_0.name,
        u1_0.password,
        u1_0.role 
    from
        users u1_0 
    where
        u1_0.name=?
2026-01-30T22:38:20.729Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Secured POST /api/products
2026-01-30T22:38:20.729Z DEBUG 372594 --- [inventory] [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.economatom.inventory.controller.ProductController#createProduct(ProductRequestDTO)
2026-01-30T22:38:20.729Z DEBUG 372594 --- [inventory] [           main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [ProductRequestDTO(name=Test Product, type=INGREDIENT, unit=KG, unitPrice=-10.0, productCode=TEST001, (truncated)...]
2026-01-30T22:38:20.730Z DEBUG 372594 --- [inventory] [           main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.economatom.inventory.exception.GlobalExceptionHandler#handleValidationExceptions(MethodArgumentNotValidException)
2026-01-30T22:38:20.730Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T22:38:20.730Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{unitPrice=El precio debe ser mayor que cero}]
2026-01-30T22:38:20.731Z DEBUG 372594 --- [inventory] [           main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.economatom.inventory.dto.response.ProductResponseDTO> com.economatom.inventory.controller.ProductController.createProduct(com.economatom.inventory.dto.request.ProductRequestDTO): [Field error in object 'productRequestDTO' on field 'unitPrice': rejected value [-10.0]; codes [DecimalMin.productRequestDTO.unitPrice,DecimalMin.unitPrice,DecimalMin.java.math.BigDecimal,DecimalMin]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [productRequestDTO.unitPrice,unitPrice]; arguments []; default message [unitPrice],true,0.01]; default message [El precio debe ser mayor que cero]] ]
Hibernate: 
    
SET
    REFERENTIAL_INTEGRITY FALSE
Hibernate: 
    TRUNCATE TABLE allergen RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE product RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE order_header RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE recipe_component RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE recipe RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE inventory_audit RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE recipe_audit RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE order_detail RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE recipe_allergen RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE users RESTART IDENTITY
Hibernate: 
    
SET
    REFERENTIAL_INTEGRITY TRUE
Hibernate: 
    insert 
    into
        users
        (email, name, password, role) 
    values
        (?, ?, ?, ?)
2026-01-30T22:38:20.776Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Securing POST /api/auth/login
2026-01-30T22:38:20.776Z DEBUG 372594 --- [inventory] [           main] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2026-01-30T22:38:20.776Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Secured POST /api/auth/login
2026-01-30T22:38:20.777Z DEBUG 372594 --- [inventory] [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.economatom.inventory.controller.AuthController#authenticateUser(LoginRequestDTO)
2026-01-30T22:38:20.777Z DEBUG 372594 --- [inventory] [           main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [LoginRequestDTO(name=Admin, password=admin123)]
Hibernate: 
    select
        u1_0.user_id,
        u1_0.email,
        u1_0.name,
        u1_0.password,
        u1_0.role 
    from
        users u1_0 
    where
        u1_0.name=?
2026-01-30T22:38:20.818Z DEBUG 372594 --- [inventory] [           main] o.s.s.a.dao.DaoAuthenticationProvider    : Authenticated user
2026-01-30T22:38:20.819Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T22:38:20.819Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [LoginResponseDTO(token=eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJBZG1pbiIsImlhdCI6MTc2OTgxMjcwMCwiZXhwIjoxNzY5 (truncated)...]
2026-01-30T22:38:20.820Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Securing GET /api/products/99999
Hibernate: 
    select
        u1_0.user_id,
        u1_0.email,
        u1_0.name,
        u1_0.password,
        u1_0.role 
    from
        users u1_0 
    where
        u1_0.name=?
2026-01-30T22:38:20.823Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Secured GET /api/products/99999
2026-01-30T22:38:20.823Z DEBUG 372594 --- [inventory] [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.economatom.inventory.controller.ProductController#getProductById(Integer)
Hibernate: 
    select
        p1_0.product_id,
        p1_0.current_stock,
        p1_0.name,
        p1_0.product_code,
        p1_0.type,
        p1_0.unit_of_measure,
        p1_0.unit_price,
        p1_0.version 
    from
        product p1_0 
    where
        p1_0.product_id=?
2026-01-30T22:38:20.824Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T22:38:20.824Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Nothing to write: null body
Hibernate: 
    
SET
    REFERENTIAL_INTEGRITY FALSE
Hibernate: 
    TRUNCATE TABLE allergen RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE product RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE order_header RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE recipe_component RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE recipe RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE inventory_audit RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE recipe_audit RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE order_detail RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE recipe_allergen RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE users RESTART IDENTITY
Hibernate: 
    
SET
    REFERENTIAL_INTEGRITY TRUE
Hibernate: 
    insert 
    into
        users
        (email, name, password, role) 
    values
        (?, ?, ?, ?)
2026-01-30T22:38:20.871Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Securing POST /api/auth/login
2026-01-30T22:38:20.871Z DEBUG 372594 --- [inventory] [           main] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2026-01-30T22:38:20.871Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Secured POST /api/auth/login
2026-01-30T22:38:20.871Z DEBUG 372594 --- [inventory] [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.economatom.inventory.controller.AuthController#authenticateUser(LoginRequestDTO)
2026-01-30T22:38:20.872Z DEBUG 372594 --- [inventory] [           main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [LoginRequestDTO(name=Admin, password=admin123)]
Hibernate: 
    select
        u1_0.user_id,
        u1_0.email,
        u1_0.name,
        u1_0.password,
        u1_0.role 
    from
        users u1_0 
    where
        u1_0.name=?
2026-01-30T22:38:20.913Z DEBUG 372594 --- [inventory] [           main] o.s.s.a.dao.DaoAuthenticationProvider    : Authenticated user
2026-01-30T22:38:20.914Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T22:38:20.914Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [LoginResponseDTO(token=eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJBZG1pbiIsImlhdCI6MTc2OTgxMjcwMCwiZXhwIjoxNzY5 (truncated)...]
2026-01-30T22:38:20.915Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Securing POST /api/products
2026-01-30T22:38:20.916Z DEBUG 372594 --- [inventory] [           main] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
Hibernate: 
    
SET
    REFERENTIAL_INTEGRITY FALSE
Hibernate: 
    TRUNCATE TABLE allergen RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE product RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE order_header RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE recipe_component RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE recipe RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE inventory_audit RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE recipe_audit RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE order_detail RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE recipe_allergen RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE users RESTART IDENTITY
Hibernate: 
    
SET
    REFERENTIAL_INTEGRITY TRUE
Hibernate: 
    insert 
    into
        users
        (email, name, password, role) 
    values
        (?, ?, ?, ?)
2026-01-30T22:38:20.961Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Securing POST /api/auth/login
2026-01-30T22:38:20.961Z DEBUG 372594 --- [inventory] [           main] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2026-01-30T22:38:20.962Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Secured POST /api/auth/login
2026-01-30T22:38:20.962Z DEBUG 372594 --- [inventory] [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.economatom.inventory.controller.AuthController#authenticateUser(LoginRequestDTO)
2026-01-30T22:38:20.962Z DEBUG 372594 --- [inventory] [           main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [LoginRequestDTO(name=Admin, password=admin123)]
Hibernate: 
    select
        u1_0.user_id,
        u1_0.email,
        u1_0.name,
        u1_0.password,
        u1_0.role 
    from
        users u1_0 
    where
        u1_0.name=?
2026-01-30T22:38:21.003Z DEBUG 372594 --- [inventory] [           main] o.s.s.a.dao.DaoAuthenticationProvider    : Authenticated user
2026-01-30T22:38:21.004Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T22:38:21.004Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [LoginResponseDTO(token=eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJBZG1pbiIsImlhdCI6MTc2OTgxMjcwMSwiZXhwIjoxNzY5 (truncated)...]
2026-01-30T22:38:21.005Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Securing DELETE /api/products/99999
Hibernate: 
    select
        u1_0.user_id,
        u1_0.email,
        u1_0.name,
        u1_0.password,
        u1_0.role 
    from
        users u1_0 
    where
        u1_0.name=?
2026-01-30T22:38:21.007Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Secured DELETE /api/products/99999
2026-01-30T22:38:21.008Z DEBUG 372594 --- [inventory] [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.economatom.inventory.controller.ProductController#deleteProduct(Integer)
Hibernate: 
    select
        p1_0.product_id,
        p1_0.current_stock,
        p1_0.name,
        p1_0.product_code,
        p1_0.type,
        p1_0.unit_of_measure,
        p1_0.unit_price,
        p1_0.version 
    from
        product p1_0 
    where
        p1_0.product_id=?
2026-01-30T22:38:21.017Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T22:38:21.018Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Nothing to write: null body

MockHttpServletRequest:
      HTTP Method = POST
      Request URI = /api/auth/login
       Parameters = {}
          Headers = [Content-Type:"application/json;charset=UTF-8", Content-Length:"38"]
             Body = {"name":"Admin","password":"admin123"}
    Session Attrs = {}

Handler:
             Type = com.economatom.inventory.controller.AuthController
           Method = com.economatom.inventory.controller.AuthController#authenticateUser(LoginRequestDTO)

Async:
    Async started = false
     Async result = null

Resolved Exception:
             Type = null

ModelAndView:
        View name = null
             View = null
            Model = null

FlashMap:
       Attributes = null

MockHttpServletResponse:
           Status = 200
    Error message = null
          Headers = [Vary:"Origin", "Access-Control-Request-Method", "Access-Control-Request-Headers", Content-Type:"application/json", X-Content-Type-Options:"nosniff", X-XSS-Protection:"0", Cache-Control:"no-cache, no-store, max-age=0, must-revalidate", Pragma:"no-cache", Expires:"0", X-Frame-Options:"DENY"]
     Content type = application/json
             Body = {"token":"eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJBZG1pbiIsImlhdCI6MTc2OTgxMjcwMSwiZXhwIjoxNzY5ODEzNTAxfQ.dly7SKVmlspxFPrkixPgb9g29J22FrjilepPP7_tcEE"}
    Forwarded URL = null
   Redirected URL = null
          Cookies = []

MockHttpServletRequest:
      HTTP Method = DELETE
      Request URI = /api/products/99999
       Parameters = {}
          Headers = [Authorization:"Bearer eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJBZG1pbiIsImlhdCI6MTc2OTgxMjcwMSwiZXhwIjoxNzY5ODEzNTAxfQ.dly7SKVmlspxFPrkixPgb9g29J22FrjilepPP7_tcEE"]
             Body = null
    Session Attrs = {}

Handler:
             Type = com.economatom.inventory.controller.ProductController
           Method = com.economatom.inventory.controller.ProductController#deleteProduct(Integer)

Async:
    Async started = false
     Async result = null

Resolved Exception:
             Type = null

ModelAndView:
        View name = null
             View = null
            Model = null

FlashMap:
       Attributes = null

MockHttpServletResponse:
           Status = 404
    Error message = null
          Headers = [Vary:"Origin", "Access-Control-Request-Method", "Access-Control-Request-Headers", X-Content-Type-Options:"nosniff", X-XSS-Protection:"0", Cache-Control:"no-cache, no-store, max-age=0, must-revalidate", Pragma:"no-cache", Expires:"0", X-Frame-Options:"DENY"]
     Content type = null
             Body = 
    Forwarded URL = null
   Redirected URL = null
          Cookies = []
Hibernate: 
    
SET
    REFERENTIAL_INTEGRITY FALSE
Hibernate: 
    TRUNCATE TABLE allergen RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE product RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE order_header RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE recipe_component RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE recipe RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE inventory_audit RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE recipe_audit RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE order_detail RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE recipe_allergen RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE users RESTART IDENTITY
Hibernate: 
    
SET
    REFERENTIAL_INTEGRITY TRUE
Hibernate: 
    insert 
    into
        users
        (email, name, password, role) 
    values
        (?, ?, ?, ?)
2026-01-30T22:38:21.078Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Securing POST /api/auth/login
2026-01-30T22:38:21.078Z DEBUG 372594 --- [inventory] [           main] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2026-01-30T22:38:21.079Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Secured POST /api/auth/login
2026-01-30T22:38:21.079Z DEBUG 372594 --- [inventory] [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.economatom.inventory.controller.AuthController#authenticateUser(LoginRequestDTO)
2026-01-30T22:38:21.079Z DEBUG 372594 --- [inventory] [           main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [LoginRequestDTO(name=Admin, password=admin123)]
Hibernate: 
    select
        u1_0.user_id,
        u1_0.email,
        u1_0.name,
        u1_0.password,
        u1_0.role 
    from
        users u1_0 
    where
        u1_0.name=?
2026-01-30T22:38:21.121Z DEBUG 372594 --- [inventory] [           main] o.s.s.a.dao.DaoAuthenticationProvider    : Authenticated user
2026-01-30T22:38:21.122Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T22:38:21.122Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [LoginResponseDTO(token=eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJBZG1pbiIsImlhdCI6MTc2OTgxMjcwMSwiZXhwIjoxNzY5 (truncated)...]
2026-01-30T22:38:21.124Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Securing POST /api/products
Hibernate: 
    select
        u1_0.user_id,
        u1_0.email,
        u1_0.name,
        u1_0.password,
        u1_0.role 
    from
        users u1_0 
    where
        u1_0.name=?
2026-01-30T22:38:21.127Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Secured POST /api/products
2026-01-30T22:38:21.127Z DEBUG 372594 --- [inventory] [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.economatom.inventory.controller.ProductController#createProduct(ProductRequestDTO)
2026-01-30T22:38:21.128Z DEBUG 372594 --- [inventory] [           main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [ProductRequestDTO(name=Test Product, type=INGREDIENT, unit=KG, unitPrice=10.0, productCode=TEST001,  (truncated)...]
2026-01-30T22:38:21.128Z DEBUG 372594 --- [inventory] [           main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.economatom.inventory.exception.GlobalExceptionHandler#handleValidationExceptions(MethodArgumentNotValidException)
2026-01-30T22:38:21.128Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T22:38:21.128Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{currentStock=El stock no puede ser negativo}]
2026-01-30T22:38:21.129Z DEBUG 372594 --- [inventory] [           main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.economatom.inventory.dto.response.ProductResponseDTO> com.economatom.inventory.controller.ProductController.createProduct(com.economatom.inventory.dto.request.ProductRequestDTO): [Field error in object 'productRequestDTO' on field 'currentStock': rejected value [-5.0]; codes [DecimalMin.productRequestDTO.currentStock,DecimalMin.currentStock,DecimalMin.java.math.BigDecimal,DecimalMin]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [productRequestDTO.currentStock,currentStock]; arguments []; default message [currentStock],true,0.0]; default message [El stock no puede ser negativo]] ]
Hibernate: 
    
SET
    REFERENTIAL_INTEGRITY FALSE
Hibernate: 
    TRUNCATE TABLE allergen RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE product RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE order_header RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE recipe_component RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE recipe RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE inventory_audit RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE recipe_audit RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE order_detail RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE recipe_allergen RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE users RESTART IDENTITY
Hibernate: 
    
SET
    REFERENTIAL_INTEGRITY TRUE
Hibernate: 
    insert 
    into
        users
        (email, name, password, role) 
    values
        (?, ?, ?, ?)
2026-01-30T22:38:21.174Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Securing POST /api/auth/login
2026-01-30T22:38:21.175Z DEBUG 372594 --- [inventory] [           main] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2026-01-30T22:38:21.175Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Secured POST /api/auth/login
2026-01-30T22:38:21.175Z DEBUG 372594 --- [inventory] [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.economatom.inventory.controller.AuthController#authenticateUser(LoginRequestDTO)
2026-01-30T22:38:21.175Z DEBUG 372594 --- [inventory] [           main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [LoginRequestDTO(name=Admin, password=admin123)]
Hibernate: 
    select
        u1_0.user_id,
        u1_0.email,
        u1_0.name,
        u1_0.password,
        u1_0.role 
    from
        users u1_0 
    where
        u1_0.name=?
2026-01-30T22:38:21.216Z DEBUG 372594 --- [inventory] [           main] o.s.s.a.dao.DaoAuthenticationProvider    : Authenticated user
2026-01-30T22:38:21.217Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T22:38:21.217Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [LoginResponseDTO(token=eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJBZG1pbiIsImlhdCI6MTc2OTgxMjcwMSwiZXhwIjoxNzY5 (truncated)...]
2026-01-30T22:38:21.218Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Securing POST /api/products
Hibernate: 
    select
        u1_0.user_id,
        u1_0.email,
        u1_0.name,
        u1_0.password,
        u1_0.role 
    from
        users u1_0 
    where
        u1_0.name=?
2026-01-30T22:38:21.220Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Secured POST /api/products
2026-01-30T22:38:21.220Z DEBUG 372594 --- [inventory] [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.economatom.inventory.controller.ProductController#createProduct(ProductRequestDTO)
2026-01-30T22:38:21.221Z DEBUG 372594 --- [inventory] [           main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [ProductRequestDTO(name=Duplicate Product, type=INGREDIENT, unit=KG, unitPrice=10.0, productCode=TEST (truncated)...]
Hibernate: 
    select
        p1_0.product_id 
    from
        product p1_0 
    where
        p1_0.name=? 
    fetch
        first ? rows only
Hibernate: 
    insert 
    into
        product
        (current_stock, name, product_code, type, unit_of_measure, unit_price, version) 
    values
        (?, ?, ?, ?, ?, ?, ?)
2026-01-30T22:38:21.223Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T22:38:21.223Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ProductResponseDTO(id=1, name=Duplicate Product, type=INGREDIENT, unit=KG, unitPrice=10.0, productCo (truncated)...]

MockHttpServletRequest:
      HTTP Method = POST
      Request URI = /api/auth/login
       Parameters = {}
          Headers = [Content-Type:"application/json;charset=UTF-8", Content-Length:"38"]
             Body = {"name":"Admin","password":"admin123"}
    Session Attrs = {}

Handler:
             Type = com.economatom.inventory.controller.AuthController
           Method = com.economatom.inventory.controller.AuthController#authenticateUser(LoginRequestDTO)

Async:
    Async started = false
     Async result = null

Resolved Exception:
             Type = null

ModelAndView:
        View name = null
             View = null
            Model = null

FlashMap:
       Attributes = null

MockHttpServletResponse:
           Status = 200
    Error message = null
          Headers = [Vary:"Origin", "Access-Control-Request-Method", "Access-Control-Request-Headers", Content-Type:"application/json", X-Content-Type-Options:"nosniff", X-XSS-Protection:"0", Cache-Control:"no-cache, no-store, max-age=0, must-revalidate", Pragma:"no-cache", Expires:"0", X-Frame-Options:"DENY"]
     Content type = application/json
             Body = {"token":"eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJBZG1pbiIsImlhdCI6MTc2OTgxMjcwMSwiZXhwIjoxNzY5ODEzNTAxfQ.dly7SKVmlspxFPrkixPgb9g29J22FrjilepPP7_tcEE"}
    Forwarded URL = null
   Redirected URL = null
          Cookies = []

MockHttpServletRequest:
      HTTP Method = POST
      Request URI = /api/products
       Parameters = {}
          Headers = [Content-Type:"application/json;charset=UTF-8", Authorization:"Bearer eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJBZG1pbiIsImlhdCI6MTc2OTgxMjcwMSwiZXhwIjoxNzY5ODEzNTAxfQ.dly7SKVmlspxFPrkixPgb9g29J22FrjilepPP7_tcEE", Content-Length:"120"]
             Body = {"name":"Duplicate Product","type":"INGREDIENT","unit":"KG","unitPrice":10.0,"productCode":"TEST001","currentStock":5.0}
    Session Attrs = {}

Handler:
             Type = com.economatom.inventory.controller.ProductController
           Method = com.economatom.inventory.controller.ProductController#createProduct(ProductRequestDTO)

Async:
    Async started = false
     Async result = null

Resolved Exception:
             Type = null

ModelAndView:
        View name = null
             View = null
            Model = null

FlashMap:
       Attributes = null

MockHttpServletResponse:
           Status = 200
    Error message = null
          Headers = [Vary:"Origin", "Access-Control-Request-Method", "Access-Control-Request-Headers", Content-Type:"application/json", X-Content-Type-Options:"nosniff", X-XSS-Protection:"0", Cache-Control:"no-cache, no-store, max-age=0, must-revalidate", Pragma:"no-cache", Expires:"0", X-Frame-Options:"DENY"]
     Content type = application/json
             Body = {"id":1,"name":"Duplicate Product","type":"INGREDIENT","unit":"KG","unitPrice":10.0,"productCode":"TEST001","currentStock":5.0}
    Forwarded URL = null
   Redirected URL = null
          Cookies = []
Hibernate: 
    
SET
    REFERENTIAL_INTEGRITY FALSE
Hibernate: 
    TRUNCATE TABLE allergen RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE product RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE order_header RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE recipe_component RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE recipe RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE inventory_audit RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE recipe_audit RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE order_detail RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE recipe_allergen RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE users RESTART IDENTITY
Hibernate: 
    
SET
    REFERENTIAL_INTEGRITY TRUE
Hibernate: 
    insert 
    into
        users
        (email, name, password, role) 
    values
        (?, ?, ?, ?)
2026-01-30T22:38:21.269Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Securing POST /api/auth/login
2026-01-30T22:38:21.269Z DEBUG 372594 --- [inventory] [           main] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2026-01-30T22:38:21.270Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Secured POST /api/auth/login
2026-01-30T22:38:21.270Z DEBUG 372594 --- [inventory] [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.economatom.inventory.controller.AuthController#authenticateUser(LoginRequestDTO)
2026-01-30T22:38:21.270Z DEBUG 372594 --- [inventory] [           main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [LoginRequestDTO(name=Admin, password=admin123)]
Hibernate: 
    select
        u1_0.user_id,
        u1_0.email,
        u1_0.name,
        u1_0.password,
        u1_0.role 
    from
        users u1_0 
    where
        u1_0.name=?
2026-01-30T22:38:21.311Z DEBUG 372594 --- [inventory] [           main] o.s.s.a.dao.DaoAuthenticationProvider    : Authenticated user
2026-01-30T22:38:21.312Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T22:38:21.312Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [LoginResponseDTO(token=eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJBZG1pbiIsImlhdCI6MTc2OTgxMjcwMSwiZXhwIjoxNzY5 (truncated)...]
2026-01-30T22:38:21.313Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Securing POST /api/products
2026-01-30T22:38:21.313Z ERROR 372594 --- [inventory] [           main] c.e.inventory.security.JwtUtils          : Token JWT invlido: JWT strings must contain exactly 2 period characters. Found: 0
2026-01-30T22:38:21.314Z DEBUG 372594 --- [inventory] [           main] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
Hibernate: 
    
SET
    REFERENTIAL_INTEGRITY FALSE
Hibernate: 
    TRUNCATE TABLE allergen RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE product RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE order_header RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE recipe_component RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE recipe RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE inventory_audit RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE recipe_audit RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE order_detail RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE recipe_allergen RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE users RESTART IDENTITY
Hibernate: 
    
SET
    REFERENTIAL_INTEGRITY TRUE
Hibernate: 
    insert 
    into
        users
        (email, name, password, role) 
    values
        (?, ?, ?, ?)
2026-01-30T22:38:21.359Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Securing POST /api/auth/login
2026-01-30T22:38:21.359Z DEBUG 372594 --- [inventory] [           main] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2026-01-30T22:38:21.360Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Secured POST /api/auth/login
2026-01-30T22:38:21.360Z DEBUG 372594 --- [inventory] [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.economatom.inventory.controller.AuthController#authenticateUser(LoginRequestDTO)
2026-01-30T22:38:21.360Z DEBUG 372594 --- [inventory] [           main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [LoginRequestDTO(name=Admin, password=admin123)]
Hibernate: 
    select
        u1_0.user_id,
        u1_0.email,
        u1_0.name,
        u1_0.password,
        u1_0.role 
    from
        users u1_0 
    where
        u1_0.name=?
2026-01-30T22:38:21.401Z DEBUG 372594 --- [inventory] [           main] o.s.s.a.dao.DaoAuthenticationProvider    : Authenticated user
2026-01-30T22:38:21.402Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T22:38:21.402Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [LoginResponseDTO(token=eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJBZG1pbiIsImlhdCI6MTc2OTgxMjcwMSwiZXhwIjoxNzY5 (truncated)...]
2026-01-30T22:38:21.403Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Securing PUT /api/products/99999
Hibernate: 
    select
        u1_0.user_id,
        u1_0.email,
        u1_0.name,
        u1_0.password,
        u1_0.role 
    from
        users u1_0 
    where
        u1_0.name=?
2026-01-30T22:38:21.406Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Secured PUT /api/products/99999
2026-01-30T22:38:21.406Z DEBUG 372594 --- [inventory] [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.economatom.inventory.controller.ProductController#updateProduct(Integer, ProductRequestDTO)
2026-01-30T22:38:21.407Z DEBUG 372594 --- [inventory] [           main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [ProductRequestDTO(name=Updated Product, type=INGREDIENT, unit=KG, unitPrice=10.0, productCode=TEST00 (truncated)...]
Hibernate: 
    select
        p1_0.product_id,
        p1_0.current_stock,
        p1_0.name,
        p1_0.product_code,
        p1_0.type,
        p1_0.unit_of_measure,
        p1_0.unit_price,
        p1_0.version 
    from
        product p1_0 
    where
        p1_0.product_id=?
2026-01-30T22:38:21.415Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T22:38:21.415Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Nothing to write: null body
Hibernate: 
    
SET
    REFERENTIAL_INTEGRITY FALSE
Hibernate: 
    TRUNCATE TABLE allergen RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE product RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE order_header RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE recipe_component RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE recipe RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE inventory_audit RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE recipe_audit RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE order_detail RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE recipe_allergen RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE users RESTART IDENTITY
Hibernate: 
    
SET
    REFERENTIAL_INTEGRITY TRUE
Hibernate: 
    insert 
    into
        users
        (email, name, password, role) 
    values
        (?, ?, ?, ?)
2026-01-30T22:38:21.461Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Securing POST /api/auth/login
2026-01-30T22:38:21.461Z DEBUG 372594 --- [inventory] [           main] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2026-01-30T22:38:21.461Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Secured POST /api/auth/login
2026-01-30T22:38:21.461Z DEBUG 372594 --- [inventory] [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.economatom.inventory.controller.AuthController#authenticateUser(LoginRequestDTO)
2026-01-30T22:38:21.462Z DEBUG 372594 --- [inventory] [           main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [LoginRequestDTO(name=Admin, password=admin123)]
Hibernate: 
    select
        u1_0.user_id,
        u1_0.email,
        u1_0.name,
        u1_0.password,
        u1_0.role 
    from
        users u1_0 
    where
        u1_0.name=?
2026-01-30T22:38:21.503Z DEBUG 372594 --- [inventory] [           main] o.s.s.a.dao.DaoAuthenticationProvider    : Authenticated user
2026-01-30T22:38:21.504Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T22:38:21.504Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [LoginResponseDTO(token=eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJBZG1pbiIsImlhdCI6MTc2OTgxMjcwMSwiZXhwIjoxNzY5 (truncated)...]
2026-01-30T22:38:21.505Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Securing POST /api/products
Hibernate: 
    select
        u1_0.user_id,
        u1_0.email,
        u1_0.name,
        u1_0.password,
        u1_0.role 
    from
        users u1_0 
    where
        u1_0.name=?
2026-01-30T22:38:21.508Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Secured POST /api/products
2026-01-30T22:38:21.508Z DEBUG 372594 --- [inventory] [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.economatom.inventory.controller.ProductController#createProduct(ProductRequestDTO)
2026-01-30T22:38:21.508Z DEBUG 372594 --- [inventory] [           main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [ProductRequestDTO(name=Flour, type=INGREDIENT, unit=KG, unitPrice=5.0, productCode=FLOUR001, current (truncated)...]
Hibernate: 
    select
        p1_0.product_id 
    from
        product p1_0 
    where
        p1_0.name=? 
    fetch
        first ? rows only
Hibernate: 
    insert 
    into
        product
        (current_stock, name, product_code, type, unit_of_measure, unit_price, version) 
    values
        (?, ?, ?, ?, ?, ?, ?)
2026-01-30T22:38:21.510Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T22:38:21.510Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ProductResponseDTO(id=1, name=Flour, type=INGREDIENT, unit=KG, unitPrice=5.0, productCode=FLOUR001,  (truncated)...]

MockHttpServletRequest:
      HTTP Method = POST
      Request URI = /api/auth/login
       Parameters = {}
          Headers = [Content-Type:"application/json;charset=UTF-8", Content-Length:"38"]
             Body = {"name":"Admin","password":"admin123"}
    Session Attrs = {}

Handler:
             Type = com.economatom.inventory.controller.AuthController
           Method = com.economatom.inventory.controller.AuthController#authenticateUser(LoginRequestDTO)

Async:
    Async started = false
     Async result = null

Resolved Exception:
             Type = null

ModelAndView:
        View name = null
             View = null
            Model = null

FlashMap:
       Attributes = null

MockHttpServletResponse:
           Status = 200
    Error message = null
          Headers = [Vary:"Origin", "Access-Control-Request-Method", "Access-Control-Request-Headers", Content-Type:"application/json", X-Content-Type-Options:"nosniff", X-XSS-Protection:"0", Cache-Control:"no-cache, no-store, max-age=0, must-revalidate", Pragma:"no-cache", Expires:"0", X-Frame-Options:"DENY"]
     Content type = application/json
             Body = {"token":"eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJBZG1pbiIsImlhdCI6MTc2OTgxMjcwMSwiZXhwIjoxNzY5ODEzNTAxfQ.dly7SKVmlspxFPrkixPgb9g29J22FrjilepPP7_tcEE"}
    Forwarded URL = null
   Redirected URL = null
          Cookies = []

MockHttpServletRequest:
      HTTP Method = POST
      Request URI = /api/products
       Parameters = {}
          Headers = [Content-Type:"application/json;charset=UTF-8", Authorization:"Bearer eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJBZG1pbiIsImlhdCI6MTc2OTgxMjcwMSwiZXhwIjoxNzY5ODEzNTAxfQ.dly7SKVmlspxFPrkixPgb9g29J22FrjilepPP7_tcEE", Content-Length:"109"]
             Body = {"name":"Flour","type":"INGREDIENT","unit":"KG","unitPrice":5.0,"productCode":"FLOUR001","currentStock":10.0}
    Session Attrs = {}

Handler:
             Type = com.economatom.inventory.controller.ProductController
           Method = com.economatom.inventory.controller.ProductController#createProduct(ProductRequestDTO)

Async:
    Async started = false
     Async result = null

Resolved Exception:
             Type = null

ModelAndView:
        View name = null
             View = null
            Model = null

FlashMap:
       Attributes = null

MockHttpServletResponse:
           Status = 200
    Error message = null
          Headers = [Vary:"Origin", "Access-Control-Request-Method", "Access-Control-Request-Headers", Content-Type:"application/json", X-Content-Type-Options:"nosniff", X-XSS-Protection:"0", Cache-Control:"no-cache, no-store, max-age=0, must-revalidate", Pragma:"no-cache", Expires:"0", X-Frame-Options:"DENY"]
     Content type = application/json
             Body = {"id":1,"name":"Flour","type":"INGREDIENT","unit":"KG","unitPrice":5.0,"productCode":"FLOUR001","currentStock":10.0}
    Forwarded URL = null
   Redirected URL = null
          Cookies = []
Hibernate: 
    
SET
    REFERENTIAL_INTEGRITY FALSE
Hibernate: 
    TRUNCATE TABLE allergen RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE product RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE order_header RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE recipe_component RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE recipe RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE inventory_audit RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE recipe_audit RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE order_detail RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE recipe_allergen RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE users RESTART IDENTITY
Hibernate: 
    
SET
    REFERENTIAL_INTEGRITY TRUE
Hibernate: 
    insert 
    into
        users
        (email, name, password, role) 
    values
        (?, ?, ?, ?)
2026-01-30T22:38:21.558Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Securing POST /api/auth/login
2026-01-30T22:38:21.558Z DEBUG 372594 --- [inventory] [           main] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2026-01-30T22:38:21.558Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Secured POST /api/auth/login
2026-01-30T22:38:21.559Z DEBUG 372594 --- [inventory] [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.economatom.inventory.controller.AuthController#authenticateUser(LoginRequestDTO)
2026-01-30T22:38:21.559Z DEBUG 372594 --- [inventory] [           main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [LoginRequestDTO(name=Admin, password=admin123)]
Hibernate: 
    select
        u1_0.user_id,
        u1_0.email,
        u1_0.name,
        u1_0.password,
        u1_0.role 
    from
        users u1_0 
    where
        u1_0.name=?
2026-01-30T22:38:21.600Z DEBUG 372594 --- [inventory] [           main] o.s.s.a.dao.DaoAuthenticationProvider    : Authenticated user
2026-01-30T22:38:21.601Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T22:38:21.601Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [LoginResponseDTO(token=eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJBZG1pbiIsImlhdCI6MTc2OTgxMjcwMSwiZXhwIjoxNzY5 (truncated)...]
2026-01-30T22:38:21.602Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Securing POST /api/products
Hibernate: 
    select
        u1_0.user_id,
        u1_0.email,
        u1_0.name,
        u1_0.password,
        u1_0.role 
    from
        users u1_0 
    where
        u1_0.name=?
2026-01-30T22:38:21.605Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Secured POST /api/products
2026-01-30T22:38:21.605Z DEBUG 372594 --- [inventory] [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.economatom.inventory.controller.ProductController#createProduct(ProductRequestDTO)
2026-01-30T22:38:21.605Z DEBUG 372594 --- [inventory] [           main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [ProductRequestDTO(name=, type=INGREDIENT, unit=KG, unitPrice=10.0, productCode=TEST001, currentStock (truncated)...]
2026-01-30T22:38:21.606Z DEBUG 372594 --- [inventory] [           main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.economatom.inventory.exception.GlobalExceptionHandler#handleValidationExceptions(MethodArgumentNotValidException)
2026-01-30T22:38:21.606Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T22:38:21.606Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{name=El nombre del producto no puede estar vaco}]
2026-01-30T22:38:21.606Z DEBUG 372594 --- [inventory] [           main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.economatom.inventory.dto.response.ProductResponseDTO> com.economatom.inventory.controller.ProductController.createProduct(com.economatom.inventory.dto.request.ProductRequestDTO) with 2 errors: [Field error in object 'productRequestDTO' on field 'name': rejected value []; codes [Size.productRequestDTO.name,Size.name,Size.java.lang.String,Size]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [productRequestDTO.name,name]; arguments []; default message [name],100,2]; default message [El nombre debe tener entre 2 y 100 caracteres]] [Field error in object 'productRequestDTO' on field 'name': rejected value []; codes [NotBlank.productRequestDTO.name,NotBlank.name,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [productRequestDTO.name,name]; arguments []; default message [name]]; default message [El nombre del producto no puede estar vaco]] ]
[ERROR] Tests run: 12, Failures: 4, Errors: 0, Skipped: 0, Time elapsed: 1.172 s <<< FAILURE! -- in com.economatom.inventory.controller.ProductControllerEdgeCasesTest
[ERROR] com.economatom.inventory.controller.ProductControllerEdgeCasesTest.getAllProducts_WithPagination_ShouldReturnCorrectPage -- Time elapsed: 0.097 s <<< FAILURE!
java.lang.AssertionError: Status expected:<201> but was:<200>
	at org.springframework.test.util.AssertionErrors.fail(AssertionErrors.java:61)
	at org.springframework.test.util.AssertionErrors.assertEquals(AssertionErrors.java:128)
	at org.springframework.test.web.servlet.result.StatusResultMatchers.lambda$matcher$9(StatusResultMatchers.java:640)
	at org.springframework.test.web.servlet.MockMvc$1.andExpect(MockMvc.java:214)
	at com.economatom.inventory.controller.ProductControllerEdgeCasesTest.getAllProducts_WithPagination_ShouldReturnCorrectPage(ProductControllerEdgeCasesTest.java:206)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)

[ERROR] com.economatom.inventory.controller.ProductControllerEdgeCasesTest.deleteProduct_WithNonExistentId_ShouldSucceed -- Time elapsed: 0.103 s <<< FAILURE!
java.lang.AssertionError: Status expected:<204> but was:<404>
	at org.springframework.test.util.AssertionErrors.fail(AssertionErrors.java:61)
	at org.springframework.test.util.AssertionErrors.assertEquals(AssertionErrors.java:128)
	at org.springframework.test.web.servlet.result.StatusResultMatchers.lambda$matcher$9(StatusResultMatchers.java:640)
	at org.springframework.test.web.servlet.MockMvc$1.andExpect(MockMvc.java:214)
	at com.economatom.inventory.controller.ProductControllerEdgeCasesTest.deleteProduct_WithNonExistentId_ShouldSucceed(ProductControllerEdgeCasesTest.java:187)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)

[ERROR] com.economatom.inventory.controller.ProductControllerEdgeCasesTest.createProduct_WithDuplicateName_ShouldReturnBadRequest -- Time elapsed: 0.095 s <<< FAILURE!
java.lang.AssertionError: Status expected:<201> but was:<200>
	at org.springframework.test.util.AssertionErrors.fail(AssertionErrors.java:61)
	at org.springframework.test.util.AssertionErrors.assertEquals(AssertionErrors.java:128)
	at org.springframework.test.web.servlet.result.StatusResultMatchers.lambda$matcher$9(StatusResultMatchers.java:640)
	at org.springframework.test.web.servlet.MockMvc$1.andExpect(MockMvc.java:214)
	at com.economatom.inventory.controller.ProductControllerEdgeCasesTest.createProduct_WithDuplicateName_ShouldReturnBadRequest(ProductControllerEdgeCasesTest.java:144)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)

[ERROR] com.economatom.inventory.controller.ProductControllerEdgeCasesTest.searchProducts_WithFilters_ShouldReturnFilteredResults -- Time elapsed: 0.096 s <<< FAILURE!
java.lang.AssertionError: Status expected:<201> but was:<200>
	at org.springframework.test.util.AssertionErrors.fail(AssertionErrors.java:61)
	at org.springframework.test.util.AssertionErrors.assertEquals(AssertionErrors.java:128)
	at org.springframework.test.web.servlet.result.StatusResultMatchers.lambda$matcher$9(StatusResultMatchers.java:640)
	at org.springframework.test.web.servlet.MockMvc$1.andExpect(MockMvc.java:214)
	at com.economatom.inventory.controller.ProductControllerEdgeCasesTest.searchProducts_WithFilters_ShouldReturnFilteredResults(ProductControllerEdgeCasesTest.java:243)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)

[INFO] Running com.economatom.inventory.controller.ProductControllerIntegrationTest
2026-01-30T22:38:21.609Z  INFO 372594 --- [inventory] [           main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [com.economatom.inventory.controller.ProductControllerIntegrationTest]: ProductControllerIntegrationTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2026-01-30T22:38:21.610Z  INFO 372594 --- [inventory] [           main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration com.economatom.inventory.InventoryApplication for test class com.economatom.inventory.controller.ProductControllerIntegrationTest
Hibernate: 
    
SET
    REFERENTIAL_INTEGRITY FALSE
Hibernate: 
    TRUNCATE TABLE allergen RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE product RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE order_header RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE recipe_component RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE recipe RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE inventory_audit RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE recipe_audit RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE order_detail RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE recipe_allergen RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE users RESTART IDENTITY
Hibernate: 
    
SET
    REFERENTIAL_INTEGRITY TRUE
Hibernate: 
    insert 
    into
        users
        (email, name, password, role) 
    values
        (?, ?, ?, ?)
2026-01-30T22:38:21.695Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Securing POST /api/auth/login
2026-01-30T22:38:21.696Z DEBUG 372594 --- [inventory] [           main] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2026-01-30T22:38:21.696Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Secured POST /api/auth/login
2026-01-30T22:38:21.696Z DEBUG 372594 --- [inventory] [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.economatom.inventory.controller.AuthController#authenticateUser(LoginRequestDTO)
2026-01-30T22:38:21.696Z DEBUG 372594 --- [inventory] [           main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [LoginRequestDTO(name=Admin, password=admin123)]
Hibernate: 
    select
        u1_0.user_id,
        u1_0.email,
        u1_0.name,
        u1_0.password,
        u1_0.role 
    from
        users u1_0 
    where
        u1_0.name=?
2026-01-30T22:38:21.737Z DEBUG 372594 --- [inventory] [           main] o.s.s.a.dao.DaoAuthenticationProvider    : Authenticated user
2026-01-30T22:38:21.738Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T22:38:21.738Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [LoginResponseDTO(token=eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJBZG1pbiIsImlhdCI6MTc2OTgxMjcwMSwiZXhwIjoxNzY5 (truncated)...]
Hibernate: 
    insert 
    into
        product
        (current_stock, name, product_code, type, unit_of_measure, unit_price, version) 
    values
        (?, ?, ?, ?, ?, ?, ?)
2026-01-30T22:38:21.741Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Securing POST /api/products
Hibernate: 
    select
        u1_0.user_id,
        u1_0.email,
        u1_0.name,
        u1_0.password,
        u1_0.role 
    from
        users u1_0 
    where
        u1_0.name=?
2026-01-30T22:38:21.744Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Secured POST /api/products
2026-01-30T22:38:21.744Z DEBUG 372594 --- [inventory] [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.economatom.inventory.controller.ProductController#createProduct(ProductRequestDTO)
2026-01-30T22:38:21.745Z DEBUG 372594 --- [inventory] [           main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [ProductRequestDTO(name=Harina de trigo, type=Ingrediente, unit=KG, unitPrice=2.50, productCode=HAR00 (truncated)...]
Hibernate: 
    select
        p1_0.product_id 
    from
        product p1_0 
    where
        p1_0.name=? 
    fetch
        first ? rows only
Hibernate: 
    insert 
    into
        product
        (current_stock, name, product_code, type, unit_of_measure, unit_price, version) 
    values
        (?, ?, ?, ?, ?, ?, ?)
2026-01-30T22:38:21.747Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T22:38:21.747Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ProductResponseDTO(id=2, name=Harina de trigo, type=Ingrediente, unit=KG, unitPrice=2.50, productCod (truncated)...]
2026-01-30T22:38:21.748Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Securing GET /api/products/2
Hibernate: 
    select
        u1_0.user_id,
        u1_0.email,
        u1_0.name,
        u1_0.password,
        u1_0.role 
    from
        users u1_0 
    where
        u1_0.name=?
2026-01-30T22:38:21.750Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Secured GET /api/products/2
2026-01-30T22:38:21.750Z DEBUG 372594 --- [inventory] [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.economatom.inventory.controller.ProductController#getProductById(Integer)
Hibernate: 
    select
        p1_0.product_id,
        p1_0.current_stock,
        p1_0.name,
        p1_0.product_code,
        p1_0.type,
        p1_0.unit_of_measure,
        p1_0.unit_price,
        p1_0.version 
    from
        product p1_0 
    where
        p1_0.product_id=?
2026-01-30T22:38:21.752Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T22:38:21.752Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ProductResponseDTO(id=2, name=Harina de trigo, type=Ingrediente, unit=KG, unitPrice=2.50, productCod (truncated)...]
Hibernate: 
    
SET
    REFERENTIAL_INTEGRITY FALSE
Hibernate: 
    TRUNCATE TABLE allergen RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE product RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE order_header RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE recipe_component RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE recipe RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE inventory_audit RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE recipe_audit RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE order_detail RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE recipe_allergen RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE users RESTART IDENTITY
Hibernate: 
    
SET
    REFERENTIAL_INTEGRITY TRUE
Hibernate: 
    insert 
    into
        users
        (email, name, password, role) 
    values
        (?, ?, ?, ?)
2026-01-30T22:38:21.837Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Securing POST /api/auth/login
2026-01-30T22:38:21.837Z DEBUG 372594 --- [inventory] [           main] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2026-01-30T22:38:21.837Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Secured POST /api/auth/login
2026-01-30T22:38:21.837Z DEBUG 372594 --- [inventory] [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.economatom.inventory.controller.AuthController#authenticateUser(LoginRequestDTO)
2026-01-30T22:38:21.838Z DEBUG 372594 --- [inventory] [           main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [LoginRequestDTO(name=Admin, password=admin123)]
Hibernate: 
    select
        u1_0.user_id,
        u1_0.email,
        u1_0.name,
        u1_0.password,
        u1_0.role 
    from
        users u1_0 
    where
        u1_0.name=?
2026-01-30T22:38:21.879Z DEBUG 372594 --- [inventory] [           main] o.s.s.a.dao.DaoAuthenticationProvider    : Authenticated user
2026-01-30T22:38:21.880Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T22:38:21.880Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [LoginResponseDTO(token=eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJBZG1pbiIsImlhdCI6MTc2OTgxMjcwMSwiZXhwIjoxNzY5 (truncated)...]
Hibernate: 
    insert 
    into
        product
        (current_stock, name, product_code, type, unit_of_measure, unit_price, version) 
    values
        (?, ?, ?, ?, ?, ?, ?)
2026-01-30T22:38:21.883Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Securing POST /api/products
Hibernate: 
    select
        u1_0.user_id,
        u1_0.email,
        u1_0.name,
        u1_0.password,
        u1_0.role 
    from
        users u1_0 
    where
        u1_0.name=?
2026-01-30T22:38:21.885Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Secured POST /api/products
2026-01-30T22:38:21.885Z DEBUG 372594 --- [inventory] [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.economatom.inventory.controller.ProductController#createProduct(ProductRequestDTO)
2026-01-30T22:38:21.886Z DEBUG 372594 --- [inventory] [           main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [ProductRequestDTO(name=Harina de trigo, type=Ingrediente, unit=KG, unitPrice=2.50, productCode=HAR00 (truncated)...]
Hibernate: 
    select
        p1_0.product_id 
    from
        product p1_0 
    where
        p1_0.name=? 
    fetch
        first ? rows only
Hibernate: 
    insert 
    into
        product
        (current_stock, name, product_code, type, unit_of_measure, unit_price, version) 
    values
        (?, ?, ?, ?, ?, ?, ?)
2026-01-30T22:38:21.888Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T22:38:21.888Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ProductResponseDTO(id=2, name=Harina de trigo, type=Ingrediente, unit=KG, unitPrice=2.50, productCod (truncated)...]
2026-01-30T22:38:21.889Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Securing DELETE /api/products/2
Hibernate: 
    select
        u1_0.user_id,
        u1_0.email,
        u1_0.name,
        u1_0.password,
        u1_0.role 
    from
        users u1_0 
    where
        u1_0.name=?
2026-01-30T22:38:21.891Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Secured DELETE /api/products/2
2026-01-30T22:38:21.891Z DEBUG 372594 --- [inventory] [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.economatom.inventory.controller.ProductController#deleteProduct(Integer)
Hibernate: 
    select
        p1_0.product_id,
        p1_0.current_stock,
        p1_0.name,
        p1_0.product_code,
        p1_0.type,
        p1_0.unit_of_measure,
        p1_0.unit_price,
        p1_0.version 
    from
        product p1_0 
    where
        p1_0.product_id=?
Hibernate: 
    select
        ia1_0.audit_id 
    from
        inventory_audit ia1_0 
    join
        product p1_0 
            on p1_0.product_id=ia1_0.product_id 
    where
        p1_0.product_id=? 
    fetch
        first ? rows only
Hibernate: 
    select
        rc1_0.id 
    from
        recipe_component rc1_0 
    join
        product p1_0 
            on p1_0.product_id=rc1_0.product_id 
    where
        p1_0.product_id=? 
    fetch
        first ? rows only
Hibernate: 
    delete 
    from
        product 
    where
        product_id=? 
        and version=?
2026-01-30T22:38:21.896Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T22:38:21.896Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Nothing to write: null body
2026-01-30T22:38:21.897Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Securing GET /api/products/2
Hibernate: 
    select
        u1_0.user_id,
        u1_0.email,
        u1_0.name,
        u1_0.password,
        u1_0.role 
    from
        users u1_0 
    where
        u1_0.name=?
2026-01-30T22:38:21.899Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Secured GET /api/products/2
2026-01-30T22:38:21.899Z DEBUG 372594 --- [inventory] [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.economatom.inventory.controller.ProductController#getProductById(Integer)
Hibernate: 
    select
        p1_0.product_id,
        p1_0.current_stock,
        p1_0.name,
        p1_0.product_code,
        p1_0.type,
        p1_0.unit_of_measure,
        p1_0.unit_price,
        p1_0.version 
    from
        product p1_0 
    where
        p1_0.product_id=?
2026-01-30T22:38:21.900Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T22:38:21.900Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Nothing to write: null body
Hibernate: 
    
SET
    REFERENTIAL_INTEGRITY FALSE
Hibernate: 
    TRUNCATE TABLE allergen RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE product RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE order_header RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE recipe_component RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE recipe RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE inventory_audit RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE recipe_audit RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE order_detail RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE recipe_allergen RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE users RESTART IDENTITY
Hibernate: 
    
SET
    REFERENTIAL_INTEGRITY TRUE
Hibernate: 
    insert 
    into
        users
        (email, name, password, role) 
    values
        (?, ?, ?, ?)
2026-01-30T22:38:21.986Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Securing POST /api/auth/login
2026-01-30T22:38:21.987Z DEBUG 372594 --- [inventory] [           main] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2026-01-30T22:38:21.987Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Secured POST /api/auth/login
2026-01-30T22:38:21.987Z DEBUG 372594 --- [inventory] [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.economatom.inventory.controller.AuthController#authenticateUser(LoginRequestDTO)
2026-01-30T22:38:21.987Z DEBUG 372594 --- [inventory] [           main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [LoginRequestDTO(name=Admin, password=admin123)]
Hibernate: 
    select
        u1_0.user_id,
        u1_0.email,
        u1_0.name,
        u1_0.password,
        u1_0.role 
    from
        users u1_0 
    where
        u1_0.name=?
2026-01-30T22:38:22.028Z DEBUG 372594 --- [inventory] [           main] o.s.s.a.dao.DaoAuthenticationProvider    : Authenticated user
2026-01-30T22:38:22.029Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T22:38:22.029Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [LoginResponseDTO(token=eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJBZG1pbiIsImlhdCI6MTc2OTgxMjcwMiwiZXhwIjoxNzY5 (truncated)...]
Hibernate: 
    insert 
    into
        product
        (current_stock, name, product_code, type, unit_of_measure, unit_price, version) 
    values
        (?, ?, ?, ?, ?, ?, ?)
2026-01-30T22:38:22.033Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Securing POST /api/products
Hibernate: 
    select
        u1_0.user_id,
        u1_0.email,
        u1_0.name,
        u1_0.password,
        u1_0.role 
    from
        users u1_0 
    where
        u1_0.name=?
2026-01-30T22:38:22.035Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Secured POST /api/products
2026-01-30T22:38:22.035Z DEBUG 372594 --- [inventory] [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.economatom.inventory.controller.ProductController#createProduct(ProductRequestDTO)
2026-01-30T22:38:22.036Z DEBUG 372594 --- [inventory] [           main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [ProductRequestDTO(name=Harina de trigo, type=Ingrediente, unit=KG, unitPrice=2.50, productCode=HAR00 (truncated)...]
Hibernate: 
    select
        p1_0.product_id 
    from
        product p1_0 
    where
        p1_0.name=? 
    fetch
        first ? rows only
Hibernate: 
    insert 
    into
        product
        (current_stock, name, product_code, type, unit_of_measure, unit_price, version) 
    values
        (?, ?, ?, ?, ?, ?, ?)
2026-01-30T22:38:22.037Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T22:38:22.037Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ProductResponseDTO(id=2, name=Harina de trigo, type=Ingrediente, unit=KG, unitPrice=2.50, productCod (truncated)...]
2026-01-30T22:38:22.038Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Securing PUT /api/products/2
Hibernate: 
    select
        u1_0.user_id,
        u1_0.email,
        u1_0.name,
        u1_0.password,
        u1_0.role 
    from
        users u1_0 
    where
        u1_0.name=?
2026-01-30T22:38:22.041Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Secured PUT /api/products/2
2026-01-30T22:38:22.041Z DEBUG 372594 --- [inventory] [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.economatom.inventory.controller.ProductController#updateProduct(Integer, ProductRequestDTO)
2026-01-30T22:38:22.041Z DEBUG 372594 --- [inventory] [           main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [ProductRequestDTO(name=Harina de trigo Actualizado, type=Ingrediente, unit=KG, unitPrice=3.50, produ (truncated)...]
Hibernate: 
    select
        p1_0.product_id,
        p1_0.current_stock,
        p1_0.name,
        p1_0.product_code,
        p1_0.type,
        p1_0.unit_of_measure,
        p1_0.unit_price,
        p1_0.version 
    from
        product p1_0 
    where
        p1_0.product_id=?
Hibernate: 
    select
        p1_0.product_id 
    from
        product p1_0 
    where
        p1_0.name=? 
    fetch
        first ? rows only
Hibernate: 
    update
        product 
    set
        current_stock=?,
        name=?,
        product_code=?,
        type=?,
        unit_of_measure=?,
        unit_price=?,
        version=? 
    where
        product_id=? 
        and version=?
2026-01-30T22:38:22.044Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T22:38:22.045Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ProductResponseDTO(id=2, name=Harina de trigo Actualizado, type=Ingrediente, unit=KG, unitPrice=3.50 (truncated)...]
Hibernate: 
    
SET
    REFERENTIAL_INTEGRITY FALSE
Hibernate: 
    TRUNCATE TABLE allergen RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE product RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE order_header RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE recipe_component RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE recipe RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE inventory_audit RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE recipe_audit RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE order_detail RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE recipe_allergen RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE users RESTART IDENTITY
Hibernate: 
    
SET
    REFERENTIAL_INTEGRITY TRUE
Hibernate: 
    insert 
    into
        users
        (email, name, password, role) 
    values
        (?, ?, ?, ?)
2026-01-30T22:38:22.130Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Securing POST /api/auth/login
2026-01-30T22:38:22.130Z DEBUG 372594 --- [inventory] [           main] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2026-01-30T22:38:22.131Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Secured POST /api/auth/login
2026-01-30T22:38:22.131Z DEBUG 372594 --- [inventory] [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.economatom.inventory.controller.AuthController#authenticateUser(LoginRequestDTO)
2026-01-30T22:38:22.131Z DEBUG 372594 --- [inventory] [           main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [LoginRequestDTO(name=Admin, password=admin123)]
Hibernate: 
    select
        u1_0.user_id,
        u1_0.email,
        u1_0.name,
        u1_0.password,
        u1_0.role 
    from
        users u1_0 
    where
        u1_0.name=?
2026-01-30T22:38:22.172Z DEBUG 372594 --- [inventory] [           main] o.s.s.a.dao.DaoAuthenticationProvider    : Authenticated user
2026-01-30T22:38:22.173Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T22:38:22.173Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [LoginResponseDTO(token=eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJBZG1pbiIsImlhdCI6MTc2OTgxMjcwMiwiZXhwIjoxNzY5 (truncated)...]
Hibernate: 
    insert 
    into
        product
        (current_stock, name, product_code, type, unit_of_measure, unit_price, version) 
    values
        (?, ?, ?, ?, ?, ?, ?)
2026-01-30T22:38:22.176Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Securing POST /api/products
Hibernate: 
    select
        u1_0.user_id,
        u1_0.email,
        u1_0.name,
        u1_0.password,
        u1_0.role 
    from
        users u1_0 
    where
        u1_0.name=?
2026-01-30T22:38:22.179Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Secured POST /api/products
2026-01-30T22:38:22.179Z DEBUG 372594 --- [inventory] [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.economatom.inventory.controller.ProductController#createProduct(ProductRequestDTO)
2026-01-30T22:38:22.179Z DEBUG 372594 --- [inventory] [           main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [ProductRequestDTO(name=Harina de trigo, type=Ingrediente, unit=KG, unitPrice=2.50, productCode=HAR00 (truncated)...]
Hibernate: 
    select
        p1_0.product_id 
    from
        product p1_0 
    where
        p1_0.name=? 
    fetch
        first ? rows only
Hibernate: 
    insert 
    into
        product
        (current_stock, name, product_code, type, unit_of_measure, unit_price, version) 
    values
        (?, ?, ?, ?, ?, ?, ?)
2026-01-30T22:38:22.181Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T22:38:22.181Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ProductResponseDTO(id=2, name=Harina de trigo, type=Ingrediente, unit=KG, unitPrice=2.50, productCod (truncated)...]
Hibernate: 
    
SET
    REFERENTIAL_INTEGRITY FALSE
Hibernate: 
    TRUNCATE TABLE allergen RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE product RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE order_header RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE recipe_component RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE recipe RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE inventory_audit RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE recipe_audit RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE order_detail RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE recipe_allergen RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE users RESTART IDENTITY
Hibernate: 
    
SET
    REFERENTIAL_INTEGRITY TRUE
Hibernate: 
    insert 
    into
        users
        (email, name, password, role) 
    values
        (?, ?, ?, ?)
2026-01-30T22:38:22.265Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Securing POST /api/auth/login
2026-01-30T22:38:22.265Z DEBUG 372594 --- [inventory] [           main] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2026-01-30T22:38:22.265Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Secured POST /api/auth/login
2026-01-30T22:38:22.266Z DEBUG 372594 --- [inventory] [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.economatom.inventory.controller.AuthController#authenticateUser(LoginRequestDTO)
2026-01-30T22:38:22.266Z DEBUG 372594 --- [inventory] [           main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [LoginRequestDTO(name=Admin, password=admin123)]
Hibernate: 
    select
        u1_0.user_id,
        u1_0.email,
        u1_0.name,
        u1_0.password,
        u1_0.role 
    from
        users u1_0 
    where
        u1_0.name=?
2026-01-30T22:38:22.307Z DEBUG 372594 --- [inventory] [           main] o.s.s.a.dao.DaoAuthenticationProvider    : Authenticated user
2026-01-30T22:38:22.308Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T22:38:22.308Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [LoginResponseDTO(token=eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJBZG1pbiIsImlhdCI6MTc2OTgxMjcwMiwiZXhwIjoxNzY5 (truncated)...]
Hibernate: 
    insert 
    into
        product
        (current_stock, name, product_code, type, unit_of_measure, unit_price, version) 
    values
        (?, ?, ?, ?, ?, ?, ?)
2026-01-30T22:38:22.310Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Securing GET /api/products
Hibernate: 
    select
        u1_0.user_id,
        u1_0.email,
        u1_0.name,
        u1_0.password,
        u1_0.role 
    from
        users u1_0 
    where
        u1_0.name=?
2026-01-30T22:38:22.313Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Secured GET /api/products
2026-01-30T22:38:22.313Z DEBUG 372594 --- [inventory] [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.economatom.inventory.controller.ProductController#getAllProducts(Pageable)
Hibernate: 
    select
        p1_0.product_id,
        p1_0.current_stock,
        p1_0.name,
        p1_0.product_code,
        p1_0.type,
        p1_0.unit_of_measure,
        p1_0.unit_price,
        p1_0.version 
    from
        product p1_0 
    offset
        ? rows 
    fetch
        first ? rows only
2026-01-30T22:38:22.315Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T22:38:22.315Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [Page 1 of 1 containing com.economatom.inventory.dto.response.ProductResponseDTO instances]
[INFO] Tests run: 5, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.708 s -- in com.economatom.inventory.controller.ProductControllerIntegrationTest
[INFO] Running com.economatom.inventory.controller.RecipeAllergenControllerIntegrationTest
2026-01-30T22:38:22.319Z  INFO 372594 --- [inventory] [           main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [com.economatom.inventory.controller.RecipeAllergenControllerIntegrationTest]: RecipeAllergenControllerIntegrationTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2026-01-30T22:38:22.319Z  INFO 372594 --- [inventory] [           main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration com.economatom.inventory.InventoryApplication for test class com.economatom.inventory.controller.RecipeAllergenControllerIntegrationTest
Hibernate: 
    
SET
    REFERENTIAL_INTEGRITY FALSE
Hibernate: 
    TRUNCATE TABLE allergen RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE product RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE order_header RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE recipe_component RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE recipe RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE inventory_audit RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE recipe_audit RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE order_detail RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE recipe_allergen RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE users RESTART IDENTITY
Hibernate: 
    
SET
    REFERENTIAL_INTEGRITY TRUE
Hibernate: 
    insert 
    into
        users
        (email, name, password, role) 
    values
        (?, ?, ?, ?)
2026-01-30T22:38:22.364Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Securing POST /api/auth/login
2026-01-30T22:38:22.364Z DEBUG 372594 --- [inventory] [           main] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2026-01-30T22:38:22.364Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Secured POST /api/auth/login
2026-01-30T22:38:22.364Z DEBUG 372594 --- [inventory] [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.economatom.inventory.controller.AuthController#authenticateUser(LoginRequestDTO)
2026-01-30T22:38:22.365Z DEBUG 372594 --- [inventory] [           main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [LoginRequestDTO(name=Admin, password=admin123)]
Hibernate: 
    select
        u1_0.user_id,
        u1_0.email,
        u1_0.name,
        u1_0.password,
        u1_0.role 
    from
        users u1_0 
    where
        u1_0.name=?
2026-01-30T22:38:22.406Z DEBUG 372594 --- [inventory] [           main] o.s.s.a.dao.DaoAuthenticationProvider    : Authenticated user
2026-01-30T22:38:22.406Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T22:38:22.406Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [LoginResponseDTO(token=eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJBZG1pbiIsImlhdCI6MTc2OTgxMjcwMiwiZXhwIjoxNzY5 (truncated)...]
Hibernate: 
    insert 
    into
        allergen
        (name) 
    values
        (?)
Hibernate: 
    insert 
    into
        allergen
        (name) 
    values
        (?)
Hibernate: 
    insert 
    into
        recipe
        (elaboration, recipe_name, presentation, total_cost, version) 
    values
        (?, ?, ?, ?, ?)
Hibernate: 
    insert 
    into
        recipe_allergen
        (recipe_id, allergen_id) 
    values
        (?, ?)
Hibernate: 
    insert 
    into
        recipe_allergen
        (recipe_id, allergen_id) 
    values
        (?, ?)
2026-01-30T22:38:22.415Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Securing POST /api/recipe-allergens/1/999
Hibernate: 
    select
        u1_0.user_id,
        u1_0.email,
        u1_0.name,
        u1_0.password,
        u1_0.role 
    from
        users u1_0 
    where
        u1_0.name=?
2026-01-30T22:38:22.417Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Secured POST /api/recipe-allergens/1/999
2026-01-30T22:38:22.417Z DEBUG 372594 --- [inventory] [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.economatom.inventory.controller.RecipeAllergenController#addAllergenToRecipe(Integer, Integer)
Hibernate: 
    select
        r1_0.recipe_id,
        r1_0.elaboration,
        r1_0.recipe_name,
        r1_0.presentation,
        r1_0.total_cost,
        r1_0.version 
    from
        recipe r1_0 
    where
        r1_0.recipe_id=?
Hibernate: 
    select
        a1_0.allergen_id,
        a1_0.name 
    from
        allergen a1_0 
    where
        a1_0.allergen_id=?
2026-01-30T22:38:22.420Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T22:38:22.420Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Nothing to write: null body
Hibernate: 
    
SET
    REFERENTIAL_INTEGRITY FALSE
Hibernate: 
    TRUNCATE TABLE allergen RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE product RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE order_header RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE recipe_component RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE recipe RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE inventory_audit RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE recipe_audit RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE order_detail RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE recipe_allergen RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE users RESTART IDENTITY
Hibernate: 
    
SET
    REFERENTIAL_INTEGRITY TRUE
Hibernate: 
    insert 
    into
        users
        (email, name, password, role) 
    values
        (?, ?, ?, ?)
2026-01-30T22:38:22.466Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Securing POST /api/auth/login
2026-01-30T22:38:22.466Z DEBUG 372594 --- [inventory] [           main] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2026-01-30T22:38:22.466Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Secured POST /api/auth/login
2026-01-30T22:38:22.466Z DEBUG 372594 --- [inventory] [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.economatom.inventory.controller.AuthController#authenticateUser(LoginRequestDTO)
2026-01-30T22:38:22.467Z DEBUG 372594 --- [inventory] [           main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [LoginRequestDTO(name=Admin, password=admin123)]
Hibernate: 
    select
        u1_0.user_id,
        u1_0.email,
        u1_0.name,
        u1_0.password,
        u1_0.role 
    from
        users u1_0 
    where
        u1_0.name=?
2026-01-30T22:38:22.507Z DEBUG 372594 --- [inventory] [           main] o.s.s.a.dao.DaoAuthenticationProvider    : Authenticated user
2026-01-30T22:38:22.508Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T22:38:22.508Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [LoginResponseDTO(token=eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJBZG1pbiIsImlhdCI6MTc2OTgxMjcwMiwiZXhwIjoxNzY5 (truncated)...]
Hibernate: 
    insert 
    into
        allergen
        (name) 
    values
        (?)
Hibernate: 
    insert 
    into
        allergen
        (name) 
    values
        (?)
Hibernate: 
    insert 
    into
        recipe
        (elaboration, recipe_name, presentation, total_cost, version) 
    values
        (?, ?, ?, ?, ?)
Hibernate: 
    insert 
    into
        recipe_allergen
        (recipe_id, allergen_id) 
    values
        (?, ?)
Hibernate: 
    insert 
    into
        recipe_allergen
        (recipe_id, allergen_id) 
    values
        (?, ?)
2026-01-30T22:38:22.512Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Securing POST /api/recipe-allergens/999/1
Hibernate: 
    select
        u1_0.user_id,
        u1_0.email,
        u1_0.name,
        u1_0.password,
        u1_0.role 
    from
        users u1_0 
    where
        u1_0.name=?
2026-01-30T22:38:22.514Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Secured POST /api/recipe-allergens/999/1
2026-01-30T22:38:22.514Z DEBUG 372594 --- [inventory] [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.economatom.inventory.controller.RecipeAllergenController#addAllergenToRecipe(Integer, Integer)
Hibernate: 
    select
        r1_0.recipe_id,
        r1_0.elaboration,
        r1_0.recipe_name,
        r1_0.presentation,
        r1_0.total_cost,
        r1_0.version 
    from
        recipe r1_0 
    where
        r1_0.recipe_id=?
Hibernate: 
    select
        a1_0.allergen_id,
        a1_0.name 
    from
        allergen a1_0 
    where
        a1_0.allergen_id=?
2026-01-30T22:38:22.515Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T22:38:22.515Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Nothing to write: null body
Hibernate: 
    
SET
    REFERENTIAL_INTEGRITY FALSE
Hibernate: 
    TRUNCATE TABLE allergen RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE product RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE order_header RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE recipe_component RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE recipe RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE inventory_audit RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE recipe_audit RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE order_detail RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE recipe_allergen RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE users RESTART IDENTITY
Hibernate: 
    
SET
    REFERENTIAL_INTEGRITY TRUE
Hibernate: 
    insert 
    into
        users
        (email, name, password, role) 
    values
        (?, ?, ?, ?)
2026-01-30T22:38:22.560Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Securing POST /api/auth/login
2026-01-30T22:38:22.560Z DEBUG 372594 --- [inventory] [           main] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2026-01-30T22:38:22.561Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Secured POST /api/auth/login
2026-01-30T22:38:22.561Z DEBUG 372594 --- [inventory] [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.economatom.inventory.controller.AuthController#authenticateUser(LoginRequestDTO)
2026-01-30T22:38:22.561Z DEBUG 372594 --- [inventory] [           main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [LoginRequestDTO(name=Admin, password=admin123)]
Hibernate: 
    select
        u1_0.user_id,
        u1_0.email,
        u1_0.name,
        u1_0.password,
        u1_0.role 
    from
        users u1_0 
    where
        u1_0.name=?
2026-01-30T22:38:22.602Z DEBUG 372594 --- [inventory] [           main] o.s.s.a.dao.DaoAuthenticationProvider    : Authenticated user
2026-01-30T22:38:22.603Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T22:38:22.603Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [LoginResponseDTO(token=eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJBZG1pbiIsImlhdCI6MTc2OTgxMjcwMiwiZXhwIjoxNzY5 (truncated)...]
Hibernate: 
    insert 
    into
        allergen
        (name) 
    values
        (?)
Hibernate: 
    insert 
    into
        allergen
        (name) 
    values
        (?)
Hibernate: 
    insert 
    into
        recipe
        (elaboration, recipe_name, presentation, total_cost, version) 
    values
        (?, ?, ?, ?, ?)
Hibernate: 
    insert 
    into
        recipe_allergen
        (recipe_id, allergen_id) 
    values
        (?, ?)
Hibernate: 
    insert 
    into
        recipe_allergen
        (recipe_id, allergen_id) 
    values
        (?, ?)
2026-01-30T22:38:22.607Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Securing POST /api/recipe-allergens/1/1
Hibernate: 
    select
        u1_0.user_id,
        u1_0.email,
        u1_0.name,
        u1_0.password,
        u1_0.role 
    from
        users u1_0 
    where
        u1_0.name=?
2026-01-30T22:38:22.609Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Secured POST /api/recipe-allergens/1/1
2026-01-30T22:38:22.609Z DEBUG 372594 --- [inventory] [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.economatom.inventory.controller.RecipeAllergenController#addAllergenToRecipe(Integer, Integer)
Hibernate: 
    select
        r1_0.recipe_id,
        r1_0.elaboration,
        r1_0.recipe_name,
        r1_0.presentation,
        r1_0.total_cost,
        r1_0.version 
    from
        recipe r1_0 
    where
        r1_0.recipe_id=?
Hibernate: 
    select
        a1_0.allergen_id,
        a1_0.name 
    from
        allergen a1_0 
    where
        a1_0.allergen_id=?
Hibernate: 
    select
        ra1_0.id,
        ra1_0.allergen_id,
        ra1_0.recipe_id 
    from
        recipe_allergen ra1_0 
    where
        ra1_0.recipe_id=? 
        and ra1_0.allergen_id=?
2026-01-30T22:38:22.614Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T22:38:22.614Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Nothing to write: null body
2026-01-30T22:38:22.615Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Securing GET /api/recipe-allergens/recipe/1/allergens
Hibernate: 
    select
        u1_0.user_id,
        u1_0.email,
        u1_0.name,
        u1_0.password,
        u1_0.role 
    from
        users u1_0 
    where
        u1_0.name=?
2026-01-30T22:38:22.617Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Secured GET /api/recipe-allergens/recipe/1/allergens
2026-01-30T22:38:22.617Z DEBUG 372594 --- [inventory] [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.economatom.inventory.controller.RecipeAllergenController#getAllergensForRecipe(Integer)
Hibernate: 
    select
        r1_0.recipe_id,
        r1_0.elaboration,
        r1_0.recipe_name,
        r1_0.presentation,
        r1_0.total_cost,
        r1_0.version 
    from
        recipe r1_0 
    where
        r1_0.recipe_id=?
Hibernate: 
    select
        ra1_0.id,
        ra1_0.allergen_id,
        ra1_0.recipe_id 
    from
        recipe_allergen ra1_0 
    where
        ra1_0.recipe_id=?
Hibernate: 
    select
        a1_0.allergen_id,
        a1_0.name 
    from
        allergen a1_0 
    where
        a1_0.allergen_id=?
Hibernate: 
    select
        a1_0.allergen_id,
        a1_0.name 
    from
        allergen a1_0 
    where
        a1_0.allergen_id=?
2026-01-30T22:38:22.621Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T22:38:22.621Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [[AllergenResponseDTO(id=1, name=Gluten), AllergenResponseDTO(id=2, name=Huevos)]]

MockHttpServletRequest:
      HTTP Method = GET
      Request URI = /api/recipe-allergens/recipe/1/allergens
       Parameters = {}
          Headers = [Authorization:"Bearer eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJBZG1pbiIsImlhdCI6MTc2OTgxMjcwMiwiZXhwIjoxNzY5ODEzNTAyfQ.sgB_68KTqUUAuOjdQEOUHwKXOC8fxFnoQAzsXY1dxEk"]
             Body = null
    Session Attrs = {}

Handler:
             Type = com.economatom.inventory.controller.RecipeAllergenController
           Method = com.economatom.inventory.controller.RecipeAllergenController#getAllergensForRecipe(Integer)

Async:
    Async started = false
     Async result = null

Resolved Exception:
             Type = null

ModelAndView:
        View name = null
             View = null
            Model = null

FlashMap:
       Attributes = null

MockHttpServletResponse:
           Status = 200
    Error message = null
          Headers = [Vary:"Origin", "Access-Control-Request-Method", "Access-Control-Request-Headers", Content-Type:"application/json", X-Content-Type-Options:"nosniff", X-XSS-Protection:"0", Cache-Control:"no-cache, no-store, max-age=0, must-revalidate", Pragma:"no-cache", Expires:"0", X-Frame-Options:"DENY"]
     Content type = application/json
             Body = [{"id":1,"name":"Gluten"},{"id":2,"name":"Huevos"}]
    Forwarded URL = null
   Redirected URL = null
          Cookies = []
Hibernate: 
    
SET
    REFERENTIAL_INTEGRITY FALSE
Hibernate: 
    TRUNCATE TABLE allergen RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE product RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE order_header RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE recipe_component RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE recipe RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE inventory_audit RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE recipe_audit RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE order_detail RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE recipe_allergen RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE users RESTART IDENTITY
Hibernate: 
    
SET
    REFERENTIAL_INTEGRITY TRUE
Hibernate: 
    insert 
    into
        users
        (email, name, password, role) 
    values
        (?, ?, ?, ?)
2026-01-30T22:38:22.668Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Securing POST /api/auth/login
2026-01-30T22:38:22.668Z DEBUG 372594 --- [inventory] [           main] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2026-01-30T22:38:22.668Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Secured POST /api/auth/login
2026-01-30T22:38:22.668Z DEBUG 372594 --- [inventory] [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.economatom.inventory.controller.AuthController#authenticateUser(LoginRequestDTO)
2026-01-30T22:38:22.668Z DEBUG 372594 --- [inventory] [           main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [LoginRequestDTO(name=Admin, password=admin123)]
Hibernate: 
    select
        u1_0.user_id,
        u1_0.email,
        u1_0.name,
        u1_0.password,
        u1_0.role 
    from
        users u1_0 
    where
        u1_0.name=?
2026-01-30T22:38:22.709Z DEBUG 372594 --- [inventory] [           main] o.s.s.a.dao.DaoAuthenticationProvider    : Authenticated user
2026-01-30T22:38:22.711Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T22:38:22.711Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [LoginResponseDTO(token=eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJBZG1pbiIsImlhdCI6MTc2OTgxMjcwMiwiZXhwIjoxNzY5 (truncated)...]
Hibernate: 
    insert 
    into
        allergen
        (name) 
    values
        (?)
Hibernate: 
    insert 
    into
        allergen
        (name) 
    values
        (?)
Hibernate: 
    insert 
    into
        recipe
        (elaboration, recipe_name, presentation, total_cost, version) 
    values
        (?, ?, ?, ?, ?)
Hibernate: 
    insert 
    into
        recipe_allergen
        (recipe_id, allergen_id) 
    values
        (?, ?)
Hibernate: 
    insert 
    into
        recipe_allergen
        (recipe_id, allergen_id) 
    values
        (?, ?)
2026-01-30T22:38:22.715Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Securing GET /api/recipe-allergens/recipe/999/allergens
Hibernate: 
    select
        u1_0.user_id,
        u1_0.email,
        u1_0.name,
        u1_0.password,
        u1_0.role 
    from
        users u1_0 
    where
        u1_0.name=?
2026-01-30T22:38:22.718Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Secured GET /api/recipe-allergens/recipe/999/allergens
2026-01-30T22:38:22.718Z DEBUG 372594 --- [inventory] [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.economatom.inventory.controller.RecipeAllergenController#getAllergensForRecipe(Integer)
Hibernate: 
    select
        r1_0.recipe_id,
        r1_0.elaboration,
        r1_0.recipe_name,
        r1_0.presentation,
        r1_0.total_cost,
        r1_0.version 
    from
        recipe r1_0 
    where
        r1_0.recipe_id=?
2026-01-30T22:38:22.719Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T22:38:22.719Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Nothing to write: null body
Hibernate: 
    
SET
    REFERENTIAL_INTEGRITY FALSE
Hibernate: 
    TRUNCATE TABLE allergen RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE product RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE order_header RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE recipe_component RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE recipe RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE inventory_audit RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE recipe_audit RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE order_detail RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE recipe_allergen RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE users RESTART IDENTITY
Hibernate: 
    
SET
    REFERENTIAL_INTEGRITY TRUE
Hibernate: 
    insert 
    into
        users
        (email, name, password, role) 
    values
        (?, ?, ?, ?)
2026-01-30T22:38:22.764Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Securing POST /api/auth/login
2026-01-30T22:38:22.765Z DEBUG 372594 --- [inventory] [           main] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2026-01-30T22:38:22.765Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Secured POST /api/auth/login
2026-01-30T22:38:22.765Z DEBUG 372594 --- [inventory] [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.economatom.inventory.controller.AuthController#authenticateUser(LoginRequestDTO)
2026-01-30T22:38:22.765Z DEBUG 372594 --- [inventory] [           main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [LoginRequestDTO(name=Admin, password=admin123)]
Hibernate: 
    select
        u1_0.user_id,
        u1_0.email,
        u1_0.name,
        u1_0.password,
        u1_0.role 
    from
        users u1_0 
    where
        u1_0.name=?
2026-01-30T22:38:22.806Z DEBUG 372594 --- [inventory] [           main] o.s.s.a.dao.DaoAuthenticationProvider    : Authenticated user
2026-01-30T22:38:22.807Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T22:38:22.807Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [LoginResponseDTO(token=eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJBZG1pbiIsImlhdCI6MTc2OTgxMjcwMiwiZXhwIjoxNzY5 (truncated)...]
Hibernate: 
    insert 
    into
        allergen
        (name) 
    values
        (?)
Hibernate: 
    insert 
    into
        allergen
        (name) 
    values
        (?)
Hibernate: 
    insert 
    into
        recipe
        (elaboration, recipe_name, presentation, total_cost, version) 
    values
        (?, ?, ?, ?, ?)
Hibernate: 
    insert 
    into
        recipe_allergen
        (recipe_id, allergen_id) 
    values
        (?, ?)
Hibernate: 
    insert 
    into
        recipe_allergen
        (recipe_id, allergen_id) 
    values
        (?, ?)
2026-01-30T22:38:22.810Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Securing POST /api/recipe-allergens/1/1
Hibernate: 
    select
        u1_0.user_id,
        u1_0.email,
        u1_0.name,
        u1_0.password,
        u1_0.role 
    from
        users u1_0 
    where
        u1_0.name=?
2026-01-30T22:38:22.813Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Secured POST /api/recipe-allergens/1/1
2026-01-30T22:38:22.813Z DEBUG 372594 --- [inventory] [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.economatom.inventory.controller.RecipeAllergenController#addAllergenToRecipe(Integer, Integer)
Hibernate: 
    select
        r1_0.recipe_id,
        r1_0.elaboration,
        r1_0.recipe_name,
        r1_0.presentation,
        r1_0.total_cost,
        r1_0.version 
    from
        recipe r1_0 
    where
        r1_0.recipe_id=?
Hibernate: 
    select
        a1_0.allergen_id,
        a1_0.name 
    from
        allergen a1_0 
    where
        a1_0.allergen_id=?
Hibernate: 
    select
        ra1_0.id,
        ra1_0.allergen_id,
        ra1_0.recipe_id 
    from
        recipe_allergen ra1_0 
    where
        ra1_0.recipe_id=? 
        and ra1_0.allergen_id=?
2026-01-30T22:38:22.815Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T22:38:22.815Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Nothing to write: null body
Hibernate: 
    
SET
    REFERENTIAL_INTEGRITY FALSE
Hibernate: 
    TRUNCATE TABLE allergen RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE product RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE order_header RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE recipe_component RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE recipe RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE inventory_audit RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE recipe_audit RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE order_detail RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE recipe_allergen RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE users RESTART IDENTITY
Hibernate: 
    
SET
    REFERENTIAL_INTEGRITY TRUE
Hibernate: 
    insert 
    into
        users
        (email, name, password, role) 
    values
        (?, ?, ?, ?)
2026-01-30T22:38:22.859Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Securing POST /api/auth/login
2026-01-30T22:38:22.860Z DEBUG 372594 --- [inventory] [           main] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2026-01-30T22:38:22.860Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Secured POST /api/auth/login
2026-01-30T22:38:22.860Z DEBUG 372594 --- [inventory] [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.economatom.inventory.controller.AuthController#authenticateUser(LoginRequestDTO)
2026-01-30T22:38:22.860Z DEBUG 372594 --- [inventory] [           main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [LoginRequestDTO(name=Admin, password=admin123)]
Hibernate: 
    select
        u1_0.user_id,
        u1_0.email,
        u1_0.name,
        u1_0.password,
        u1_0.role 
    from
        users u1_0 
    where
        u1_0.name=?
2026-01-30T22:38:22.901Z DEBUG 372594 --- [inventory] [           main] o.s.s.a.dao.DaoAuthenticationProvider    : Authenticated user
2026-01-30T22:38:22.902Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T22:38:22.902Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [LoginResponseDTO(token=eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJBZG1pbiIsImlhdCI6MTc2OTgxMjcwMiwiZXhwIjoxNzY5 (truncated)...]
Hibernate: 
    insert 
    into
        allergen
        (name) 
    values
        (?)
Hibernate: 
    insert 
    into
        allergen
        (name) 
    values
        (?)
Hibernate: 
    insert 
    into
        recipe
        (elaboration, recipe_name, presentation, total_cost, version) 
    values
        (?, ?, ?, ?, ?)
Hibernate: 
    insert 
    into
        recipe_allergen
        (recipe_id, allergen_id) 
    values
        (?, ?)
Hibernate: 
    insert 
    into
        recipe_allergen
        (recipe_id, allergen_id) 
    values
        (?, ?)
2026-01-30T22:38:22.906Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Securing DELETE /api/recipe-allergens/recipe/1/allergen/999
Hibernate: 
    select
        u1_0.user_id,
        u1_0.email,
        u1_0.name,
        u1_0.password,
        u1_0.role 
    from
        users u1_0 
    where
        u1_0.name=?
2026-01-30T22:38:22.909Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Secured DELETE /api/recipe-allergens/recipe/1/allergen/999
2026-01-30T22:38:22.909Z DEBUG 372594 --- [inventory] [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.economatom.inventory.controller.RecipeAllergenController#removeAllergenFromRecipe(Integer, Integer)
Hibernate: 
    select
        r1_0.recipe_id,
        r1_0.elaboration,
        r1_0.recipe_name,
        r1_0.presentation,
        r1_0.total_cost,
        r1_0.version 
    from
        recipe r1_0 
    where
        r1_0.recipe_id=?
Hibernate: 
    select
        a1_0.allergen_id,
        a1_0.name 
    from
        allergen a1_0 
    where
        a1_0.allergen_id=?
2026-01-30T22:38:22.911Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T22:38:22.911Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Nothing to write: null body
Hibernate: 
    
SET
    REFERENTIAL_INTEGRITY FALSE
Hibernate: 
    TRUNCATE TABLE allergen RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE product RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE order_header RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE recipe_component RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE recipe RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE inventory_audit RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE recipe_audit RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE order_detail RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE recipe_allergen RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE users RESTART IDENTITY
Hibernate: 
    
SET
    REFERENTIAL_INTEGRITY TRUE
Hibernate: 
    insert 
    into
        users
        (email, name, password, role) 
    values
        (?, ?, ?, ?)
2026-01-30T22:38:22.955Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Securing POST /api/auth/login
2026-01-30T22:38:22.956Z DEBUG 372594 --- [inventory] [           main] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2026-01-30T22:38:22.956Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Secured POST /api/auth/login
2026-01-30T22:38:22.956Z DEBUG 372594 --- [inventory] [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.economatom.inventory.controller.AuthController#authenticateUser(LoginRequestDTO)
2026-01-30T22:38:22.956Z DEBUG 372594 --- [inventory] [           main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [LoginRequestDTO(name=Admin, password=admin123)]
Hibernate: 
    select
        u1_0.user_id,
        u1_0.email,
        u1_0.name,
        u1_0.password,
        u1_0.role 
    from
        users u1_0 
    where
        u1_0.name=?
2026-01-30T22:38:22.997Z DEBUG 372594 --- [inventory] [           main] o.s.s.a.dao.DaoAuthenticationProvider    : Authenticated user
2026-01-30T22:38:22.997Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T22:38:22.997Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [LoginResponseDTO(token=eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJBZG1pbiIsImlhdCI6MTc2OTgxMjcwMiwiZXhwIjoxNzY5 (truncated)...]
Hibernate: 
    insert 
    into
        allergen
        (name) 
    values
        (?)
Hibernate: 
    insert 
    into
        allergen
        (name) 
    values
        (?)
Hibernate: 
    insert 
    into
        recipe
        (elaboration, recipe_name, presentation, total_cost, version) 
    values
        (?, ?, ?, ?, ?)
Hibernate: 
    insert 
    into
        recipe_allergen
        (recipe_id, allergen_id) 
    values
        (?, ?)
Hibernate: 
    insert 
    into
        recipe_allergen
        (recipe_id, allergen_id) 
    values
        (?, ?)
2026-01-30T22:38:23.001Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Securing POST /api/recipe-allergens/1/1
Hibernate: 
    select
        u1_0.user_id,
        u1_0.email,
        u1_0.name,
        u1_0.password,
        u1_0.role 
    from
        users u1_0 
    where
        u1_0.name=?
2026-01-30T22:38:23.004Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Secured POST /api/recipe-allergens/1/1
2026-01-30T22:38:23.004Z DEBUG 372594 --- [inventory] [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.economatom.inventory.controller.RecipeAllergenController#addAllergenToRecipe(Integer, Integer)
Hibernate: 
    select
        r1_0.recipe_id,
        r1_0.elaboration,
        r1_0.recipe_name,
        r1_0.presentation,
        r1_0.total_cost,
        r1_0.version 
    from
        recipe r1_0 
    where
        r1_0.recipe_id=?
Hibernate: 
    select
        a1_0.allergen_id,
        a1_0.name 
    from
        allergen a1_0 
    where
        a1_0.allergen_id=?
Hibernate: 
    select
        ra1_0.id,
        ra1_0.allergen_id,
        ra1_0.recipe_id 
    from
        recipe_allergen ra1_0 
    where
        ra1_0.recipe_id=? 
        and ra1_0.allergen_id=?
2026-01-30T22:38:23.006Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T22:38:23.006Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Nothing to write: null body
2026-01-30T22:38:23.007Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Securing DELETE /api/recipe-allergens/recipe/1/allergen/1
Hibernate: 
    select
        u1_0.user_id,
        u1_0.email,
        u1_0.name,
        u1_0.password,
        u1_0.role 
    from
        users u1_0 
    where
        u1_0.name=?
2026-01-30T22:38:23.009Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Secured DELETE /api/recipe-allergens/recipe/1/allergen/1
2026-01-30T22:38:23.009Z DEBUG 372594 --- [inventory] [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.economatom.inventory.controller.RecipeAllergenController#removeAllergenFromRecipe(Integer, Integer)
Hibernate: 
    select
        r1_0.recipe_id,
        r1_0.elaboration,
        r1_0.recipe_name,
        r1_0.presentation,
        r1_0.total_cost,
        r1_0.version 
    from
        recipe r1_0 
    where
        r1_0.recipe_id=?
Hibernate: 
    select
        a1_0.allergen_id,
        a1_0.name 
    from
        allergen a1_0 
    where
        a1_0.allergen_id=?
Hibernate: 
    select
        ra1_0.id,
        ra1_0.allergen_id,
        ra1_0.recipe_id 
    from
        recipe_allergen ra1_0 
    where
        ra1_0.recipe_id=? 
        and ra1_0.allergen_id=?
Hibernate: 
    delete 
    from
        recipe_allergen 
    where
        id=?
2026-01-30T22:38:23.011Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T22:38:23.011Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Nothing to write: null body
Hibernate: 
    
SET
    REFERENTIAL_INTEGRITY FALSE
Hibernate: 
    TRUNCATE TABLE allergen RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE product RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE order_header RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE recipe_component RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE recipe RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE inventory_audit RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE recipe_audit RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE order_detail RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE recipe_allergen RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE users RESTART IDENTITY
Hibernate: 
    
SET
    REFERENTIAL_INTEGRITY TRUE
Hibernate: 
    insert 
    into
        users
        (email, name, password, role) 
    values
        (?, ?, ?, ?)
2026-01-30T22:38:23.056Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Securing POST /api/auth/login
2026-01-30T22:38:23.057Z DEBUG 372594 --- [inventory] [           main] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2026-01-30T22:38:23.057Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Secured POST /api/auth/login
2026-01-30T22:38:23.057Z DEBUG 372594 --- [inventory] [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.economatom.inventory.controller.AuthController#authenticateUser(LoginRequestDTO)
2026-01-30T22:38:23.057Z DEBUG 372594 --- [inventory] [           main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [LoginRequestDTO(name=Admin, password=admin123)]
Hibernate: 
    select
        u1_0.user_id,
        u1_0.email,
        u1_0.name,
        u1_0.password,
        u1_0.role 
    from
        users u1_0 
    where
        u1_0.name=?
2026-01-30T22:38:23.098Z DEBUG 372594 --- [inventory] [           main] o.s.s.a.dao.DaoAuthenticationProvider    : Authenticated user
2026-01-30T22:38:23.099Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T22:38:23.099Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [LoginResponseDTO(token=eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJBZG1pbiIsImlhdCI6MTc2OTgxMjcwMywiZXhwIjoxNzY5 (truncated)...]
Hibernate: 
    insert 
    into
        allergen
        (name) 
    values
        (?)
Hibernate: 
    insert 
    into
        allergen
        (name) 
    values
        (?)
Hibernate: 
    insert 
    into
        recipe
        (elaboration, recipe_name, presentation, total_cost, version) 
    values
        (?, ?, ?, ?, ?)
Hibernate: 
    insert 
    into
        recipe_allergen
        (recipe_id, allergen_id) 
    values
        (?, ?)
Hibernate: 
    insert 
    into
        recipe_allergen
        (recipe_id, allergen_id) 
    values
        (?, ?)
2026-01-30T22:38:23.103Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Securing DELETE /api/recipe-allergens/recipe/999/allergen/1
Hibernate: 
    select
        u1_0.user_id,
        u1_0.email,
        u1_0.name,
        u1_0.password,
        u1_0.role 
    from
        users u1_0 
    where
        u1_0.name=?
2026-01-30T22:38:23.105Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Secured DELETE /api/recipe-allergens/recipe/999/allergen/1
2026-01-30T22:38:23.105Z DEBUG 372594 --- [inventory] [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.economatom.inventory.controller.RecipeAllergenController#removeAllergenFromRecipe(Integer, Integer)
Hibernate: 
    select
        r1_0.recipe_id,
        r1_0.elaboration,
        r1_0.recipe_name,
        r1_0.presentation,
        r1_0.total_cost,
        r1_0.version 
    from
        recipe r1_0 
    where
        r1_0.recipe_id=?
Hibernate: 
    select
        a1_0.allergen_id,
        a1_0.name 
    from
        allergen a1_0 
    where
        a1_0.allergen_id=?
2026-01-30T22:38:23.107Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T22:38:23.107Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Nothing to write: null body
[INFO] Tests run: 8, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.791 s -- in com.economatom.inventory.controller.RecipeAllergenControllerIntegrationTest
[INFO] Running com.economatom.inventory.controller.RecipeComponentControllerIntegrationTest
2026-01-30T22:38:23.110Z  INFO 372594 --- [inventory] [           main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [com.economatom.inventory.controller.RecipeComponentControllerIntegrationTest]: RecipeComponentControllerIntegrationTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2026-01-30T22:38:23.111Z  INFO 372594 --- [inventory] [           main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration com.economatom.inventory.InventoryApplication for test class com.economatom.inventory.controller.RecipeComponentControllerIntegrationTest
Hibernate: 
    
SET
    REFERENTIAL_INTEGRITY FALSE
Hibernate: 
    TRUNCATE TABLE allergen RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE product RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE order_header RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE recipe_component RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE recipe RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE inventory_audit RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE recipe_audit RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE order_detail RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE recipe_allergen RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE users RESTART IDENTITY
Hibernate: 
    
SET
    REFERENTIAL_INTEGRITY TRUE
Hibernate: 
    insert 
    into
        users
        (email, name, password, role) 
    values
        (?, ?, ?, ?)
Hibernate: 
    insert 
    into
        product
        (current_stock, name, product_code, type, unit_of_measure, unit_price, version) 
    values
        (?, ?, ?, ?, ?, ?, ?)
Hibernate: 
    insert 
    into
        recipe
        (elaboration, recipe_name, presentation, total_cost, version) 
    values
        (?, ?, ?, ?, ?)
2026-01-30T22:38:23.156Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Securing POST /api/auth/login
2026-01-30T22:38:23.157Z DEBUG 372594 --- [inventory] [           main] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2026-01-30T22:38:23.157Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Secured POST /api/auth/login
2026-01-30T22:38:23.157Z DEBUG 372594 --- [inventory] [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.economatom.inventory.controller.AuthController#authenticateUser(LoginRequestDTO)
2026-01-30T22:38:23.157Z DEBUG 372594 --- [inventory] [           main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [LoginRequestDTO(name=Admin, password=admin123)]
Hibernate: 
    select
        u1_0.user_id,
        u1_0.email,
        u1_0.name,
        u1_0.password,
        u1_0.role 
    from
        users u1_0 
    where
        u1_0.name=?
2026-01-30T22:38:23.198Z DEBUG 372594 --- [inventory] [           main] o.s.s.a.dao.DaoAuthenticationProvider    : Authenticated user
2026-01-30T22:38:23.199Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T22:38:23.199Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [LoginResponseDTO(token=eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJBZG1pbiIsImlhdCI6MTc2OTgxMjcwMywiZXhwIjoxNzY5 (truncated)...]
2026-01-30T22:38:23.201Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Securing POST /api/recipe-components/recipe/1
Hibernate: 
    select
        u1_0.user_id,
        u1_0.email,
        u1_0.name,
        u1_0.password,
        u1_0.role 
    from
        users u1_0 
    where
        u1_0.name=?
2026-01-30T22:38:23.203Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Secured POST /api/recipe-components/recipe/1
2026-01-30T22:38:23.203Z DEBUG 372594 --- [inventory] [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.economatom.inventory.controller.RecipeComponentController#create(Integer, RecipeComponentRequestDTO)
2026-01-30T22:38:23.204Z DEBUG 372594 --- [inventory] [           main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [RecipeComponentRequestDTO(productId=1, recipeId=1, quantity=2.5)]
Hibernate: 
    select
        p1_0.product_id,
        p1_0.current_stock,
        p1_0.name,
        p1_0.product_code,
        p1_0.type,
        p1_0.unit_of_measure,
        p1_0.unit_price,
        p1_0.version 
    from
        product p1_0 
    where
        p1_0.product_id=?
Hibernate: 
    select
        r1_0.recipe_id,
        r1_0.elaboration,
        r1_0.recipe_name,
        r1_0.presentation,
        r1_0.total_cost,
        r1_0.version 
    from
        recipe r1_0 
    where
        r1_0.recipe_id=?
Hibernate: 
    insert 
    into
        recipe_component
        (parent_recipe_id, product_id, quantity) 
    values
        (?, ?, ?)
Hibernate: 
    select
        rc1_0.id,
        rc1_0.parent_recipe_id,
        pr1_0.recipe_id,
        pr1_0.elaboration,
        pr1_0.recipe_name,
        pr1_0.presentation,
        pr1_0.total_cost,
        pr1_0.version,
        rc1_0.product_id,
        p1_0.product_id,
        p1_0.current_stock,
        p1_0.name,
        p1_0.product_code,
        p1_0.type,
        p1_0.unit_of_measure,
        p1_0.unit_price,
        p1_0.version,
        rc1_0.quantity 
    from
        recipe_component rc1_0 
    join
        recipe pr1_0 
            on pr1_0.recipe_id=rc1_0.parent_recipe_id 
    join
        product p1_0 
            on p1_0.product_id=rc1_0.product_id 
    where
        rc1_0.id=?
2026-01-30T22:38:23.213Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T22:38:23.213Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [RecipeComponentResponseDTO(id=1, parentRecipeId=1, productId=1, productName=Harina, quantity=2.5, su (truncated)...]
Hibernate: 
    
SET
    REFERENTIAL_INTEGRITY FALSE
Hibernate: 
    TRUNCATE TABLE allergen RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE product RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE order_header RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE recipe_component RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE recipe RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE inventory_audit RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE recipe_audit RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE order_detail RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE recipe_allergen RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE users RESTART IDENTITY
Hibernate: 
    
SET
    REFERENTIAL_INTEGRITY TRUE
Hibernate: 
    insert 
    into
        users
        (email, name, password, role) 
    values
        (?, ?, ?, ?)
Hibernate: 
    insert 
    into
        product
        (current_stock, name, product_code, type, unit_of_measure, unit_price, version) 
    values
        (?, ?, ?, ?, ?, ?, ?)
Hibernate: 
    insert 
    into
        recipe
        (elaboration, recipe_name, presentation, total_cost, version) 
    values
        (?, ?, ?, ?, ?)
2026-01-30T22:38:23.260Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Securing POST /api/auth/login
2026-01-30T22:38:23.260Z DEBUG 372594 --- [inventory] [           main] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2026-01-30T22:38:23.260Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Secured POST /api/auth/login
2026-01-30T22:38:23.261Z DEBUG 372594 --- [inventory] [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.economatom.inventory.controller.AuthController#authenticateUser(LoginRequestDTO)
2026-01-30T22:38:23.261Z DEBUG 372594 --- [inventory] [           main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [LoginRequestDTO(name=Admin, password=admin123)]
Hibernate: 
    select
        u1_0.user_id,
        u1_0.email,
        u1_0.name,
        u1_0.password,
        u1_0.role 
    from
        users u1_0 
    where
        u1_0.name=?
2026-01-30T22:38:23.302Z DEBUG 372594 --- [inventory] [           main] o.s.s.a.dao.DaoAuthenticationProvider    : Authenticated user
2026-01-30T22:38:23.302Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T22:38:23.302Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [LoginResponseDTO(token=eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJBZG1pbiIsImlhdCI6MTc2OTgxMjcwMywiZXhwIjoxNzY5 (truncated)...]
2026-01-30T22:38:23.304Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Securing POST /api/recipe-components/recipe/1
Hibernate: 
    select
        u1_0.user_id,
        u1_0.email,
        u1_0.name,
        u1_0.password,
        u1_0.role 
    from
        users u1_0 
    where
        u1_0.name=?
2026-01-30T22:38:23.306Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Secured POST /api/recipe-components/recipe/1
2026-01-30T22:38:23.306Z DEBUG 372594 --- [inventory] [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.economatom.inventory.controller.RecipeComponentController#create(Integer, RecipeComponentRequestDTO)
2026-01-30T22:38:23.306Z DEBUG 372594 --- [inventory] [           main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [RecipeComponentRequestDTO(productId=1, recipeId=1, quantity=2.5)]
Hibernate: 
    select
        p1_0.product_id,
        p1_0.current_stock,
        p1_0.name,
        p1_0.product_code,
        p1_0.type,
        p1_0.unit_of_measure,
        p1_0.unit_price,
        p1_0.version 
    from
        product p1_0 
    where
        p1_0.product_id=?
Hibernate: 
    select
        r1_0.recipe_id,
        r1_0.elaboration,
        r1_0.recipe_name,
        r1_0.presentation,
        r1_0.total_cost,
        r1_0.version 
    from
        recipe r1_0 
    where
        r1_0.recipe_id=?
Hibernate: 
    insert 
    into
        recipe_component
        (parent_recipe_id, product_id, quantity) 
    values
        (?, ?, ?)
Hibernate: 
    select
        rc1_0.id,
        rc1_0.parent_recipe_id,
        pr1_0.recipe_id,
        pr1_0.elaboration,
        pr1_0.recipe_name,
        pr1_0.presentation,
        pr1_0.total_cost,
        pr1_0.version,
        rc1_0.product_id,
        p1_0.product_id,
        p1_0.current_stock,
        p1_0.name,
        p1_0.product_code,
        p1_0.type,
        p1_0.unit_of_measure,
        p1_0.unit_price,
        p1_0.version,
        rc1_0.quantity 
    from
        recipe_component rc1_0 
    join
        recipe pr1_0 
            on pr1_0.recipe_id=rc1_0.parent_recipe_id 
    join
        product p1_0 
            on p1_0.product_id=rc1_0.product_id 
    where
        rc1_0.id=?
2026-01-30T22:38:23.309Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T22:38:23.309Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [RecipeComponentResponseDTO(id=1, parentRecipeId=1, productId=1, productName=Harina, quantity=2.5, su (truncated)...]
2026-01-30T22:38:23.310Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Securing GET /api/recipe-components/recipe/1
Hibernate: 
    select
        u1_0.user_id,
        u1_0.email,
        u1_0.name,
        u1_0.password,
        u1_0.role 
    from
        users u1_0 
    where
        u1_0.name=?
2026-01-30T22:38:23.312Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Secured GET /api/recipe-components/recipe/1
2026-01-30T22:38:23.312Z DEBUG 372594 --- [inventory] [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.economatom.inventory.controller.RecipeComponentController#getByParentRecipe(Integer)
Hibernate: 
    select
        distinct r1_0.recipe_id,
        a1_0.recipe_id,
        a1_1.allergen_id,
        a1_1.name,
        c1_0.parent_recipe_id,
        c1_0.id,
        c1_0.product_id,
        p1_0.product_id,
        p1_0.current_stock,
        p1_0.name,
        p1_0.product_code,
        p1_0.type,
        p1_0.unit_of_measure,
        p1_0.unit_price,
        p1_0.version,
        c1_0.quantity,
        r1_0.elaboration,
        r1_0.recipe_name,
        r1_0.presentation,
        r1_0.total_cost,
        r1_0.version 
    from
        recipe r1_0 
    left join
        recipe_component c1_0 
            on r1_0.recipe_id=c1_0.parent_recipe_id 
    left join
        product p1_0 
            on p1_0.product_id=c1_0.product_id 
    left join
        recipe_allergen a1_0 
            on r1_0.recipe_id=a1_0.recipe_id 
    left join
        allergen a1_1 
            on a1_1.allergen_id=a1_0.allergen_id 
    where
        r1_0.recipe_id=?
Hibernate: 
    select
        rc1_0.id,
        rc1_0.parent_recipe_id,
        pr1_0.recipe_id,
        pr1_0.elaboration,
        pr1_0.recipe_name,
        pr1_0.presentation,
        pr1_0.total_cost,
        pr1_0.version,
        rc1_0.product_id,
        p1_0.product_id,
        p1_0.current_stock,
        p1_0.name,
        p1_0.product_code,
        p1_0.type,
        p1_0.unit_of_measure,
        p1_0.unit_price,
        p1_0.version,
        rc1_0.quantity 
    from
        recipe_component rc1_0 
    join
        recipe pr1_0 
            on pr1_0.recipe_id=rc1_0.parent_recipe_id 
    join
        product p1_0 
            on p1_0.product_id=rc1_0.product_id 
    where
        pr1_0.recipe_id=?
2026-01-30T22:38:23.321Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T22:38:23.321Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [[RecipeComponentResponseDTO(id=1, parentRecipeId=1, productId=1, productName=Harina, quantity=2.500, (truncated)...]
Hibernate: 
    
SET
    REFERENTIAL_INTEGRITY FALSE
Hibernate: 
    TRUNCATE TABLE allergen RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE product RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE order_header RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE recipe_component RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE recipe RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE inventory_audit RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE recipe_audit RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE order_detail RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE recipe_allergen RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE users RESTART IDENTITY
Hibernate: 
    
SET
    REFERENTIAL_INTEGRITY TRUE
Hibernate: 
    insert 
    into
        users
        (email, name, password, role) 
    values
        (?, ?, ?, ?)
Hibernate: 
    insert 
    into
        product
        (current_stock, name, product_code, type, unit_of_measure, unit_price, version) 
    values
        (?, ?, ?, ?, ?, ?, ?)
Hibernate: 
    insert 
    into
        recipe
        (elaboration, recipe_name, presentation, total_cost, version) 
    values
        (?, ?, ?, ?, ?)
2026-01-30T22:38:23.368Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Securing POST /api/auth/login
2026-01-30T22:38:23.368Z DEBUG 372594 --- [inventory] [           main] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2026-01-30T22:38:23.368Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Secured POST /api/auth/login
2026-01-30T22:38:23.368Z DEBUG 372594 --- [inventory] [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.economatom.inventory.controller.AuthController#authenticateUser(LoginRequestDTO)
2026-01-30T22:38:23.368Z DEBUG 372594 --- [inventory] [           main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [LoginRequestDTO(name=Admin, password=admin123)]
Hibernate: 
    select
        u1_0.user_id,
        u1_0.email,
        u1_0.name,
        u1_0.password,
        u1_0.role 
    from
        users u1_0 
    where
        u1_0.name=?
2026-01-30T22:38:23.409Z DEBUG 372594 --- [inventory] [           main] o.s.s.a.dao.DaoAuthenticationProvider    : Authenticated user
2026-01-30T22:38:23.409Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T22:38:23.410Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [LoginResponseDTO(token=eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJBZG1pbiIsImlhdCI6MTc2OTgxMjcwMywiZXhwIjoxNzY5 (truncated)...]
2026-01-30T22:38:23.411Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Securing POST /api/recipe-components/recipe/1
Hibernate: 
    select
        u1_0.user_id,
        u1_0.email,
        u1_0.name,
        u1_0.password,
        u1_0.role 
    from
        users u1_0 
    where
        u1_0.name=?
2026-01-30T22:38:23.413Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Secured POST /api/recipe-components/recipe/1
2026-01-30T22:38:23.413Z DEBUG 372594 --- [inventory] [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.economatom.inventory.controller.RecipeComponentController#create(Integer, RecipeComponentRequestDTO)
2026-01-30T22:38:23.414Z DEBUG 372594 --- [inventory] [           main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [RecipeComponentRequestDTO(productId=1, recipeId=1, quantity=2.5)]
Hibernate: 
    select
        p1_0.product_id,
        p1_0.current_stock,
        p1_0.name,
        p1_0.product_code,
        p1_0.type,
        p1_0.unit_of_measure,
        p1_0.unit_price,
        p1_0.version 
    from
        product p1_0 
    where
        p1_0.product_id=?
Hibernate: 
    select
        r1_0.recipe_id,
        r1_0.elaboration,
        r1_0.recipe_name,
        r1_0.presentation,
        r1_0.total_cost,
        r1_0.version 
    from
        recipe r1_0 
    where
        r1_0.recipe_id=?
Hibernate: 
    insert 
    into
        recipe_component
        (parent_recipe_id, product_id, quantity) 
    values
        (?, ?, ?)
Hibernate: 
    select
        rc1_0.id,
        rc1_0.parent_recipe_id,
        pr1_0.recipe_id,
        pr1_0.elaboration,
        pr1_0.recipe_name,
        pr1_0.presentation,
        pr1_0.total_cost,
        pr1_0.version,
        rc1_0.product_id,
        p1_0.product_id,
        p1_0.current_stock,
        p1_0.name,
        p1_0.product_code,
        p1_0.type,
        p1_0.unit_of_measure,
        p1_0.unit_price,
        p1_0.version,
        rc1_0.quantity 
    from
        recipe_component rc1_0 
    join
        recipe pr1_0 
            on pr1_0.recipe_id=rc1_0.parent_recipe_id 
    join
        product p1_0 
            on p1_0.product_id=rc1_0.product_id 
    where
        rc1_0.id=?
2026-01-30T22:38:23.416Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T22:38:23.417Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [RecipeComponentResponseDTO(id=1, parentRecipeId=1, productId=1, productName=Harina, quantity=2.5, su (truncated)...]
2026-01-30T22:38:23.418Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Securing GET /api/recipe-components/recipe/1
Hibernate: 
    select
        u1_0.user_id,
        u1_0.email,
        u1_0.name,
        u1_0.password,
        u1_0.role 
    from
        users u1_0 
    where
        u1_0.name=?
2026-01-30T22:38:23.421Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Secured GET /api/recipe-components/recipe/1
2026-01-30T22:38:23.421Z DEBUG 372594 --- [inventory] [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.economatom.inventory.controller.RecipeComponentController#getByParentRecipe(Integer)
Hibernate: 
    select
        distinct r1_0.recipe_id,
        a1_0.recipe_id,
        a1_1.allergen_id,
        a1_1.name,
        c1_0.parent_recipe_id,
        c1_0.id,
        c1_0.product_id,
        p1_0.product_id,
        p1_0.current_stock,
        p1_0.name,
        p1_0.product_code,
        p1_0.type,
        p1_0.unit_of_measure,
        p1_0.unit_price,
        p1_0.version,
        c1_0.quantity,
        r1_0.elaboration,
        r1_0.recipe_name,
        r1_0.presentation,
        r1_0.total_cost,
        r1_0.version 
    from
        recipe r1_0 
    left join
        recipe_component c1_0 
            on r1_0.recipe_id=c1_0.parent_recipe_id 
    left join
        product p1_0 
            on p1_0.product_id=c1_0.product_id 
    left join
        recipe_allergen a1_0 
            on r1_0.recipe_id=a1_0.recipe_id 
    left join
        allergen a1_1 
            on a1_1.allergen_id=a1_0.allergen_id 
    where
        r1_0.recipe_id=?
Hibernate: 
    select
        rc1_0.id,
        rc1_0.parent_recipe_id,
        pr1_0.recipe_id,
        pr1_0.elaboration,
        pr1_0.recipe_name,
        pr1_0.presentation,
        pr1_0.total_cost,
        pr1_0.version,
        rc1_0.product_id,
        p1_0.product_id,
        p1_0.current_stock,
        p1_0.name,
        p1_0.product_code,
        p1_0.type,
        p1_0.unit_of_measure,
        p1_0.unit_price,
        p1_0.version,
        rc1_0.quantity 
    from
        recipe_component rc1_0 
    join
        recipe pr1_0 
            on pr1_0.recipe_id=rc1_0.parent_recipe_id 
    join
        product p1_0 
            on p1_0.product_id=rc1_0.product_id 
    where
        pr1_0.recipe_id=?
2026-01-30T22:38:23.423Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T22:38:23.423Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [[RecipeComponentResponseDTO(id=1, parentRecipeId=1, productId=1, productName=Harina, quantity=2.500, (truncated)...]
Hibernate: 
    
SET
    REFERENTIAL_INTEGRITY FALSE
Hibernate: 
    TRUNCATE TABLE allergen RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE product RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE order_header RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE recipe_component RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE recipe RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE inventory_audit RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE recipe_audit RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE order_detail RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE recipe_allergen RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE users RESTART IDENTITY
Hibernate: 
    
SET
    REFERENTIAL_INTEGRITY TRUE
Hibernate: 
    insert 
    into
        users
        (email, name, password, role) 
    values
        (?, ?, ?, ?)
Hibernate: 
    insert 
    into
        product
        (current_stock, name, product_code, type, unit_of_measure, unit_price, version) 
    values
        (?, ?, ?, ?, ?, ?, ?)
Hibernate: 
    insert 
    into
        recipe
        (elaboration, recipe_name, presentation, total_cost, version) 
    values
        (?, ?, ?, ?, ?)
2026-01-30T22:38:23.471Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Securing POST /api/auth/login
2026-01-30T22:38:23.471Z DEBUG 372594 --- [inventory] [           main] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2026-01-30T22:38:23.471Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Secured POST /api/auth/login
2026-01-30T22:38:23.471Z DEBUG 372594 --- [inventory] [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.economatom.inventory.controller.AuthController#authenticateUser(LoginRequestDTO)
2026-01-30T22:38:23.472Z DEBUG 372594 --- [inventory] [           main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [LoginRequestDTO(name=Admin, password=admin123)]
Hibernate: 
    select
        u1_0.user_id,
        u1_0.email,
        u1_0.name,
        u1_0.password,
        u1_0.role 
    from
        users u1_0 
    where
        u1_0.name=?
2026-01-30T22:38:23.513Z DEBUG 372594 --- [inventory] [           main] o.s.s.a.dao.DaoAuthenticationProvider    : Authenticated user
2026-01-30T22:38:23.514Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T22:38:23.514Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [LoginResponseDTO(token=eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJBZG1pbiIsImlhdCI6MTc2OTgxMjcwMywiZXhwIjoxNzY5 (truncated)...]
2026-01-30T22:38:23.516Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Securing POST /api/recipe-components/recipe/1
Hibernate: 
    select
        u1_0.user_id,
        u1_0.email,
        u1_0.name,
        u1_0.password,
        u1_0.role 
    from
        users u1_0 
    where
        u1_0.name=?
2026-01-30T22:38:23.519Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Secured POST /api/recipe-components/recipe/1
2026-01-30T22:38:23.520Z DEBUG 372594 --- [inventory] [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.economatom.inventory.controller.RecipeComponentController#create(Integer, RecipeComponentRequestDTO)
2026-01-30T22:38:23.520Z DEBUG 372594 --- [inventory] [           main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [RecipeComponentRequestDTO(productId=1, recipeId=1, quantity=2.5)]
Hibernate: 
    select
        p1_0.product_id,
        p1_0.current_stock,
        p1_0.name,
        p1_0.product_code,
        p1_0.type,
        p1_0.unit_of_measure,
        p1_0.unit_price,
        p1_0.version 
    from
        product p1_0 
    where
        p1_0.product_id=?
Hibernate: 
    select
        r1_0.recipe_id,
        r1_0.elaboration,
        r1_0.recipe_name,
        r1_0.presentation,
        r1_0.total_cost,
        r1_0.version 
    from
        recipe r1_0 
    where
        r1_0.recipe_id=?
Hibernate: 
    insert 
    into
        recipe_component
        (parent_recipe_id, product_id, quantity) 
    values
        (?, ?, ?)
Hibernate: 
    select
        rc1_0.id,
        rc1_0.parent_recipe_id,
        pr1_0.recipe_id,
        pr1_0.elaboration,
        pr1_0.recipe_name,
        pr1_0.presentation,
        pr1_0.total_cost,
        pr1_0.version,
        rc1_0.product_id,
        p1_0.product_id,
        p1_0.current_stock,
        p1_0.name,
        p1_0.product_code,
        p1_0.type,
        p1_0.unit_of_measure,
        p1_0.unit_price,
        p1_0.version,
        rc1_0.quantity 
    from
        recipe_component rc1_0 
    join
        recipe pr1_0 
            on pr1_0.recipe_id=rc1_0.parent_recipe_id 
    join
        product p1_0 
            on p1_0.product_id=rc1_0.product_id 
    where
        rc1_0.id=?
2026-01-30T22:38:23.524Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T22:38:23.524Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [RecipeComponentResponseDTO(id=1, parentRecipeId=1, productId=1, productName=Harina, quantity=2.5, su (truncated)...]
2026-01-30T22:38:23.526Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Securing GET /api/recipe-components/1
Hibernate: 
    select
        u1_0.user_id,
        u1_0.email,
        u1_0.name,
        u1_0.password,
        u1_0.role 
    from
        users u1_0 
    where
        u1_0.name=?
2026-01-30T22:38:23.528Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Secured GET /api/recipe-components/1
2026-01-30T22:38:23.529Z DEBUG 372594 --- [inventory] [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.economatom.inventory.controller.RecipeComponentController#getById(Integer)
Hibernate: 
    select
        rc1_0.id,
        rc1_0.parent_recipe_id,
        pr1_0.recipe_id,
        pr1_0.elaboration,
        pr1_0.recipe_name,
        pr1_0.presentation,
        pr1_0.total_cost,
        pr1_0.version,
        rc1_0.product_id,
        p1_0.product_id,
        p1_0.current_stock,
        p1_0.name,
        p1_0.product_code,
        p1_0.type,
        p1_0.unit_of_measure,
        p1_0.unit_price,
        p1_0.version,
        rc1_0.quantity 
    from
        recipe_component rc1_0 
    join
        recipe pr1_0 
            on pr1_0.recipe_id=rc1_0.parent_recipe_id 
    join
        product p1_0 
            on p1_0.product_id=rc1_0.product_id 
    where
        rc1_0.id=?
2026-01-30T22:38:23.530Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T22:38:23.530Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [RecipeComponentResponseDTO(id=1, parentRecipeId=1, productId=1, productName=Harina, quantity=2.500,  (truncated)...]
[INFO] Tests run: 4, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.425 s -- in com.economatom.inventory.controller.RecipeComponentControllerIntegrationTest
[INFO] Running com.economatom.inventory.controller.RecipeControllerIntegrationTest
2026-01-30T22:38:23.535Z  INFO 372594 --- [inventory] [           main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [com.economatom.inventory.controller.RecipeControllerIntegrationTest]: RecipeControllerIntegrationTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2026-01-30T22:38:23.536Z  INFO 372594 --- [inventory] [           main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration com.economatom.inventory.InventoryApplication for test class com.economatom.inventory.controller.RecipeControllerIntegrationTest
Hibernate: 
    
SET
    REFERENTIAL_INTEGRITY FALSE
Hibernate: 
    TRUNCATE TABLE allergen RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE product RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE order_header RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE recipe_component RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE recipe RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE inventory_audit RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE recipe_audit RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE order_detail RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE recipe_allergen RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE users RESTART IDENTITY
Hibernate: 
    
SET
    REFERENTIAL_INTEGRITY TRUE
Hibernate: 
    insert 
    into
        users
        (email, name, password, role) 
    values
        (?, ?, ?, ?)
Hibernate: 
    insert 
    into
        product
        (current_stock, name, product_code, type, unit_of_measure, unit_price, version) 
    values
        (?, ?, ?, ?, ?, ?, ?)
2026-01-30T22:38:23.585Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Securing POST /api/auth/login
2026-01-30T22:38:23.585Z DEBUG 372594 --- [inventory] [           main] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2026-01-30T22:38:23.585Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Secured POST /api/auth/login
2026-01-30T22:38:23.585Z DEBUG 372594 --- [inventory] [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.economatom.inventory.controller.AuthController#authenticateUser(LoginRequestDTO)
2026-01-30T22:38:23.586Z DEBUG 372594 --- [inventory] [           main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [LoginRequestDTO(name=Admin, password=admin123)]
Hibernate: 
    select
        u1_0.user_id,
        u1_0.email,
        u1_0.name,
        u1_0.password,
        u1_0.role 
    from
        users u1_0 
    where
        u1_0.name=?
2026-01-30T22:38:23.629Z DEBUG 372594 --- [inventory] [           main] o.s.s.a.dao.DaoAuthenticationProvider    : Authenticated user
2026-01-30T22:38:23.630Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T22:38:23.630Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [LoginResponseDTO(token=eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJBZG1pbiIsImlhdCI6MTc2OTgxMjcwMywiZXhwIjoxNzY5 (truncated)...]
2026-01-30T22:38:23.633Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Securing POST /api/recipes
Hibernate: 
    select
        u1_0.user_id,
        u1_0.email,
        u1_0.name,
        u1_0.password,
        u1_0.role 
    from
        users u1_0 
    where
        u1_0.name=?
2026-01-30T22:38:23.636Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Secured POST /api/recipes
2026-01-30T22:38:23.636Z DEBUG 372594 --- [inventory] [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.economatom.inventory.controller.RecipeController#create(RecipeRequestDTO)
2026-01-30T22:38:23.638Z DEBUG 372594 --- [inventory] [           main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [RecipeRequestDTO(name=Paella Valenciana, elaboration=1. Sofrito<EOL>2. Arroz<EOL>3. Caldo, presentation=Pres (truncated)...]
Hibernate: 
    select
        p1_0.product_id,
        p1_0.current_stock,
        p1_0.name,
        p1_0.product_code,
        p1_0.type,
        p1_0.unit_of_measure,
        p1_0.unit_price,
        p1_0.version 
    from
        product p1_0 
    where
        p1_0.product_id=?
Hibernate: 
    insert 
    into
        recipe
        (elaboration, recipe_name, presentation, total_cost, version) 
    values
        (?, ?, ?, ?, ?)
Hibernate: 
    insert 
    into
        recipe_component
        (parent_recipe_id, product_id, quantity) 
    values
        (?, ?, ?)
2026-01-30T22:38:23.666Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T22:38:23.667Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [RecipeResponseDTO(id=1, name=Paella Valenciana, elaboration=1. Sofrito<EOL>2. Arroz<EOL>3. Caldo, presentati (truncated)...]
Hibernate: 
    
SET
    REFERENTIAL_INTEGRITY FALSE
Hibernate: 
    TRUNCATE TABLE allergen RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE product RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE order_header RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE recipe_component RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE recipe RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE inventory_audit RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE recipe_audit RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE order_detail RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE recipe_allergen RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE users RESTART IDENTITY
Hibernate: 
    
SET
    REFERENTIAL_INTEGRITY TRUE
Hibernate: 
    insert 
    into
        users
        (email, name, password, role) 
    values
        (?, ?, ?, ?)
Hibernate: 
    insert 
    into
        product
        (current_stock, name, product_code, type, unit_of_measure, unit_price, version) 
    values
        (?, ?, ?, ?, ?, ?, ?)
2026-01-30T22:38:23.718Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Securing POST /api/auth/login
2026-01-30T22:38:23.718Z DEBUG 372594 --- [inventory] [           main] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2026-01-30T22:38:23.718Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Secured POST /api/auth/login
2026-01-30T22:38:23.719Z DEBUG 372594 --- [inventory] [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.economatom.inventory.controller.AuthController#authenticateUser(LoginRequestDTO)
2026-01-30T22:38:23.719Z DEBUG 372594 --- [inventory] [           main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [LoginRequestDTO(name=Admin, password=admin123)]
Hibernate: 
    select
        u1_0.user_id,
        u1_0.email,
        u1_0.name,
        u1_0.password,
        u1_0.role 
    from
        users u1_0 
    where
        u1_0.name=?
2026-01-30T22:38:23.763Z DEBUG 372594 --- [inventory] [           main] o.s.s.a.dao.DaoAuthenticationProvider    : Authenticated user
2026-01-30T22:38:23.764Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T22:38:23.764Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [LoginResponseDTO(token=eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJBZG1pbiIsImlhdCI6MTc2OTgxMjcwMywiZXhwIjoxNzY5 (truncated)...]
2026-01-30T22:38:23.766Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Securing POST /api/recipes
Hibernate: 
    select
        u1_0.user_id,
        u1_0.email,
        u1_0.name,
        u1_0.password,
        u1_0.role 
    from
        users u1_0 
    where
        u1_0.name=?
2026-01-30T22:38:23.769Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Secured POST /api/recipes
2026-01-30T22:38:23.770Z DEBUG 372594 --- [inventory] [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.economatom.inventory.controller.RecipeController#create(RecipeRequestDTO)
2026-01-30T22:38:23.770Z DEBUG 372594 --- [inventory] [           main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [RecipeRequestDTO(name=Paella Valenciana, elaboration=1. Sofrito<EOL>2. Arroz<EOL>3. Caldo, presentation=Pres (truncated)...]
Hibernate: 
    select
        p1_0.product_id,
        p1_0.current_stock,
        p1_0.name,
        p1_0.product_code,
        p1_0.type,
        p1_0.unit_of_measure,
        p1_0.unit_price,
        p1_0.version 
    from
        product p1_0 
    where
        p1_0.product_id=?
Hibernate: 
    insert 
    into
        recipe
        (elaboration, recipe_name, presentation, total_cost, version) 
    values
        (?, ?, ?, ?, ?)
Hibernate: 
    insert 
    into
        recipe_component
        (parent_recipe_id, product_id, quantity) 
    values
        (?, ?, ?)
2026-01-30T22:38:23.775Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T22:38:23.775Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [RecipeResponseDTO(id=1, name=Paella Valenciana, elaboration=1. Sofrito<EOL>2. Arroz<EOL>3. Caldo, presentati (truncated)...]
2026-01-30T22:38:23.777Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Securing GET /api/recipes/1
Hibernate: 
    select
        u1_0.user_id,
        u1_0.email,
        u1_0.name,
        u1_0.password,
        u1_0.role 
    from
        users u1_0 
    where
        u1_0.name=?
2026-01-30T22:38:23.780Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Secured GET /api/recipes/1
2026-01-30T22:38:23.781Z DEBUG 372594 --- [inventory] [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.economatom.inventory.controller.RecipeController#getById(Integer)
Hibernate: 
    select
        distinct r1_0.recipe_id,
        a1_0.recipe_id,
        a1_1.allergen_id,
        a1_1.name,
        c1_0.parent_recipe_id,
        c1_0.id,
        c1_0.product_id,
        p1_0.product_id,
        p1_0.current_stock,
        p1_0.name,
        p1_0.product_code,
        p1_0.type,
        p1_0.unit_of_measure,
        p1_0.unit_price,
        p1_0.version,
        c1_0.quantity,
        r1_0.elaboration,
        r1_0.recipe_name,
        r1_0.presentation,
        r1_0.total_cost,
        r1_0.version 
    from
        recipe r1_0 
    left join
        recipe_component c1_0 
            on r1_0.recipe_id=c1_0.parent_recipe_id 
    left join
        product p1_0 
            on p1_0.product_id=c1_0.product_id 
    left join
        recipe_allergen a1_0 
            on r1_0.recipe_id=a1_0.recipe_id 
    left join
        allergen a1_1 
            on a1_1.allergen_id=a1_0.allergen_id 
    where
        r1_0.recipe_id=?
2026-01-30T22:38:23.784Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T22:38:23.784Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [RecipeResponseDTO(id=1, name=Paella Valenciana, elaboration=1. Sofrito<EOL>2. Arroz<EOL>3. Caldo, presentati (truncated)...]
Hibernate: 
    
SET
    REFERENTIAL_INTEGRITY FALSE
Hibernate: 
    TRUNCATE TABLE allergen RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE product RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE order_header RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE recipe_component RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE recipe RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE inventory_audit RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE recipe_audit RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE order_detail RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE recipe_allergen RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE users RESTART IDENTITY
Hibernate: 
    
SET
    REFERENTIAL_INTEGRITY TRUE
Hibernate: 
    insert 
    into
        users
        (email, name, password, role) 
    values
        (?, ?, ?, ?)
Hibernate: 
    insert 
    into
        product
        (current_stock, name, product_code, type, unit_of_measure, unit_price, version) 
    values
        (?, ?, ?, ?, ?, ?, ?)
2026-01-30T22:38:23.834Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Securing POST /api/auth/login
2026-01-30T22:38:23.834Z DEBUG 372594 --- [inventory] [           main] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2026-01-30T22:38:23.834Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Secured POST /api/auth/login
2026-01-30T22:38:23.835Z DEBUG 372594 --- [inventory] [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.economatom.inventory.controller.AuthController#authenticateUser(LoginRequestDTO)
2026-01-30T22:38:23.835Z DEBUG 372594 --- [inventory] [           main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [LoginRequestDTO(name=Admin, password=admin123)]
Hibernate: 
    select
        u1_0.user_id,
        u1_0.email,
        u1_0.name,
        u1_0.password,
        u1_0.role 
    from
        users u1_0 
    where
        u1_0.name=?
2026-01-30T22:38:23.882Z DEBUG 372594 --- [inventory] [           main] o.s.s.a.dao.DaoAuthenticationProvider    : Authenticated user
2026-01-30T22:38:23.883Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T22:38:23.883Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [LoginResponseDTO(token=eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJBZG1pbiIsImlhdCI6MTc2OTgxMjcwMywiZXhwIjoxNzY5 (truncated)...]
2026-01-30T22:38:23.885Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Securing POST /api/recipes
Hibernate: 
    select
        u1_0.user_id,
        u1_0.email,
        u1_0.name,
        u1_0.password,
        u1_0.role 
    from
        users u1_0 
    where
        u1_0.name=?
2026-01-30T22:38:23.887Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Secured POST /api/recipes
2026-01-30T22:38:23.887Z DEBUG 372594 --- [inventory] [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.economatom.inventory.controller.RecipeController#create(RecipeRequestDTO)
2026-01-30T22:38:23.888Z DEBUG 372594 --- [inventory] [           main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [RecipeRequestDTO(name=Paella Valenciana, elaboration=1. Sofrito<EOL>2. Arroz<EOL>3. Caldo, presentation=Pres (truncated)...]
Hibernate: 
    select
        p1_0.product_id,
        p1_0.current_stock,
        p1_0.name,
        p1_0.product_code,
        p1_0.type,
        p1_0.unit_of_measure,
        p1_0.unit_price,
        p1_0.version 
    from
        product p1_0 
    where
        p1_0.product_id=?
Hibernate: 
    insert 
    into
        recipe
        (elaboration, recipe_name, presentation, total_cost, version) 
    values
        (?, ?, ?, ?, ?)
Hibernate: 
    insert 
    into
        recipe_component
        (parent_recipe_id, product_id, quantity) 
    values
        (?, ?, ?)
2026-01-30T22:38:23.891Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T22:38:23.891Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [RecipeResponseDTO(id=1, name=Paella Valenciana, elaboration=1. Sofrito<EOL>2. Arroz<EOL>3. Caldo, presentati (truncated)...]
2026-01-30T22:38:23.892Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Securing GET /api/recipes
Hibernate: 
    select
        u1_0.user_id,
        u1_0.email,
        u1_0.name,
        u1_0.password,
        u1_0.role 
    from
        users u1_0 
    where
        u1_0.name=?
2026-01-30T22:38:23.894Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Secured GET /api/recipes
2026-01-30T22:38:23.894Z DEBUG 372594 --- [inventory] [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.economatom.inventory.controller.RecipeController#getAll(Pageable)
2026-01-30T22:38:23.895Z  WARN 372594 --- [inventory] [           main] org.hibernate.orm.query                  : HHH90003004: firstResult/maxResults specified with collection fetch; applying in memory
Hibernate: 
    select
        r1_0.recipe_id,
        a1_0.recipe_id,
        a1_1.allergen_id,
        a1_1.name,
        c1_0.parent_recipe_id,
        c1_0.id,
        c1_0.product_id,
        p1_0.product_id,
        p1_0.current_stock,
        p1_0.name,
        p1_0.product_code,
        p1_0.type,
        p1_0.unit_of_measure,
        p1_0.unit_price,
        p1_0.version,
        c1_0.quantity,
        r1_0.elaboration,
        r1_0.recipe_name,
        r1_0.presentation,
        r1_0.total_cost,
        r1_0.version 
    from
        recipe r1_0 
    left join
        recipe_allergen a1_0 
            on r1_0.recipe_id=a1_0.recipe_id 
    left join
        allergen a1_1 
            on a1_1.allergen_id=a1_0.allergen_id 
    left join
        recipe_component c1_0 
            on r1_0.recipe_id=c1_0.parent_recipe_id 
    left join
        product p1_0 
            on p1_0.product_id=c1_0.product_id
2026-01-30T22:38:23.898Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T22:38:23.898Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [[RecipeResponseDTO(id=1, name=Paella Valenciana, elaboration=1. Sofrito<EOL>2. Arroz<EOL>3. Caldo, presentat (truncated)...]
Hibernate: 
    
SET
    REFERENTIAL_INTEGRITY FALSE
Hibernate: 
    TRUNCATE TABLE allergen RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE product RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE order_header RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE recipe_component RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE recipe RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE inventory_audit RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE recipe_audit RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE order_detail RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE recipe_allergen RESTART IDENTITY
Hibernate: 
    TRUNCATE TABLE users RESTART IDENTITY
Hibernate: 
    
SET
    REFERENTIAL_INTEGRITY TRUE
Hibernate: 
    insert 
    into
        users
        (email, name, password, role) 
    values
        (?, ?, ?, ?)
Hibernate: 
    insert 
    into
        product
        (current_stock, name, product_code, type, unit_of_measure, unit_price, version) 
    values
        (?, ?, ?, ?, ?, ?, ?)
2026-01-30T22:38:23.947Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Securing POST /api/auth/login
2026-01-30T22:38:23.947Z DEBUG 372594 --- [inventory] [           main] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2026-01-30T22:38:23.947Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Secured POST /api/auth/login
2026-01-30T22:38:23.947Z DEBUG 372594 --- [inventory] [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.economatom.inventory.controller.AuthController#authenticateUser(LoginRequestDTO)
2026-01-30T22:38:23.947Z DEBUG 372594 --- [inventory] [           main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [LoginRequestDTO(name=Admin, password=admin123)]
Hibernate: 
    select
        u1_0.user_id,
        u1_0.email,
        u1_0.name,
        u1_0.password,
        u1_0.role 
    from
        users u1_0 
    where
        u1_0.name=?
2026-01-30T22:38:23.989Z DEBUG 372594 --- [inventory] [           main] o.s.s.a.dao.DaoAuthenticationProvider    : Authenticated user
2026-01-30T22:38:23.990Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T22:38:23.990Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [LoginResponseDTO(token=eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJBZG1pbiIsImlhdCI6MTc2OTgxMjcwMywiZXhwIjoxNzY5 (truncated)...]
2026-01-30T22:38:23.992Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Securing POST /api/recipes
Hibernate: 
    select
        u1_0.user_id,
        u1_0.email,
        u1_0.name,
        u1_0.password,
        u1_0.role 
    from
        users u1_0 
    where
        u1_0.name=?
2026-01-30T22:38:23.995Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Secured POST /api/recipes
2026-01-30T22:38:23.995Z DEBUG 372594 --- [inventory] [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.economatom.inventory.controller.RecipeController#create(RecipeRequestDTO)
2026-01-30T22:38:23.996Z DEBUG 372594 --- [inventory] [           main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [RecipeRequestDTO(name=Paella Valenciana, elaboration=1. Sofrito<EOL>2. Arroz<EOL>3. Caldo, presentation=Pres (truncated)...]
Hibernate: 
    select
        p1_0.product_id,
        p1_0.current_stock,
        p1_0.name,
        p1_0.product_code,
        p1_0.type,
        p1_0.unit_of_measure,
        p1_0.unit_price,
        p1_0.version 
    from
        product p1_0 
    where
        p1_0.product_id=?
Hibernate: 
    insert 
    into
        recipe
        (elaboration, recipe_name, presentation, total_cost, version) 
    values
        (?, ?, ?, ?, ?)
Hibernate: 
    insert 
    into
        recipe_component
        (parent_recipe_id, product_id, quantity) 
    values
        (?, ?, ?)
2026-01-30T22:38:23.999Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T22:38:24.000Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [RecipeResponseDTO(id=1, name=Paella Valenciana, elaboration=1. Sofrito<EOL>2. Arroz<EOL>3. Caldo, presentati (truncated)...]
2026-01-30T22:38:24.000Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Securing POST /api/recipes
Hibernate: 
    select
        u1_0.user_id,
        u1_0.email,
        u1_0.name,
        u1_0.password,
        u1_0.role 
    from
        users u1_0 
    where
        u1_0.name=?
2026-01-30T22:38:24.002Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Secured POST /api/recipes
2026-01-30T22:38:24.002Z DEBUG 372594 --- [inventory] [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.economatom.inventory.controller.RecipeController#create(RecipeRequestDTO)
2026-01-30T22:38:24.003Z DEBUG 372594 --- [inventory] [           main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [RecipeRequestDTO(name=Paella de Marisco, elaboration=1. Sofrito de pescado<EOL>2. Arroz<EOL>3. Fumet, presen (truncated)...]
Hibernate: 
    select
        p1_0.product_id,
        p1_0.current_stock,
        p1_0.name,
        p1_0.product_code,
        p1_0.type,
        p1_0.unit_of_measure,
        p1_0.unit_price,
        p1_0.version 
    from
        product p1_0 
    where
        p1_0.product_id=?
Hibernate: 
    insert 
    into
        recipe
        (elaboration, recipe_name, presentation, total_cost, version) 
    values
        (?, ?, ?, ?, ?)
Hibernate: 
    insert 
    into
        recipe_component
        (parent_recipe_id, product_id, quantity) 
    values
        (?, ?, ?)
2026-01-30T22:38:24.005Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T22:38:24.005Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [RecipeResponseDTO(id=2, name=Paella de Marisco, elaboration=1. Sofrito de pescado<EOL>2. Arroz<EOL>3. Fumet, (truncated)...]
2026-01-30T22:38:24.006Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Securing GET /api/recipes/search
Hibernate: 
    select
        u1_0.user_id,
        u1_0.email,
        u1_0.name,
        u1_0.password,
        u1_0.role 
    from
        users u1_0 
    where
        u1_0.name=?
2026-01-30T22:38:24.009Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Secured GET /api/recipes/search
2026-01-30T22:38:24.009Z DEBUG 372594 --- [inventory] [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.economatom.inventory.controller.RecipeController#searchByName(String)
Hibernate: 
    select
        distinct r1_0.recipe_id,
        a1_0.recipe_id,
        a1_1.allergen_id,
        a1_1.name,
        c1_0.parent_recipe_id,
        c1_0.id,
        c1_0.product_id,
        p1_0.product_id,
        p1_0.current_stock,
        p1_0.name,
        p1_0.product_code,
        p1_0.type,
        p1_0.unit_of_measure,
        p1_0.unit_price,
        p1_0.version,
        c1_0.quantity,
        r1_0.elaboration,
        r1_0.recipe_name,
        r1_0.presentation,
        r1_0.total_cost,
        r1_0.version 
    from
        recipe r1_0 
    left join
        recipe_component c1_0 
            on r1_0.recipe_id=c1_0.parent_recipe_id 
    left join
        product p1_0 
            on p1_0.product_id=c1_0.product_id 
    left join
        recipe_allergen a1_0 
            on r1_0.recipe_id=a1_0.recipe_id 
    left join
        allergen a1_1 
            on a1_1.allergen_id=a1_0.allergen_id 
    where
        lower(r1_0.recipe_name) like lower(('%'||?||'%')) escape ''
2026-01-30T22:38:24.022Z DEBUG 372594 --- [inventory] [           main] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T22:38:24.022Z DEBUG 372594 --- [inventory] [           main] m.m.a.RequestResponseBodyMethodProcessor : Writing [[RecipeResponseDTO(id=1, name=Paella Valenciana, elaboration=1. Sofrito<EOL>2. Arroz<EOL>3. Caldo, presentat (truncated)...]
[INFO] Tests run: 4, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.492 s -- in com.economatom.inventory.controller.RecipeControllerIntegrationTest
[INFO] Running com.economatom.inventory.controller.UserControllerIntegrationTest
2026-01-30T22:38:24.027Z  INFO 372594 --- [inventory] [           main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [com.economatom.inventory.controller.UserControllerIntegrationTest]: UserControllerIntegrationTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2026-01-30T22:38:24.028Z  INFO 372594 --- [inventory] [           main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration com.economatom.inventory.InventoryApplication for test class com.economatom.inventory.controller.UserControllerIntegrationTest
Hibernate: 
    select
        u1_0.user_id,
        u1_0.email,
        u1_0.name,
        u1_0.password,
        u1_0.role 
    from
        users u1_0
Hibernate: 
    delete 
    from
        users 
    where
        user_id=?
Hibernate: 
    insert 
    into
        users
        (email, name, password, role) 
    values
        (?, ?, ?, ?)
2026-01-30T22:38:24.076Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Securing POST /api/auth/login
2026-01-30T22:38:24.077Z DEBUG 372594 --- [inventory] [           main] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2026-01-30T22:38:24.077Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Secured POST /api/auth/login
2026-01-30T22:38:24.077Z DEBUG 372594 --- [inventory] [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.economatom.inventory.controller.AuthController#authenticateUser(LoginRequestDTO)
2026-01-30T22:38:24.077Z DEBUG 372594 --- [inventory] [           main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [LoginRequestDTO(name=Admin, password=admin123)]
Hibernate: 
    select
        u1_0.user_id,
        u1_0.email,
        u1_0.name,
        u1_0.password,
        u1_0.role 
    from
        users u1_0 
    where
        u1_0.name=?
2026-01-30T22:38:24.119Z DEBUG 372594 --- [inventory] [           main] o.s.s.a.dao.DaoAuthenticationProvider    : Authenticated user
2026-01-30T22:38:24.119Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T22:38:24.120Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [LoginResponseDTO(token=eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJBZG1pbiIsImlhdCI6MTc2OTgxMjcwNCwiZXhwIjoxNzY5 (truncated)...]
2026-01-30T22:38:24.121Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Securing POST /api/users
Hibernate: 
    select
        u1_0.user_id,
        u1_0.email,
        u1_0.name,
        u1_0.password,
        u1_0.role 
    from
        users u1_0 
    where
        u1_0.name=?
2026-01-30T22:38:24.124Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Secured POST /api/users
2026-01-30T22:38:24.124Z DEBUG 372594 --- [inventory] [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.economatom.inventory.controller.UserController#create(UserRequestDTO)
2026-01-30T22:38:24.125Z DEBUG 372594 --- [inventory] [           main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [UserRequestDTO(name=UsuarioTest, email=usuario@test.com, password=password123, role=USER)]
2026-01-30T22:38:24.128Z DEBUG 372594 --- [inventory] [           main] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.economatom.inventory.controller.UserController.create(com.economatom.inventory.dto.request.UserRequestDTO); target is of class [com.economatom.inventory.controller.UserController]
2026-01-30T22:38:24.133Z DEBUG 372594 --- [inventory] [           main] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.economatom.inventory.controller.UserController.create(com.economatom.inventory.dto.request.UserRequestDTO); target is of class [com.economatom.inventory.controller.UserController]
Hibernate: 
    select
        u1_0.user_id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
Hibernate: 
    insert 
    into
        users
        (email, name, password, role) 
    values
        (?, ?, ?, ?)
2026-01-30T22:38:24.178Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T22:38:24.178Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [UserResponseDTO(id=3, name=UsuarioTest, email=usuario@test.com, role=USER)]
2026-01-30T22:38:24.180Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Securing DELETE /api/users/3
Hibernate: 
    select
        u1_0.user_id,
        u1_0.email,
        u1_0.name,
        u1_0.password,
        u1_0.role 
    from
        users u1_0 
    where
        u1_0.name=?
2026-01-30T22:38:24.182Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Secured DELETE /api/users/3
2026-01-30T22:38:24.182Z DEBUG 372594 --- [inventory] [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.economatom.inventory.controller.UserController#delete(Integer)
2026-01-30T22:38:24.183Z DEBUG 372594 --- [inventory] [           main] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.economatom.inventory.controller.UserController.delete(java.lang.Integer); target is of class [com.economatom.inventory.controller.UserController]
2026-01-30T22:38:24.183Z DEBUG 372594 --- [inventory] [           main] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.economatom.inventory.controller.UserController.delete(java.lang.Integer); target is of class [com.economatom.inventory.controller.UserController]
Hibernate: 
    select
        u1_0.user_id,
        u1_0.email,
        u1_0.name,
        u1_0.password,
        u1_0.role 
    from
        users u1_0 
    where
        u1_0.user_id=?
Hibernate: 
    delete 
    from
        users 
    where
        user_id=?
2026-01-30T22:38:24.186Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/octet-stream', given [*/*] and supported [*/*]

MockHttpServletRequest:
      HTTP Method = DELETE
      Request URI = /api/users/3
       Parameters = {}
          Headers = [Authorization:"Bearer eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJBZG1pbiIsImlhdCI6MTc2OTgxMjcwNCwiZXhwIjoxNzY5ODEzNTA0fQ.X1Jz4hSYkwSygOLWFaZe3T2UJS366RUOadpGdgqSxv8"]
             Body = null
    Session Attrs = {}

Handler:
             Type = com.economatom.inventory.controller.UserController
           Method = com.economatom.inventory.controller.UserController#delete(Integer)

Async:
    Async started = false
     Async result = null

Resolved Exception:
             Type = null

ModelAndView:
        View name = null
             View = null
            Model = null

FlashMap:
       Attributes = null

MockHttpServletResponse:
           Status = 204
    Error message = null
          Headers = [Vary:"Origin", "Access-Control-Request-Method", "Access-Control-Request-Headers", X-Content-Type-Options:"nosniff", X-XSS-Protection:"0", Cache-Control:"no-cache, no-store, max-age=0, must-revalidate", Pragma:"no-cache", Expires:"0", X-Frame-Options:"DENY"]
     Content type = null
             Body = 
    Forwarded URL = null
   Redirected URL = null
          Cookies = []
2026-01-30T22:38:24.187Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Securing GET /api/users/3
Hibernate: 
    select
        u1_0.user_id,
        u1_0.email,
        u1_0.name,
        u1_0.password,
        u1_0.role 
    from
        users u1_0 
    where
        u1_0.name=?
2026-01-30T22:38:24.189Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Secured GET /api/users/3
2026-01-30T22:38:24.189Z DEBUG 372594 --- [inventory] [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.economatom.inventory.controller.UserController#getById(Integer)
2026-01-30T22:38:24.189Z DEBUG 372594 --- [inventory] [           main] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.economatom.inventory.controller.UserController.getById(java.lang.Integer); target is of class [com.economatom.inventory.controller.UserController]
2026-01-30T22:38:24.189Z DEBUG 372594 --- [inventory] [           main] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.economatom.inventory.controller.UserController.getById(java.lang.Integer); target is of class [com.economatom.inventory.controller.UserController]
Hibernate: 
    select
        u1_0.user_id,
        u1_0.email,
        u1_0.name,
        u1_0.password,
        u1_0.role 
    from
        users u1_0 
    where
        u1_0.user_id=?
2026-01-30T22:38:24.190Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T22:38:24.190Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Nothing to write: null body

MockHttpServletRequest:
      HTTP Method = GET
      Request URI = /api/users/3
       Parameters = {}
          Headers = [Authorization:"Bearer eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJBZG1pbiIsImlhdCI6MTc2OTgxMjcwNCwiZXhwIjoxNzY5ODEzNTA0fQ.X1Jz4hSYkwSygOLWFaZe3T2UJS366RUOadpGdgqSxv8"]
             Body = null
    Session Attrs = {}

Handler:
             Type = com.economatom.inventory.controller.UserController
           Method = com.economatom.inventory.controller.UserController#getById(Integer)

Async:
    Async started = false
     Async result = null

Resolved Exception:
             Type = null

ModelAndView:
        View name = null
             View = null
            Model = null

FlashMap:
       Attributes = null

MockHttpServletResponse:
           Status = 404
    Error message = null
          Headers = [Vary:"Origin", "Access-Control-Request-Method", "Access-Control-Request-Headers", X-Content-Type-Options:"nosniff", X-XSS-Protection:"0", Cache-Control:"no-cache, no-store, max-age=0, must-revalidate", Pragma:"no-cache", Expires:"0", X-Frame-Options:"DENY"]
     Content type = null
             Body = 
    Forwarded URL = null
   Redirected URL = null
          Cookies = []
Hibernate: 
    select
        u1_0.user_id,
        u1_0.email,
        u1_0.name,
        u1_0.password,
        u1_0.role 
    from
        users u1_0
Hibernate: 
    delete 
    from
        users 
    where
        user_id=?
Hibernate: 
    insert 
    into
        users
        (email, name, password, role) 
    values
        (?, ?, ?, ?)
2026-01-30T22:38:24.236Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Securing POST /api/auth/login
2026-01-30T22:38:24.237Z DEBUG 372594 --- [inventory] [           main] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2026-01-30T22:38:24.237Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Secured POST /api/auth/login
2026-01-30T22:38:24.237Z DEBUG 372594 --- [inventory] [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.economatom.inventory.controller.AuthController#authenticateUser(LoginRequestDTO)
2026-01-30T22:38:24.237Z DEBUG 372594 --- [inventory] [           main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [LoginRequestDTO(name=Admin, password=admin123)]
Hibernate: 
    select
        u1_0.user_id,
        u1_0.email,
        u1_0.name,
        u1_0.password,
        u1_0.role 
    from
        users u1_0 
    where
        u1_0.name=?
2026-01-30T22:38:24.279Z DEBUG 372594 --- [inventory] [           main] o.s.s.a.dao.DaoAuthenticationProvider    : Authenticated user
2026-01-30T22:38:24.280Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T22:38:24.280Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [LoginResponseDTO(token=eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJBZG1pbiIsImlhdCI6MTc2OTgxMjcwNCwiZXhwIjoxNzY5 (truncated)...]
2026-01-30T22:38:24.281Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Securing POST /api/users
Hibernate: 
    select
        u1_0.user_id,
        u1_0.email,
        u1_0.name,
        u1_0.password,
        u1_0.role 
    from
        users u1_0 
    where
        u1_0.name=?
2026-01-30T22:38:24.283Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Secured POST /api/users
2026-01-30T22:38:24.283Z DEBUG 372594 --- [inventory] [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.economatom.inventory.controller.UserController#create(UserRequestDTO)
2026-01-30T22:38:24.283Z DEBUG 372594 --- [inventory] [           main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [UserRequestDTO(name=UsuarioTest, email=usuario@test.com, password=password123, role=USER)]
2026-01-30T22:38:24.283Z DEBUG 372594 --- [inventory] [           main] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.economatom.inventory.controller.UserController.create(com.economatom.inventory.dto.request.UserRequestDTO); target is of class [com.economatom.inventory.controller.UserController]
2026-01-30T22:38:24.284Z DEBUG 372594 --- [inventory] [           main] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.economatom.inventory.controller.UserController.create(com.economatom.inventory.dto.request.UserRequestDTO); target is of class [com.economatom.inventory.controller.UserController]
Hibernate: 
    select
        u1_0.user_id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
Hibernate: 
    insert 
    into
        users
        (email, name, password, role) 
    values
        (?, ?, ?, ?)
2026-01-30T22:38:24.325Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T22:38:24.325Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [UserResponseDTO(id=5, name=UsuarioTest, email=usuario@test.com, role=USER)]
2026-01-30T22:38:24.326Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Securing PUT /api/users/5
Hibernate: 
    select
        u1_0.user_id,
        u1_0.email,
        u1_0.name,
        u1_0.password,
        u1_0.role 
    from
        users u1_0 
    where
        u1_0.name=?
2026-01-30T22:38:24.329Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Secured PUT /api/users/5
2026-01-30T22:38:24.330Z DEBUG 372594 --- [inventory] [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.economatom.inventory.controller.UserController#update(Integer, UserRequestDTO)
2026-01-30T22:38:24.330Z DEBUG 372594 --- [inventory] [           main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [UserRequestDTO(name=UsuarioTest Actualizado, email=usuario@test.com, password=password123, role=USER (truncated)...]
2026-01-30T22:38:24.331Z DEBUG 372594 --- [inventory] [           main] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.economatom.inventory.controller.UserController.update(java.lang.Integer,com.economatom.inventory.dto.request.UserRequestDTO); target is of class [com.economatom.inventory.controller.UserController]
2026-01-30T22:38:24.331Z DEBUG 372594 --- [inventory] [           main] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.economatom.inventory.controller.UserController.update(java.lang.Integer,com.economatom.inventory.dto.request.UserRequestDTO); target is of class [com.economatom.inventory.controller.UserController]
Hibernate: 
    select
        u1_0.user_id,
        u1_0.email,
        u1_0.name,
        u1_0.password,
        u1_0.role 
    from
        users u1_0 
    where
        u1_0.user_id=?
Hibernate: 
    update
        users 
    set
        email=?,
        name=?,
        password=?,
        role=? 
    where
        user_id=?
2026-01-30T22:38:24.373Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T22:38:24.373Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [UserResponseDTO(id=5, name=UsuarioTest Actualizado, email=usuario@test.com, role=USER)]

MockHttpServletRequest:
      HTTP Method = PUT
      Request URI = /api/users/5
       Parameters = {}
          Headers = [Content-Type:"application/json;charset=UTF-8", Authorization:"Bearer eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJBZG1pbiIsImlhdCI6MTc2OTgxMjcwNCwiZXhwIjoxNzY5ODEzNTA0fQ.X1Jz4hSYkwSygOLWFaZe3T2UJS366RUOadpGdgqSxv8", Content-Length:"100"]
             Body = {"name":"UsuarioTest Actualizado","email":"usuario@test.com","password":"password123","role":"USER"}
    Session Attrs = {}

Handler:
             Type = com.economatom.inventory.controller.UserController
           Method = com.economatom.inventory.controller.UserController#update(Integer, UserRequestDTO)

Async:
    Async started = false
     Async result = null

Resolved Exception:
             Type = null

ModelAndView:
        View name = null
             View = null
            Model = null

FlashMap:
       Attributes = null

MockHttpServletResponse:
           Status = 200
    Error message = null
          Headers = [Vary:"Origin", "Access-Control-Request-Method", "Access-Control-Request-Headers", Content-Type:"application/json", X-Content-Type-Options:"nosniff", X-XSS-Protection:"0", Cache-Control:"no-cache, no-store, max-age=0, must-revalidate", Pragma:"no-cache", Expires:"0", X-Frame-Options:"DENY"]
     Content type = application/json
             Body = {"id":5,"name":"UsuarioTest Actualizado","email":"usuario@test.com","role":"USER"}
    Forwarded URL = null
   Redirected URL = null
          Cookies = []
Hibernate: 
    select
        u1_0.user_id,
        u1_0.email,
        u1_0.name,
        u1_0.password,
        u1_0.role 
    from
        users u1_0
Hibernate: 
    delete 
    from
        users 
    where
        user_id=?
Hibernate: 
    delete 
    from
        users 
    where
        user_id=?
Hibernate: 
    insert 
    into
        users
        (email, name, password, role) 
    values
        (?, ?, ?, ?)
2026-01-30T22:38:24.420Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Securing POST /api/auth/login
2026-01-30T22:38:24.420Z DEBUG 372594 --- [inventory] [           main] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2026-01-30T22:38:24.420Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Secured POST /api/auth/login
2026-01-30T22:38:24.420Z DEBUG 372594 --- [inventory] [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.economatom.inventory.controller.AuthController#authenticateUser(LoginRequestDTO)
2026-01-30T22:38:24.421Z DEBUG 372594 --- [inventory] [           main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [LoginRequestDTO(name=Admin, password=admin123)]
Hibernate: 
    select
        u1_0.user_id,
        u1_0.email,
        u1_0.name,
        u1_0.password,
        u1_0.role 
    from
        users u1_0 
    where
        u1_0.name=?
2026-01-30T22:38:24.462Z DEBUG 372594 --- [inventory] [           main] o.s.s.a.dao.DaoAuthenticationProvider    : Authenticated user
2026-01-30T22:38:24.463Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T22:38:24.463Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [LoginResponseDTO(token=eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJBZG1pbiIsImlhdCI6MTc2OTgxMjcwNCwiZXhwIjoxNzY5 (truncated)...]
2026-01-30T22:38:24.464Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Securing GET /api/users
Hibernate: 
    select
        u1_0.user_id,
        u1_0.email,
        u1_0.name,
        u1_0.password,
        u1_0.role 
    from
        users u1_0 
    where
        u1_0.name=?
2026-01-30T22:38:24.466Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Secured GET /api/users
2026-01-30T22:38:24.466Z DEBUG 372594 --- [inventory] [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.economatom.inventory.controller.UserController#getAll(Pageable)
2026-01-30T22:38:24.467Z DEBUG 372594 --- [inventory] [           main] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.economatom.inventory.controller.UserController.getAll(org.springframework.data.domain.Pageable); target is of class [com.economatom.inventory.controller.UserController]
2026-01-30T22:38:24.467Z DEBUG 372594 --- [inventory] [           main] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.economatom.inventory.controller.UserController.getAll(org.springframework.data.domain.Pageable); target is of class [com.economatom.inventory.controller.UserController]
Hibernate: 
    select
        u1_0.user_id,
        u1_0.email,
        u1_0.name,
        u1_0.password,
        u1_0.role 
    from
        users u1_0 
    offset
        ? rows 
    fetch
        first ? rows only
2026-01-30T22:38:24.469Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T22:38:24.469Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [[UserResponseDTO(id=6, name=Admin, email=admin@economatom.com, role=ADMIN)]]

MockHttpServletRequest:
      HTTP Method = GET
      Request URI = /api/users
       Parameters = {}
          Headers = [Authorization:"Bearer eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJBZG1pbiIsImlhdCI6MTc2OTgxMjcwNCwiZXhwIjoxNzY5ODEzNTA0fQ.X1Jz4hSYkwSygOLWFaZe3T2UJS366RUOadpGdgqSxv8"]
             Body = null
    Session Attrs = {}

Handler:
             Type = com.economatom.inventory.controller.UserController
           Method = com.economatom.inventory.controller.UserController#getAll(Pageable)

Async:
    Async started = false
     Async result = null

Resolved Exception:
             Type = null

ModelAndView:
        View name = null
             View = null
            Model = null

FlashMap:
       Attributes = null

MockHttpServletResponse:
           Status = 200
    Error message = null
          Headers = [Vary:"Origin", "Access-Control-Request-Method", "Access-Control-Request-Headers", Content-Type:"application/json", X-Content-Type-Options:"nosniff", X-XSS-Protection:"0", Cache-Control:"no-cache, no-store, max-age=0, must-revalidate", Pragma:"no-cache", Expires:"0", X-Frame-Options:"DENY"]
     Content type = application/json
             Body = [{"id":6,"name":"Admin","email":"admin@economatom.com","role":"ADMIN"}]
    Forwarded URL = null
   Redirected URL = null
          Cookies = []
Hibernate: 
    select
        u1_0.user_id,
        u1_0.email,
        u1_0.name,
        u1_0.password,
        u1_0.role 
    from
        users u1_0
Hibernate: 
    delete 
    from
        users 
    where
        user_id=?
Hibernate: 
    insert 
    into
        users
        (email, name, password, role) 
    values
        (?, ?, ?, ?)
2026-01-30T22:38:24.515Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Securing POST /api/auth/login
2026-01-30T22:38:24.515Z DEBUG 372594 --- [inventory] [           main] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2026-01-30T22:38:24.515Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Secured POST /api/auth/login
2026-01-30T22:38:24.515Z DEBUG 372594 --- [inventory] [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.economatom.inventory.controller.AuthController#authenticateUser(LoginRequestDTO)
2026-01-30T22:38:24.516Z DEBUG 372594 --- [inventory] [           main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [LoginRequestDTO(name=Admin, password=admin123)]
Hibernate: 
    select
        u1_0.user_id,
        u1_0.email,
        u1_0.name,
        u1_0.password,
        u1_0.role 
    from
        users u1_0 
    where
        u1_0.name=?
2026-01-30T22:38:24.557Z DEBUG 372594 --- [inventory] [           main] o.s.s.a.dao.DaoAuthenticationProvider    : Authenticated user
2026-01-30T22:38:24.558Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T22:38:24.558Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [LoginResponseDTO(token=eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJBZG1pbiIsImlhdCI6MTc2OTgxMjcwNCwiZXhwIjoxNzY5 (truncated)...]
2026-01-30T22:38:24.559Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Securing POST /api/users
Hibernate: 
    select
        u1_0.user_id,
        u1_0.email,
        u1_0.name,
        u1_0.password,
        u1_0.role 
    from
        users u1_0 
    where
        u1_0.name=?
2026-01-30T22:38:24.562Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Secured POST /api/users
2026-01-30T22:38:24.562Z DEBUG 372594 --- [inventory] [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.economatom.inventory.controller.UserController#create(UserRequestDTO)
2026-01-30T22:38:24.562Z DEBUG 372594 --- [inventory] [           main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [UserRequestDTO(name=UsuarioTest, email=usuario@test.com, password=password123, role=USER)]
2026-01-30T22:38:24.563Z DEBUG 372594 --- [inventory] [           main] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.economatom.inventory.controller.UserController.create(com.economatom.inventory.dto.request.UserRequestDTO); target is of class [com.economatom.inventory.controller.UserController]
2026-01-30T22:38:24.563Z DEBUG 372594 --- [inventory] [           main] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.economatom.inventory.controller.UserController.create(com.economatom.inventory.dto.request.UserRequestDTO); target is of class [com.economatom.inventory.controller.UserController]
Hibernate: 
    select
        u1_0.user_id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
Hibernate: 
    insert 
    into
        users
        (email, name, password, role) 
    values
        (?, ?, ?, ?)
2026-01-30T22:38:24.604Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T22:38:24.604Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [UserResponseDTO(id=8, name=UsuarioTest, email=usuario@test.com, role=USER)]
2026-01-30T22:38:24.605Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Securing GET /api/users/8
Hibernate: 
    select
        u1_0.user_id,
        u1_0.email,
        u1_0.name,
        u1_0.password,
        u1_0.role 
    from
        users u1_0 
    where
        u1_0.name=?
2026-01-30T22:38:24.607Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Secured GET /api/users/8
2026-01-30T22:38:24.607Z DEBUG 372594 --- [inventory] [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.economatom.inventory.controller.UserController#getById(Integer)
2026-01-30T22:38:24.608Z DEBUG 372594 --- [inventory] [           main] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.economatom.inventory.controller.UserController.getById(java.lang.Integer); target is of class [com.economatom.inventory.controller.UserController]
2026-01-30T22:38:24.608Z DEBUG 372594 --- [inventory] [           main] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.economatom.inventory.controller.UserController.getById(java.lang.Integer); target is of class [com.economatom.inventory.controller.UserController]
Hibernate: 
    select
        u1_0.user_id,
        u1_0.email,
        u1_0.name,
        u1_0.password,
        u1_0.role 
    from
        users u1_0 
    where
        u1_0.user_id=?
2026-01-30T22:38:24.609Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T22:38:24.609Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [UserResponseDTO(id=8, name=UsuarioTest, email=usuario@test.com, role=USER)]

MockHttpServletRequest:
      HTTP Method = GET
      Request URI = /api/users/8
       Parameters = {}
          Headers = [Authorization:"Bearer eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJBZG1pbiIsImlhdCI6MTc2OTgxMjcwNCwiZXhwIjoxNzY5ODEzNTA0fQ.X1Jz4hSYkwSygOLWFaZe3T2UJS366RUOadpGdgqSxv8"]
             Body = null
    Session Attrs = {}

Handler:
             Type = com.economatom.inventory.controller.UserController
           Method = com.economatom.inventory.controller.UserController#getById(Integer)

Async:
    Async started = false
     Async result = null

Resolved Exception:
             Type = null

ModelAndView:
        View name = null
             View = null
            Model = null

FlashMap:
       Attributes = null

MockHttpServletResponse:
           Status = 200
    Error message = null
          Headers = [Vary:"Origin", "Access-Control-Request-Method", "Access-Control-Request-Headers", Content-Type:"application/json", X-Content-Type-Options:"nosniff", X-XSS-Protection:"0", Cache-Control:"no-cache, no-store, max-age=0, must-revalidate", Pragma:"no-cache", Expires:"0", X-Frame-Options:"DENY"]
     Content type = application/json
             Body = {"id":8,"name":"UsuarioTest","email":"usuario@test.com","role":"USER"}
    Forwarded URL = null
   Redirected URL = null
          Cookies = []
Hibernate: 
    select
        u1_0.user_id,
        u1_0.email,
        u1_0.name,
        u1_0.password,
        u1_0.role 
    from
        users u1_0
Hibernate: 
    delete 
    from
        users 
    where
        user_id=?
Hibernate: 
    delete 
    from
        users 
    where
        user_id=?
Hibernate: 
    insert 
    into
        users
        (email, name, password, role) 
    values
        (?, ?, ?, ?)
2026-01-30T22:38:24.656Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Securing POST /api/auth/login
2026-01-30T22:38:24.656Z DEBUG 372594 --- [inventory] [           main] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2026-01-30T22:38:24.656Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Secured POST /api/auth/login
2026-01-30T22:38:24.656Z DEBUG 372594 --- [inventory] [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.economatom.inventory.controller.AuthController#authenticateUser(LoginRequestDTO)
2026-01-30T22:38:24.657Z DEBUG 372594 --- [inventory] [           main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [LoginRequestDTO(name=Admin, password=admin123)]
Hibernate: 
    select
        u1_0.user_id,
        u1_0.email,
        u1_0.name,
        u1_0.password,
        u1_0.role 
    from
        users u1_0 
    where
        u1_0.name=?
2026-01-30T22:38:24.697Z DEBUG 372594 --- [inventory] [           main] o.s.s.a.dao.DaoAuthenticationProvider    : Authenticated user
2026-01-30T22:38:24.698Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T22:38:24.698Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [LoginResponseDTO(token=eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJBZG1pbiIsImlhdCI6MTc2OTgxMjcwNCwiZXhwIjoxNzY5 (truncated)...]
2026-01-30T22:38:24.699Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Securing POST /api/users
Hibernate: 
    select
        u1_0.user_id,
        u1_0.email,
        u1_0.name,
        u1_0.password,
        u1_0.role 
    from
        users u1_0 
    where
        u1_0.name=?
2026-01-30T22:38:24.701Z DEBUG 372594 --- [inventory] [           main] o.s.security.web.FilterChainProxy        : Secured POST /api/users
2026-01-30T22:38:24.701Z DEBUG 372594 --- [inventory] [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.economatom.inventory.controller.UserController#create(UserRequestDTO)
2026-01-30T22:38:24.701Z DEBUG 372594 --- [inventory] [           main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [UserRequestDTO(name=UsuarioTest, email=usuario@test.com, password=password123, role=USER)]
2026-01-30T22:38:24.701Z DEBUG 372594 --- [inventory] [           main] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.economatom.inventory.controller.UserController.create(com.economatom.inventory.dto.request.UserRequestDTO); target is of class [com.economatom.inventory.controller.UserController]
2026-01-30T22:38:24.702Z DEBUG 372594 --- [inventory] [           main] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.economatom.inventory.controller.UserController.create(com.economatom.inventory.dto.request.UserRequestDTO); target is of class [com.economatom.inventory.controller.UserController]
Hibernate: 
    select
        u1_0.user_id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
Hibernate: 
    insert 
    into
        users
        (email, name, password, role) 
    values
        (?, ?, ?, ?)
2026-01-30T22:38:24.742Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T22:38:24.742Z DEBUG 372594 --- [inventory] [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [UserResponseDTO(id=10, name=UsuarioTest, email=usuario@test.com, role=USER)]

MockHttpServletRequest:
      HTTP Method = POST
      Request URI = /api/users
       Parameters = {}
          Headers = [Content-Type:"application/json;charset=UTF-8", Authorization:"Bearer eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJBZG1pbiIsImlhdCI6MTc2OTgxMjcwNCwiZXhwIjoxNzY5ODEzNTA0fQ.X1Jz4hSYkwSygOLWFaZe3T2UJS366RUOadpGdgqSxv8", Content-Length:"88"]
             Body = {"name":"UsuarioTest","email":"usuario@test.com","password":"password123","role":"USER"}
    Session Attrs = {}

Handler:
             Type = com.economatom.inventory.controller.UserController
           Method = com.economatom.inventory.controller.UserController#create(UserRequestDTO)

Async:
    Async started = false
     Async result = null

Resolved Exception:
             Type = null

ModelAndView:
        View name = null
             View = null
            Model = null

FlashMap:
       Attributes = null

MockHttpServletResponse:
           Status = 201
    Error message = null
          Headers = [Vary:"Origin", "Access-Control-Request-Method", "Access-Control-Request-Headers", Content-Type:"application/json", X-Content-Type-Options:"nosniff", X-XSS-Protection:"0", Cache-Control:"no-cache, no-store, max-age=0, must-revalidate", Pragma:"no-cache", Expires:"0", X-Frame-Options:"DENY"]
     Content type = application/json
             Body = {"id":10,"name":"UsuarioTest","email":"usuario@test.com","role":"USER"}
    Forwarded URL = null
   Redirected URL = null
          Cookies = []
[INFO] Tests run: 5, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.719 s -- in com.economatom.inventory.controller.UserControllerIntegrationTest
[INFO] Running com.economatom.inventory.exception.GlobalExceptionHandlerTest
2026-01-30T22:38:24.757Z  WARN 372594 --- [inventory] [           main] c.e.i.exception.GlobalExceptionHandler   : Error de bloqueo de stock: Stock lock error
2026-01-30T22:38:24.762Z  WARN 372594 --- [inventory] [           main] c.e.i.exception.GlobalExceptionHandler   : Conflicto de concurrencia detectado (OptimisticLockException): Optimistic lock
2026-01-30T22:38:25.011Z ERROR 372594 --- [inventory] [           main] c.e.i.exception.GlobalExceptionHandler   : Error no controlado

java.lang.Exception: Generic error
	at com.economatom.inventory.exception.GlobalExceptionHandlerTest.handleGeneralException_ShouldReturnInternalServerError(GlobalExceptionHandlerTest.java:231) ~[test-classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:775) ~[junit-platform-commons-1.12.2.jar:1.12.2]
	at org.junit.platform.commons.support.ReflectionSupport.invokeMethod(ReflectionSupport.java:479) ~[junit-platform-commons-1.12.2.jar:1.12.2]
	at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60) ~[junit-jupiter-engine-5.12.2.jar:5.12.2]
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131) ~[junit-jupiter-engine-5.12.2.jar:5.12.2]
	at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:161) ~[junit-jupiter-engine-5.12.2.jar:5.12.2]
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:152) ~[junit-jupiter-engine-5.12.2.jar:5.12.2]
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:91) ~[junit-jupiter-engine-5.12.2.jar:5.12.2]
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(InterceptingExecutableInvoker.java:112) ~[junit-jupiter-engine-5.12.2.jar:5.12.2]
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.lambda$invoke$0(InterceptingExecutableInvoker.java:94) ~[junit-jupiter-engine-5.12.2.jar:5.12.2]
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106) ~[junit-jupiter-engine-5.12.2.jar:5.12.2]
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64) ~[junit-jupiter-engine-5.12.2.jar:5.12.2]
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45) ~[junit-jupiter-engine-5.12.2.jar:5.12.2]
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37) ~[junit-jupiter-engine-5.12.2.jar:5.12.2]
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:93) ~[junit-jupiter-engine-5.12.2.jar:5.12.2]
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:87) ~[junit-jupiter-engine-5.12.2.jar:5.12.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:216) ~[junit-jupiter-engine-5.12.2.jar:5.12.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:212) ~[junit-jupiter-engine-5.12.2.jar:5.12.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:137) ~[junit-jupiter-engine-5.12.2.jar:5.12.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:69) ~[junit-jupiter-engine-5.12.2.jar:5.12.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:156) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54) ~[junit-platform-engine-1.12.2.jar:1.12.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:201) ~[junit-platform-launcher-1.12.2.jar:1.12.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:170) ~[junit-platform-launcher-1.12.2.jar:1.12.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:94) ~[junit-platform-launcher-1.12.2.jar:1.12.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:59) ~[junit-platform-launcher-1.12.2.jar:1.12.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:142) ~[junit-platform-launcher-1.12.2.jar:1.12.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:58) ~[junit-platform-launcher-1.12.2.jar:1.12.2]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103) ~[junit-platform-launcher-1.12.2.jar:1.12.2]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85) ~[junit-platform-launcher-1.12.2.jar:1.12.2]
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47) ~[junit-platform-launcher-1.12.2.jar:1.12.2]
	at org.junit.platform.launcher.core.InterceptingLauncher.lambda$execute$1(InterceptingLauncher.java:39) ~[junit-platform-launcher-1.12.2.jar:1.12.2]
	at org.junit.platform.launcher.core.ClasspathAlignmentCheckingLauncherInterceptor.intercept(ClasspathAlignmentCheckingLauncherInterceptor.java:25) ~[junit-platform-launcher-1.12.2.jar:1.12.2]
	at org.junit.platform.launcher.core.InterceptingLauncher.execute(InterceptingLauncher.java:38) ~[junit-platform-launcher-1.12.2.jar:1.12.2]
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47) ~[junit-platform-launcher-1.12.2.jar:1.12.2]
	at org.apache.maven.surefire.junitplatform.LauncherAdapter.executeWithoutCancellationToken(LauncherAdapter.java:60) ~[surefire-junit-platform-3.5.4.jar:3.5.4]
	at org.apache.maven.surefire.junitplatform.LauncherAdapter.execute(LauncherAdapter.java:52) ~[surefire-junit-platform-3.5.4.jar:3.5.4]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:203) ~[surefire-junit-platform-3.5.4.jar:3.5.4]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:168) ~[surefire-junit-platform-3.5.4.jar:3.5.4]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:136) ~[surefire-junit-platform-3.5.4.jar:3.5.4]
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385) ~[surefire-booter-3.5.4.jar:3.5.4]
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162) ~[surefire-booter-3.5.4.jar:3.5.4]
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507) ~[surefire-booter-3.5.4.jar:3.5.4]
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495) ~[surefire-booter-3.5.4.jar:3.5.4]

2026-01-30T22:38:25.018Z ERROR 372594 --- [inventory] [           main] c.e.i.exception.GlobalExceptionHandler   : Error al obtener bloqueo pesimista: Pessimistic locking failure
2026-01-30T22:38:25.158Z ERROR 372594 --- [inventory] [           main] c.e.i.exception.GlobalExceptionHandler   : Constraint violation: propertyName = Constraint violation message
2026-01-30T22:38:25.171Z  WARN 372594 --- [inventory] [           main] c.e.i.exception.GlobalExceptionHandler   : Conflicto de concurrencia detectado (OptimisticLockingFailureException): Optimistic locking failure
2026-01-30T22:38:25.174Z  WARN 372594 --- [inventory] [           main] c.e.i.exception.GlobalExceptionHandler   : Conflicto de concurrencia: El Product con ID 1 fue modificado por otro usuario. Por favor, recarga los datos e intenta nuevamente.
[INFO] Tests run: 13, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.428 s -- in com.economatom.inventory.exception.GlobalExceptionHandlerTest
[INFO] Running com.economatom.inventory.service.AllergenServiceTest
[INFO] Tests run: 9, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.187 s -- in com.economatom.inventory.service.AllergenServiceTest
[INFO] Running com.economatom.inventory.service.OrderDetailServiceTest
[INFO] Tests run: 3, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.273 s -- in com.economatom.inventory.service.OrderDetailServiceTest
[INFO] Running com.economatom.inventory.service.OrderServiceTest
[INFO] Tests run: 21, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.162 s -- in com.economatom.inventory.service.OrderServiceTest
[INFO] Running com.economatom.inventory.service.ProductServiceTest
[INFO] Tests run: 20, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.215 s -- in com.economatom.inventory.service.ProductServiceTest
[INFO] Running com.economatom.inventory.service.RecipeServiceTest
[INFO] Tests run: 16, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.155 s -- in com.economatom.inventory.service.RecipeServiceTest
[INFO] Running com.economatom.inventory.service.UserServiceTest
[INFO] Tests run: 16, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.130 s -- in com.economatom.inventory.service.UserServiceTest
[INFO] 
[INFO] Results:
[INFO] 
[ERROR] Failures: 
[ERROR]   AuthControllerEdgeCasesTest.login_WithValidCredentials_ShouldReturnToken:47 No value at JSON path "$.type"
[ERROR]   AuthControllerEdgeCasesTest.login_WithoutContentType_ShouldReturnUnsupportedMediaType:154 Status expected:<415> but was:<500>
[ERROR]   ProductControllerEdgeCasesTest.createProduct_WithDuplicateName_ShouldReturnBadRequest:144 Status expected:<201> but was:<200>
[ERROR]   ProductControllerEdgeCasesTest.deleteProduct_WithNonExistentId_ShouldSucceed:187 Status expected:<204> but was:<404>
[ERROR]   ProductControllerEdgeCasesTest.getAllProducts_WithPagination_ShouldReturnCorrectPage:206 Status expected:<201> but was:<200>
[ERROR]   ProductControllerEdgeCasesTest.searchProducts_WithFilters_ShouldReturnFilteredResults:243 Status expected:<201> but was:<200>
[INFO] 
[ERROR] Tests run: 174, Failures: 6, Errors: 0, Skipped: 3
[INFO] 
[INFO] ------------------------------------------------------------------------
[INFO] BUILD FAILURE
[INFO] ------------------------------------------------------------------------
[INFO] Total time:  18.742 s
[INFO] Finished at: 2026-01-30T22:38:26Z
[INFO] ------------------------------------------------------------------------
[ERROR] Failed to execute goal org.apache.maven.plugins:maven-surefire-plugin:3.5.4:test (default-test) on project inventory: There are test failures.
[ERROR] 
[ERROR] See /home/franchu/Escritorio/turing/target/surefire-reports for the individual test results.
[ERROR] See dump files (if any exist) [date].dump, [date]-jvmRun[N].dump and [date].dumpstream.
[ERROR] -> [Help 1]
[ERROR] 
[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.
[ERROR] Re-run Maven using the -X switch to enable full debug logging.
[ERROR] 
[ERROR] For more information about the errors and possible solutions, please read the following articles:
[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/MojoFailureException
